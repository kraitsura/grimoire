# Example Skill Manifest
#
# This file demonstrates the structure of a skill manifest (skill.yaml)
# that defines a reusable AI agent capability.
#
# IMPORTANT: Skills vs Plugins
# - Skills = Context injection (instructions, documentation) via SKILL.md
# - Plugins = Full packages with commands, hooks, MCP servers, agents
# Use skills for adding knowledge/instructions, use plugins for adding tools/capabilities.

# Required fields
name: example-skill
version: 1.0.0
description: An example skill demonstrating all available configuration options
type: prompt  # Options: prompt, mcp, tool (avoid 'plugin' - use actual Claude Code plugins instead)

# Optional metadata
tags:
  - example
  - tutorial
  - documentation
author: Your Name
license: MIT
repository: https://github.com/your-org/example-skill

# Claude Code Discovery Fields (IMPORTANT for skill discoverability)
#
# trigger_description: Helps Claude understand WHEN to invoke this skill.
# This is critical for automatic skill discovery. Without it, skills are
# passive documentation rather than active capabilities.
#
# Good: "Use when managing tasks, tracking issues, planning sprints, or organizing work"
# Bad:  "Task management" (too vague, won't trigger reliably)
trigger_description: >
  Use this skill when working with examples, tutorials, or demonstrations.
  Invoke when the user asks about skill configuration, manifest structure,
  or how to create new skills for AI agents.

# allowed_tools: Restricts which tools the skill can use (security boundary)
# Valid tools: Read, Write, Edit, Bash, Glob, Grep, WebFetch, WebSearch, Task, etc.
allowed_tools:
  - Read
  - Glob
  - Grep

# CLI dependencies (optional)
# Specify command-line tools required by this skill
cli:
  # Binary name as key
  bd:
    # Command to check if installed
    check: bd --version
    # Installation methods (at least one required)
    install:
      brew: brew install bd
      cargo: cargo install bd
      npm: npm install -g @beadifier/bd
      go: go install github.com/beadifier/bd@latest
      script: curl -fsSL https://get.bd.sh | sh

  # Another example with simpler configuration
  jq:
    check: jq --version
    install:
      brew: brew install jq

# Agent-specific configurations (optional)
agents:
  # Claude Code agent configuration
  claude_code:
    # Copy skill content to .claude/skills/ directory
    skill_file: true

    # Inject custom content into CLAUDE.md
    inject:
      file: CLAUDE.md
      content: |
        ## Example Skill

        This skill demonstrates how to inject custom documentation
        into the agent's context.

    # DEPRECATED: Plugin installation from skills
    # Skills should NOT install plugins. If you need plugin functionality,
    # create a proper Claude Code plugin instead (with .claude-plugin/plugin.json).
    # This field is preserved for backwards compatibility but discouraged.
    # plugin:
    #   marketplace: claude_code
    #   name: example-plugin

    # Configure MCP (Model Context Protocol) server
    mcp:
      command: node
      args:
        - /path/to/mcp-server.js
      env:
        API_KEY: ${EXAMPLE_API_KEY}
        DEBUG: "true"

  # OpenCode agent configuration
  # Note: OpenCode uses different config paths than Claude Code:
  # - Config file: opencode.json (at project root)
  # - Instructions: AGENTS.md (at project root)
  # - Skills: .opencode/skills/ directory
  opencode:
    # Inject content into AGENTS.md
    inject:
      file: AGENTS.md
      content: |
        ## Example Skill for OpenCode

        Custom documentation for OpenCode agent.

    # MCP configuration for OpenCode
    # Note: OpenCode uses different MCP format:
    # { "mcp": { "name": { "type": "local", "command": [...], "environment": {...} } } }
    mcp:
      command: python
      args:
        - -m
        - example_mcp_server

# Initialization configuration (optional)
# Commands and files to set up when skill is first enabled
init:
  # Commands to run on first enable
  commands:
    - echo "Initializing example skill..."
    - mkdir -p .example
    - echo "initialized" > .example/status.txt

  # Files to create on first enable
  files:
    .example/config.json: |
      {
        "enabled": true,
        "version": "1.0.0"
      }
    .example/README.md: |
      # Example Skill

      This skill has been initialized in your project.

# Optional prompt text (for type: prompt skills)
# This content is injected into the agent's context
prompt: |
  You are now equipped with the example skill. This skill provides:

  - CLI tools: bd, jq
  - MCP server integration
  - Custom project initialization

  When working with this skill:
  1. Use bd for task management
  2. Use jq for JSON processing
  3. Refer to .example/ for skill-specific configuration
