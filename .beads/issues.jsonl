{"id":"grimoire-026","title":"Implement local Ollama provider","description":"Create src/services/providers/ollama-provider.ts for local Ollama integration.\n\n**Features:**\n- Connect to local Ollama instance (default: http://localhost:11434)\n- List available models\n- Complete and stream requests\n- No API key required\n\n**Implementation:**\n```typescript\nconst OllamaProvider: LLMProvider = {\n  name: 'ollama',\n  \n  listModels: () =\u003e Effect.gen(function* () {\n    const response = yield* fetch('http://localhost:11434/api/tags')\n    const data = yield* response.json()\n    return data.models.map((m: any) =\u003e m.name)\n  }),\n  \n  complete: (request) =\u003e Effect.gen(function* () {\n    const response = yield* fetch('http://localhost:11434/api/chat', {\n      method: 'POST',\n      body: JSON.stringify({\n        model: request.model,\n        messages: request.messages,\n        stream: false,\n        options: { temperature: request.temperature }\n      })\n    })\n    // Parse and return\n  }),\n  \n  stream: (request) =\u003e Stream.async((emit) =\u003e {\n    // Ollama streams newline-delimited JSON\n  })\n}\n```\n\n**Error Handling:**\n- Check if Ollama is running\n- Clear error if connection refused","acceptance_criteria":"- Connects to local Ollama\n- Lists available models\n- Complete calls work\n- Streaming works\n- Clear error if not running","notes":"Assigned to agent - implementing Ollama provider","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:39.083802-08:00","updated_at":"2025-12-13T21:36:27.809228-08:00","closed_at":"2025-12-13T21:36:27.809228-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-026","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.92012-08:00","created_by":"daemon"},{"issue_id":"grimoire-026","depends_on_id":"grimoire-yeu","type":"blocks","created_at":"2025-12-13T19:30:48.953281-08:00","created_by":"daemon"}]}
{"id":"grimoire-0dp","title":"Implement StorageService for prompt CRUD operations","description":"Create the main StorageService that combines file and database operations for prompt CRUD.\n\n**Service Interface:**\n```typescript\ninterface StorageService {\n  readonly getAll: Effect.Effect\u003cPrompt[], StorageError\u003e\n  readonly getById: (id: string) =\u003e Effect.Effect\u003cPrompt, PromptNotFoundError | StorageError\u003e\n  readonly getByName: (name: string) =\u003e Effect.Effect\u003cPrompt, PromptNotFoundError | StorageError\u003e\n  readonly create: (input: CreatePromptInput) =\u003e Effect.Effect\u003cPrompt, DuplicateNameError | StorageError\u003e\n  readonly update: (id: string, input: UpdatePromptInput) =\u003e Effect.Effect\u003cPrompt, PromptNotFoundError | StorageError\u003e\n  readonly delete: (id: string, hard?: boolean) =\u003e Effect.Effect\u003cvoid, PromptNotFoundError | StorageError\u003e\n  readonly findByTags: (tags: string[]) =\u003e Effect.Effect\u003cPrompt[], StorageError\u003e\n  readonly search: (query: string) =\u003e Effect.Effect\u003cPrompt[], StorageError\u003e\n}\n```\n\n**Dependencies:** SqlService, PromptStorageService, SyncService\n\n**Operations:**\n- Create: Generate UUID, create .md file, insert into DB\n- Update: Modify file, update DB, bump version\n- Delete: Soft delete (archive) or hard delete (remove file)\n- Lookup by ID or name with fuzzy matching option","acceptance_criteria":"- All CRUD operations implemented\n- File and database stay in sync\n- Proper error types for each failure mode\n- Version incremented on updates","status":"closed","priority":1,"issue_type":"task","assignee":"agent-2","created_at":"2025-12-09T04:05:32.654935-08:00","updated_at":"2025-12-13T21:02:24.577207-08:00","closed_at":"2025-12-13T21:02:24.577207-08:00","labels":["area:convex","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-0dp","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:29.778581-08:00","created_by":"daemon"}],"comments":[{"id":32,"issue_id":"grimoire-0dp","author":"","text":"Assigned to agent-2. Starting implementation of StorageService.","created_at":"2025-12-14T04:57:25Z"},{"id":35,"issue_id":"grimoire-0dp","author":"","text":"Implementation complete by agent-2.\n\n**Created:** `src/services/storage-service.ts` (500+ lines)\n**Modified:** `src/models/errors.ts` (added DuplicateNameError)\n\n**Features:**\n- getAll, getById, getByName - query with file content\n- create - UUID generation, duplicate name check, file + DB sync\n- update - version increment, partial updates\n- delete - soft (archive) and hard delete modes\n- findByTags - SQL JOIN with tags table\n- search - FTS5 full-text search\n\nTypecheck passes. Ready for closure.","created_at":"2025-12-14T05:02:15Z"}]}
{"id":"grimoire-0hb","title":"Create import command with dry-run support","description":"Implement the `grimoire import` command.\n\n**CLI Interface:**\n```\ngrimoire import \u003csource\u003e\n  --on-conflict     skip, rename, overwrite (default: skip)\n  --dry-run         Preview without making changes\n  -i                Interactive conflict resolution\n```\n\n**Behavior:**\n1. Parse source (file path or URL)\n2. Validate against ExportBundle schema\n3. Check for conflicts (by ID and name)\n4. Apply import based on strategy\n\n**Dry Run Output:**\n```\nImport Preview:\n  Total prompts: 15\n  New: 10\n  Conflicts: 5\n    - coding-assistant (exists, same content)\n    - creative-writer (exists, different content)\n    ...\n\nUse --on-conflict=overwrite to replace existing prompts.\n```\n\n**Interactive Mode:**\nFor each conflict, show diff and prompt for action.","acceptance_criteria":"- Imports from file and URL\n- Dry run shows preview\n- Conflict strategies work\n- Interactive mode resolves conflicts\n- Validation errors clear","notes":"Assigned to agent - implementing import command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:07:15.800137-08:00","updated_at":"2025-12-13T21:36:17.076304-08:00","closed_at":"2025-12-13T21:36:17.076304-08:00","labels":["area:frontend","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-0hb","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:09.001426-08:00","created_by":"daemon"},{"issue_id":"grimoire-0hb","depends_on_id":"grimoire-37s","type":"blocks","created_at":"2025-12-13T19:28:23.000516-08:00","created_by":"daemon"}]}
{"id":"grimoire-0k3","title":"Build Ink components for interactive mode","description":"Create reusable Ink components for command interactive modes.\n\n**Components to Build:**\n\n1. **PromptForm** - Create/edit prompt form\n   - Text input for name\n   - TagEditor for tags\n   - Multi-line text area for content\n   - Save/Cancel actions\n\n2. **PromptList** - Table with selection\n   - Row highlighting\n   - Column alignment\n   - Keyboard navigation (j/k/arrows)\n   - Quick action hints\n\n3. **PromptViewer** - Full content display\n   - Scrollable content area\n   - Metadata header\n   - Syntax highlighting for code blocks\n\n4. **VariableFiller** - Template variable input\n   - Form fields for each variable\n   - Default value hints\n   - Preview panel\n\n5. **DeleteConfirm** - Confirmation dialog\n   - Show item(s) to delete\n   - Yes/No selection\n   - Cancel with Escape\n\nPlace in src/cli/components/","acceptance_criteria":"- All components implemented\n- Keyboard navigation works\n- Components are reusable\n- Consistent styling","status":"closed","priority":2,"issue_type":"task","assignee":"agent-12","created_at":"2025-12-09T04:05:33.992209-08:00","updated_at":"2025-12-13T21:11:05.871614-08:00","closed_at":"2025-12-13T21:11:05.871614-08:00","labels":["area:ui","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-0k3","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:37.12772-08:00","created_by":"daemon"},{"issue_id":"grimoire-0k3","depends_on_id":"grimoire-cpo","type":"blocks","created_at":"2025-12-13T19:24:02.130583-08:00","created_by":"daemon"},{"issue_id":"grimoire-0k3","depends_on_id":"grimoire-d7q","type":"blocks","created_at":"2025-12-13T19:24:02.205315-08:00","created_by":"daemon"},{"issue_id":"grimoire-0k3","depends_on_id":"grimoire-458","type":"blocks","created_at":"2025-12-13T19:24:02.282179-08:00","created_by":"daemon"}]}
{"id":"grimoire-0s6","title":"Implement `skills list` command","description":"List skills and their status.\n\n**File**: `src/commands/skills/list.ts`\n\n**Output format**:\n```\nEnabled (3):\n  ● beads              Agent memory \u0026 issue tracking\n  ● typescript-strict  Strict TypeScript conventions\n  ● nextjs-14          Next.js 14 App Router patterns\n\nAvailable (12):\n  ○ prisma             Prisma ORM patterns\n  ○ tailwind           Tailwind CSS utilities\n  ○ react-query        TanStack Query patterns\n  ...\n\nRun 'grimoire skills enable \u003cname\u003e' to enable a skill\nRun 'grimoire skills search \u003cquery\u003e' to find more\n```\n\n**Flags**:\n- `--enabled` - Only show enabled skills\n- `--available` - Only show cached but not enabled\n- `--json` - Machine-readable JSON output\n- `-q, --quiet` - Names only, one per line\n\n**Implementation**:\n1. Get enabled skills from state\n2. Get cached skills from cache service\n3. Format and display\n4. If no skills cached, suggest `skills add` or `skills search`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:45.469288-08:00","updated_at":"2025-12-15T11:04:56.581248-08:00","closed_at":"2025-12-15T11:04:56.581248-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-0s6","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:59.112458-08:00","created_by":"daemon"}],"comments":[{"id":78,"issue_id":"grimoire-0s6","author":"","text":"Agent assigned: Verifying implementation completeness","created_at":"2025-12-15T19:01:08Z"}]}
{"id":"grimoire-139","title":"Create cost command for token estimation","description":"Implement the `grimoire cost` command for estimating prompt costs.\n\n**CLI Interface:**\n```\ngrimoire cost \u003cprompt-name\u003e\n  -m, --model       Model for calculation (default: gpt-4o)\n  --all-models      Show costs for all models\n  --batch           Estimate for N runs\n  --output-tokens   Estimated output tokens (default: 500)\n```\n\n**Output:**\n```\nCost estimate for: coding-assistant\n\nInput tokens: 847\n\n┌─────────────────────┬──────────┬──────────┬──────────┐\n│ Model               │ Input    │ Output   │ Total    │\n├─────────────────────┼──────────┼──────────┼──────────┤\n│ gpt-4o              │ $0.0021  │ $0.0050  │ $0.0071  │\n│ gpt-4o-mini         │ $0.0001  │ $0.0003  │ $0.0004  │\n│ claude-sonnet-4     │ $0.0025  │ $0.0075  │ $0.0100  │\n│ claude-3.5-haiku    │ $0.0007  │ $0.0020  │ $0.0027  │\n└─────────────────────┴──────────┴──────────┴──────────┘\n\nFor 1000 runs with gpt-4o: ~$7.10\n```\n\n**Features:**\n- Accurate token counting\n- Multiple model comparison\n- Batch cost estimation\n- Context window warnings if prompt too long","acceptance_criteria":"- Token count accurate\n- Cost calculation correct\n- All models displayed\n- Batch estimation works\n- Context warnings shown","notes":"Assigned to agent - implementing cost command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:40.472398-08:00","updated_at":"2025-12-13T21:58:05.645539-08:00","closed_at":"2025-12-13T21:58:05.645539-08:00","labels":["area:frontend","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-139","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:35.022342-08:00","created_by":"daemon"},{"issue_id":"grimoire-139","depends_on_id":"grimoire-hss","type":"blocks","created_at":"2025-12-13T19:31:01.073136-08:00","created_by":"daemon"}],"comments":[{"id":66,"issue_id":"grimoire-139","author":"","text":"Agent afa4253 assigned - implementing cost command","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-1fy","title":"Phase 6: Interactive TUI","description":"Build the full interactive TUI mode using Ink with screens for list, view, edit, search, and settings.\n\n**App Architecture:**\n- RuntimeProvider - Effect runtime for React\n- AppProvider - Screen navigation and state\n- Router - Screen rendering\n- Global keyboard shortcuts\n\n**Screens:**\n1. ListScreen - Prompt table with selection\n2. ViewerScreen - Full content with scroll\n3. EditorScreen - Multi-line editing\n4. SearchScreen - Live search with highlights\n5. SettingsScreen - API keys, defaults, storage\n\n**Components:**\n- Layout: StatusBar, Breadcrumb, ActionBar\n- Input: MultiLineInput, TagEditor, TextInput, Select\n- Shared: ScrollableBox, Modal, KeyboardHint\n\n**Keyboard Navigation:**\n- Global: q=quit, /=search, Esc=back, ?=help\n- Navigation: j/k=up/down, Enter=select, Tab=next field\n- Screen-specific actions documented in ActionBar","design":"React + Effect integration:\n- ManagedRuntime in context\n- useEffectRun hook for data fetching\n- useEffectCallback for mutations\n- Cleanup on unmount","acceptance_criteria":"- App shell with navigation\n- Effect runtime integration with React\n- ListScreen with table and selection\n- ViewerScreen with scroll\n- EditorScreen with multi-line input\n- SearchScreen with live search\n- SettingsScreen","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-09T03:57:44.953839-08:00","updated_at":"2025-12-13T21:57:21.608777-08:00","closed_at":"2025-12-13T21:57:21.608777-08:00","dependencies":[{"issue_id":"grimoire-1fy","depends_on_id":"grimoire-vtz","type":"blocks","created_at":"2025-12-09T03:58:05.686363-08:00","created_by":"daemon"},{"issue_id":"grimoire-1fy","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.775986-08:00","created_by":"daemon"}]}
{"id":"grimoire-1fz","title":"Create chain subcommands for workflows","description":"Implement the `grimoire chain` command group for prompt workflows.\n\n**CLI Interface:**\n```\ngrimoire chain list\ngrimoire chain show \u003cchain-name\u003e\ngrimoire chain create \u003cchain-name\u003e\ngrimoire chain run \u003cchain-name\u003e\n  --var key=value\n  --dry-run\n  --verbose\ngrimoire chain validate \u003cchain-name\u003e\ngrimoire chain delete \u003cchain-name\u003e\n```\n\n**Example Chain Definition:**\n```yaml\nname: research-to-article\ndescription: Research a topic and write an article about it\nvariables:\n  topic:\n    type: string\n    required: true\n    description: The topic to research\n\nsteps:\n  - id: research\n    prompt: researcher\n    variables:\n      query: \"{{topic}}\"\n    output: research_results\n\n  - id: outline\n    prompt: outliner\n    variables:\n      topic: \"{{topic}}\"\n      research: \"{{research_results}}\"\n    output: outline\n    dependsOn: [research]\n\n  - id: write\n    prompt: writer\n    variables:\n      outline: \"{{outline}}\"\n    output: article\n    dependsOn: [outline]\n```\n\n**Run Output:**\n```\nRunning chain: research-to-article\nTopic: \"Effect-TS patterns\"\n\nStep 1/3: research\n  [streaming output...]\n  ✓ Complete (2.3s, 1,234 tokens)\n\nStep 2/3: outline\n  [streaming output...]\n  ✓ Complete (1.8s, 456 tokens)\n\nStep 3/3: write\n  [streaming output...]\n  ✓ Complete (4.2s, 2,100 tokens)\n\nChain complete! Total: 8.3s, $0.0342\n```","acceptance_criteria":"- List chains works\n- Show displays chain\n- Create opens editor\n- Run executes chain\n- Variables passed correctly\n- Dry-run shows plan","notes":"Assigned to agent - implementing chain subcommands","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:21.05774-08:00","updated_at":"2025-12-13T21:58:05.684555-08:00","closed_at":"2025-12-13T21:58:05.684555-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-1fz","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.101033-08:00","created_by":"daemon"},{"issue_id":"grimoire-1fz","depends_on_id":"grimoire-eno","type":"blocks","created_at":"2025-12-13T19:32:06.632332-08:00","created_by":"daemon"}],"comments":[{"id":67,"issue_id":"grimoire-1fz","author":"","text":"Agent a7c93fe assigned - implementing chain subcommands","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-1ht","title":"Implement AliasService for command shortcuts","description":"Create src/services/alias-service.ts for command aliases.\n\n**Service Interface:**\n```typescript\ninterface AliasService {\n  readonly createAlias: (name: string, command: string, args: string[]) =\u003e Effect.Effect\u003cAlias\u003e\n  readonly removeAlias: (name: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly listAliases: () =\u003e Effect.Effect\u003cAlias[]\u003e\n  readonly resolveAlias: (input: string[]) =\u003e Effect.Effect\u003cstring[]\u003e\n  readonly getAlias: (name: string) =\u003e Effect.Effect\u003cAlias, AliasNotFoundError\u003e\n}\n\ninterface Alias {\n  name: string\n  command: string\n  args: string[]\n  description?: string\n}\n```\n\n**Storage:**\nStore in `~/.grimoire/aliases.json`:\n```json\n{\n  \"cp\": { \"command\": \"copy\", \"args\": [\"--to-clipboard\"] },\n  \"fav\": { \"command\": \"favorite\", \"args\": [\"--list\"] },\n  \"q\": { \"command\": \"search\", \"args\": [] }\n}\n```\n\n**Resolution:**\n1. Check if first arg matches an alias\n2. Replace with command + args\n3. Append remaining args\n4. Handle nested aliases (with depth limit)\n\n**Built-in Aliases:**\nPre-configure common shortcuts.","acceptance_criteria":"- Create/remove aliases\n- List shows all aliases\n- Resolution works\n- Nested aliases handled\n- Built-in aliases provided","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-09T04:17:20.116611-08:00","updated_at":"2025-12-13T21:29:22.481561-08:00","closed_at":"2025-12-13T21:29:22.481561-08:00","labels":["area:convex","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-1ht","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:52.953513-08:00","created_by":"daemon"}]}
{"id":"grimoire-1nf","title":"Phase 5: Version Control","description":"Implement version tracking, history viewing, rollback, and branching for A/B testing.\n\n**Commands:**\n1. `history` - View version timeline with diffs\n2. `rollback` - Restore previous versions with backup\n3. `branch` - Create/switch/merge branches for A/B testing\n\n**Services:**\n- VersionService - Create/retrieve versions, compute diffs\n- BranchService - Branch management and merging\n- DiffService - Compute and format diffs (jsdiff)\n\n**Version Tracking:**\n- Automatic versioning on edits\n- Change reasons stored\n- Full content snapshots\n- Parent version references\n\n**Branching:**\n- Create branches from any version\n- Switch active branch\n- Compare branches side-by-side\n- Merge with conflict detection\n\n**Diff Formats:**\n- Unified diff (standard)\n- Side-by-side comparison\n- Inline highlights","design":"Version storage:\n- Full snapshots (not deltas)\n- Branch-aware version numbering\n- HEAD pointer per branch\n- Retention policy for cleanup","acceptance_criteria":"- VersionService for version tracking\n- history command with diff viewing\n- rollback command with backup\n- branch command for A/B testing\n- DiffViewer and SideBySideDiffViewer components","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-09T03:57:44.864938-08:00","updated_at":"2025-12-13T21:58:19.387104-08:00","closed_at":"2025-12-13T21:58:19.387104-08:00","dependencies":[{"issue_id":"grimoire-1nf","depends_on_id":"grimoire-vtz","type":"blocks","created_at":"2025-12-09T03:58:05.638984-08:00","created_by":"daemon"},{"issue_id":"grimoire-1nf","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.675126-08:00","created_by":"daemon"}],"comments":[{"id":70,"issue_id":"grimoire-1nf","author":"","text":"Phase 5 status update: 7/8 tasks complete. Only grimoire-abt (version retention policy) remains in_progress.","created_at":"2025-12-14T05:57:28Z"}]}
{"id":"grimoire-1r9","title":"Create branch subcommands for A/B testing","description":"Implement the `grimoire branch` command group for branch management.\n\n**CLI Interface:**\n```\ngrimoire branch \u003cprompt-name\u003e list\ngrimoire branch \u003cprompt-name\u003e create \u003cbranch-name\u003e\ngrimoire branch \u003cprompt-name\u003e switch \u003cbranch-name\u003e\ngrimoire branch \u003cprompt-name\u003e compare \u003cbranch-a\u003e \u003cbranch-b\u003e\ngrimoire branch \u003cprompt-name\u003e merge \u003csource\u003e [target]\ngrimoire branch \u003cprompt-name\u003e delete \u003cbranch-name\u003e\n```\n\n**Subcommands:**\n\n1. **list**: Show all branches for prompt\n   ```\n   BRANCH        HEAD    CREATED\n   * main        v5      2024-01-01\n     experiment  v3      2024-01-10\n   ```\n\n2. **create**: Create new branch from current version\n   - Optional: create from specific version\n\n3. **switch**: Change active branch\n   - Updates prompt file to branch's head content\n\n4. **compare**: Show diff between two branches\n   - Side-by-side or unified format\n\n5. **merge**: Merge source branch into target\n   - Fast-forward if possible\n   - Report conflicts if content diverged\n\n6. **delete**: Remove branch (not main)","acceptance_criteria":"- All subcommands work\n- Active branch marked with *\n- Create from any version\n- Switch updates file content\n- Compare shows diffs\n- Merge handles conflicts","notes":"Assigned to agent - implementing branch subcommands","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:08:26.224681-08:00","updated_at":"2025-12-13T21:36:21.834293-08:00","closed_at":"2025-12-13T21:36:21.834293-08:00","labels":["area:frontend","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-1r9","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.374128-08:00","created_by":"daemon"},{"issue_id":"grimoire-1r9","depends_on_id":"grimoire-3q1","type":"blocks","created_at":"2025-12-13T19:29:01.478567-08:00","created_by":"daemon"}]}
{"id":"grimoire-1tm","title":"Add interactive Compare Dashboard screen","description":"Create an interactive dashboard for A/B testing and comparing prompts. Side-by-side response display, metrics comparison, and winner selection.","design":"**Current State:**\n- `src/commands/compare.ts` - CLI compare command\n- Side-by-side table output\n- No interactive view\n\n**Implementation Plan:**\n\n1. **Create CompareScreen** (`src/cli/screens/CompareScreen.tsx`):\n   - Select prompts to compare\n   - Configure comparison parameters\n   - Side-by-side scrollable results\n   - Metrics table and winner selection\n\n2. **Prompt Selection:**\n```\n┌─ Compare Prompts ───────────────────┐\n│ Select prompts to compare:          │\n│                                     │\n│ [x] coding-assistant-v1             │\n│ [x] coding-assistant-v2             │\n│ [ ] coding-assistant-v3             │\n│ [ ] legacy-coder                    │\n├─────────────────────────────────────┤\n│ Model: [gpt-4o]  Vars: [--vars ...] │\n│ [Enter]compare  [Esc]cancel         │\n└─────────────────────────────────────┘\n```\n\n3. **Side-by-Side Results:**\n```\n┌─ coding-v1 ─────────┬─ coding-v2 ─────────┐\n│ Here's my analysis  │ I'll analyze this   │\n│ of the code:        │ code for you:       │\n│                     │                     │\n│ 1. The function...  │ Looking at the      │\n│ 2. Consider...      │ implementation:     │\n│ ...                 │ ...                 │\n│ [j/k to scroll]     │ [J/K to scroll]     │\n├─────────────────────┼─────────────────────┤\n│ 245 tokens | 2.3s   │ 312 tokens | 2.8s   │\n│ $0.0024             │ $0.0031             │\n└─────────────────────┴─────────────────────┘\nWinner: [1]v1  [2]v2  [n]either  [Esc]back\n```\n\n**Files to Create:**\n- `src/cli/screens/CompareScreen.tsx`\n- `src/cli/components/compare/side-by-side.tsx`\n- `src/cli/components/compare/metrics-table.tsx`","acceptance_criteria":"- [ ] Multi-select prompts for comparison (2-4)\n- [ ] Configure model and variables\n- [ ] Side-by-side scrollable output panels\n- [ ] Independent scrolling for each panel\n- [ ] Metrics comparison (tokens, cost, time)\n- [ ] Winner selection and recording\n- [ ] Can rerun comparison with different settings","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.633686-08:00","updated_at":"2025-12-14T17:48:29.664723-08:00","closed_at":"2025-12-14T17:48:29.664723-08:00","dependencies":[{"issue_id":"grimoire-1tm","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:22.918406-08:00","created_by":"daemon"}]}
{"id":"grimoire-1us","title":"Phase 7: Testing \u0026 Evaluation","description":"Implement LLM integration for testing prompts, comparison, benchmarking, and cost estimation.\n\n**Commands:**\n1. `test` - Send prompt to LLM with streaming output\n2. `compare` - A/B test multiple prompts\n3. `benchmark` - Run automated test suites\n4. `cost` - Estimate token costs\n\n**Services:**\n- LLMService - Provider abstraction with streaming\n- OpenAI Provider - GPT-4o, o1, etc.\n- Anthropic Provider - Claude Sonnet 4, Opus 4, etc.\n- Ollama Provider - Local models\n- ApiKeyService - Credential management\n- RateLimiterService - Handle rate limits\n- ResponseCacheService - Cache responses\n- TokenCounterService - tiktoken integration\n\n**Providers:**\n- OpenAI: gpt-4o, gpt-4o-mini, o1, o1-mini\n- Anthropic: claude-sonnet-4, claude-opus-4, claude-3.5-*\n- Local: Ollama with any downloaded model\n\n**Benchmark Format:**\nYAML test files with assertions (contains, matches, notContains)","design":"Provider abstraction:\n- Common LLMRequest/LLMResponse types\n- Stream as Effect Stream\n- Provider registry for lookup\n- API key from env \u003e config","acceptance_criteria":"- LLMService with provider abstraction\n- OpenAI and Anthropic providers\n- test command with streaming\n- compare command\n- benchmark command with YAML test files\n- cost command with token counting","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-09T03:57:45.044773-08:00","updated_at":"2025-12-13T21:58:19.432055-08:00","closed_at":"2025-12-13T21:58:19.432055-08:00","dependencies":[{"issue_id":"grimoire-1us","depends_on_id":"grimoire-vtz","type":"blocks","created_at":"2025-12-09T03:58:05.740451-08:00","created_by":"daemon"},{"issue_id":"grimoire-1us","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.864156-08:00","created_by":"daemon"}],"comments":[{"id":69,"issue_id":"grimoire-1us","author":"","text":"Phase 7 status update: 12/13 tasks complete. Only grimoire-139 (cost command) remains in_progress. Compare, benchmark, and testing components all implemented.","created_at":"2025-12-14T05:57:21Z"}]}
{"id":"grimoire-1ut","title":"Create history command for viewing versions","description":"Implement the `grimoire history` command for viewing prompt version history.\n\n**CLI Interface:**\n```\ngrimoire history \u003cprompt-name\u003e\n  -n, --limit       Number of versions (default: 10)\n  --all             Show all versions\n  --diff            Show inline diffs between versions\n  --oneline         Compact format\n  -i                Interactive mode\n```\n\n**Default Output:**\n```\nHistory for: coding-assistant\n\nv3 (HEAD) - 2024-01-15 10:30\n  \"Updated to use newer API format\"\n  +15 -8 lines\n\nv2 - 2024-01-10 14:00\n  \"Added error handling section\"\n  +42 -0 lines\n\nv1 - 2024-01-01 00:00\n  \"Initial version\"\n  Created\n```\n\n**With --diff:**\nShow unified diff between consecutive versions.\n\n**Interactive Mode:**\n- Select version to view full content\n- Compare any two versions\n- Restore selected version","acceptance_criteria":"- Shows version history\n- Change reasons displayed\n- Line change counts shown\n- --diff shows differences\n- Interactive version selection","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:08:25.969337-08:00","updated_at":"2025-12-13T21:29:35.335511-08:00","closed_at":"2025-12-13T21:29:35.335511-08:00","labels":["area:frontend","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-1ut","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.051532-08:00","created_by":"daemon"},{"issue_id":"grimoire-1ut","depends_on_id":"grimoire-f2l","type":"blocks","created_at":"2025-12-13T19:29:01.174634-08:00","created_by":"daemon"}]}
{"id":"grimoire-1wa","title":"Create compare command for A/B testing","description":"Implement the `grimoire compare` command for comparing prompts.\n\n**CLI Interface:**\n```\ngrimoire compare \u003cprompt1\u003e \u003cprompt2\u003e [prompt3...]\n  -m, --model       Model to use\n  --parallel        Run in parallel (default: true)\n  --format          Output: table, json, markdown\n  --vars            Variables (applied to all prompts)\n  -i                Interactive winner selection\n```\n\n**Behavior:**\n1. Load all prompts\n2. Send same request to each (parallel by default)\n3. Display results side-by-side\n4. Show timing and cost comparison\n\n**Output:**\n```\nComparing 2 prompts with gpt-4o\n\n┌────────────────────┬────────────────────┐\n│ coding-assistant   │ coding-v2          │\n├────────────────────┼────────────────────┤\n│ Here's a function  │ Let me write a     │\n│ that calculates... │ function for you...│\n│                    │                    │\n│ Tokens: 423        │ Tokens: 398        │\n│ Time: 2.3s         │ Time: 2.1s         │\n│ Cost: $0.0051      │ Cost: $0.0048      │\n└────────────────────┴────────────────────┘\n```\n\n**Interactive Mode:**\nVote for winner, save comparison result.","acceptance_criteria":"- Compares multiple prompts\n- Parallel execution works\n- Side-by-side display\n- Stats for each prompt\n- Winner selection in -i mode","notes":"Assigned to agent - implementing compare command for A/B testing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:40.111718-08:00","updated_at":"2025-12-13T21:57:02.526453-08:00","closed_at":"2025-12-13T21:57:02.526453-08:00","labels":["area:frontend","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-1wa","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:48.323343-08:00","created_by":"daemon"},{"issue_id":"grimoire-1wa","depends_on_id":"grimoire-yuo","type":"blocks","created_at":"2025-12-13T19:31:01.157208-08:00","created_by":"daemon"}]}
{"id":"grimoire-1wu","title":"[Phase 1] Skills Core Infrastructure","description":"Foundation layer for skills feature. Must be completed before any commands can be implemented.\n\n**Deliverables**:\n1. Data models (Skill schema, error types, config types)\n2. Core services (cache, state, config)\n3. Command routing structure\n4. Help text integration\n\n**Files to create**:\n- `src/models/skill.ts` - Skill types and schemas\n- `src/models/skill-errors.ts` - Domain errors\n- `src/services/skills/` - Skills service directory\n- `src/commands/skills.ts` - Main command router","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:33:42.961805-08:00","updated_at":"2025-12-15T10:54:35.624252-08:00","closed_at":"2025-12-15T10:54:35.624252-08:00","labels":["infrastructure","skills"],"dependencies":[{"issue_id":"grimoire-1wu","depends_on_id":"grimoire-av5","type":"parent-child","created_at":"2025-12-14T16:33:55.659408-08:00","created_by":"daemon"}]}
{"id":"grimoire-1yv","title":"Create benchmark command for automated testing","description":"Implement the `grimoire benchmark` command for running test suites.\n\n**CLI Interface:**\n```\ngrimoire benchmark \u003ctest-file\u003e\n  -m, --model       Model to use\n  --parallel        Concurrent runs (default: 3)\n  --format          Output: table, json, junit\n  --timeout         Test timeout in seconds\n  -v, --verbose     Show full responses\n```\n\n**Test File Format (YAML):**\n```yaml\nname: Code Generation Benchmark\nmodel: gpt-4o\nprompt: coding-assistant\n\ntests:\n  - name: \"Python Hello World\"\n    variables:\n      language: python\n      task: \"print hello world\"\n    expected:\n      contains: [\"def \", \"print\"]\n      notContains: [\"error\", \"Error\"]\n      matches: \"\\\\bdef\\\\s+\\\\w+\"\n      \n  - name: \"TypeScript Type\"\n    variables:\n      language: typescript\n    expected:\n      contains: [\"interface\", \"type\"]\n```\n\n**Output:**\n```\nRunning: Code Generation Benchmark (5 tests)\n\n✓ Python Hello World (1.2s)\n✓ TypeScript Type (1.5s)\n✗ Complex Algorithm - missing \"yield\"\n✓ Error Handling (1.8s)\n✓ Documentation (1.1s)\n\nResults: 4/5 passed (80%)\nTotal time: 6.6s\nTotal cost: $0.0234\n```","acceptance_criteria":"- Runs test file\n- Assertions work (contains, matches)\n- Parallel execution\n- JUnit output format\n- Summary statistics","notes":"Assigned to agent - implementing benchmark command for automated testing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:40.290164-08:00","updated_at":"2025-12-13T21:57:02.549972-08:00","closed_at":"2025-12-13T21:57:02.549972-08:00","labels":["area:frontend","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-1yv","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:48.404958-08:00","created_by":"daemon"},{"issue_id":"grimoire-1yv","depends_on_id":"grimoire-yuo","type":"blocks","created_at":"2025-12-13T19:31:01.253121-08:00","created_by":"daemon"}]}
{"id":"grimoire-20c","title":"Add interactive model selection for CLI","description":"When `--model` is not provided, show interactive model selection if multiple providers/models available.\n\n## Implementation\n- Use Ink's `SelectInput` or similar for interactive selection\n- Group models by provider in the selection list\n- Show recently used models at the top\n- Allow `--no-interactive` flag to disable and use default\n- Remember last used model per command (optional enhancement)\n\n## Behavior\n- If only one provider configured with clear default → use it\n- If multiple providers → prompt user to select\n- If `--model` specified → use it directly (no prompt)\n\n## Files to Modify\n- Create `src/cli/components/model-selector.tsx`\n- Update command files to use interactive selection","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T10:41:49.376267-08:00","updated_at":"2025-12-15T10:41:49.376267-08:00","labels":["cli","interactive","ux"],"dependencies":[{"issue_id":"grimoire-20c","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.197033-08:00","created_by":"daemon"},{"issue_id":"grimoire-20c","depends_on_id":"grimoire-bwz","type":"blocks","created_at":"2025-12-15T10:42:21.445713-08:00","created_by":"daemon"},{"issue_id":"grimoire-20c","depends_on_id":"grimoire-erb","type":"blocks","created_at":"2025-12-15T10:42:21.50161-08:00","created_by":"daemon"}]}
{"id":"grimoire-20u","title":"Implement SyncService for git-based sync","description":"Create src/services/remote-sync-service.ts for syncing prompts to git.\n\n**Service Interface:**\n```typescript\ninterface RemoteSyncService {\n  readonly configure: (config: SyncConfig) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly push: (options?: PushOptions) =\u003e Effect.Effect\u003cSyncResult\u003e\n  readonly pull: (options?: PullOptions) =\u003e Effect.Effect\u003cSyncResult\u003e\n  readonly getStatus: () =\u003e Effect.Effect\u003cSyncStatus\u003e\n  readonly resolveConflicts: (resolutions: Resolution[]) =\u003e Effect.Effect\u003cvoid\u003e\n}\n\ninterface SyncConfig {\n  provider: 'git' | 'gist' | 's3'\n  remote: string  // Git URL, Gist ID, or S3 bucket\n  branch?: string\n  autoSync?: boolean\n}\n```\n\n**Git Provider Implementation:**\n```typescript\nconst GitSyncProvider = {\n  push: () =\u003e Effect.gen(function* () {\n    yield* runGit(['add', '.'])\n    yield* runGit(['commit', '-m', 'Grimoire sync'])\n    yield* runGit(['push', 'origin', branch])\n  }),\n  \n  pull: () =\u003e Effect.gen(function* () {\n    yield* runGit(['fetch', 'origin'])\n    yield* runGit(['merge', 'origin/' + branch])\n  })\n}\n```\n\n**Conflict Handling:**\n- Detect merge conflicts\n- Show diff for each conflict\n- Allow manual resolution","acceptance_criteria":"- Git sync works\n- Push uploads changes\n- Pull downloads changes\n- Conflicts detected\n- Manual resolution works","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:20.302284-08:00","updated_at":"2025-12-13T21:30:08.761518-08:00","closed_at":"2025-12-13T21:30:08.761518-08:00","labels":["area:api","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-20u","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.183965-08:00","created_by":"daemon"}]}
{"id":"grimoire-24z","title":"Fix tag filter keybind locking in ListScreen","description":"When pressing 't' to open tag filter in ListScreen.tsx and starting to type (e.g., typing \"tag\"), the individual keystrokes are processed by the main useInput handler instead of being captured by a filter input mode. This causes:\n- 't' opens tag filter\n- 'a' creates a new prompt (because 'a' is the add keybind)\n- etc.\n\nThe tag filter only toggles `showTagFilter` visibility but doesn't enter a proper \"input mode\" that locks out other keybinds.","design":"**Current Implementation (ListScreen.tsx:139-245):**\n- Single `useInput` handler processes all keystrokes\n- `showTagFilter` is just a visibility toggle\n- No concept of \"input mode\" that captures keyboard focus\n\n**Solution - Implement Input Mode State:**\n\n1. Add `inputMode` state similar to SearchScreen.tsx pattern:\n```tsx\ntype InputMode = \"list\" | \"tagFilter\" | \"search\";\nconst [inputMode, setInputMode] = useState\u003cInputMode\u003e(\"list\");\n```\n\n2. Modify `useInput` handler to check mode first:\n```tsx\nuseInput((input, key) =\u003e {\n  if (key.escape) {\n    if (inputMode !== \"list\") {\n      setInputMode(\"list\");\n      setShowTagFilter(false);\n      return;\n    }\n  }\n  \n  // Only process list navigation when in list mode\n  if (inputMode === \"tagFilter\") {\n    // Handle tag filter specific input\n    return;\n  }\n  \n  // Normal list keybinds\n  if (input === \"t\") {\n    setInputMode(\"tagFilter\");\n    setShowTagFilter(true);\n    return;\n  }\n  // ... other keybinds\n});\n```\n\n3. Add TextInput component for tag filter when in tagFilter mode:\n```tsx\n{showTagFilter \u0026\u0026 inputMode === \"tagFilter\" \u0026\u0026 (\n  \u003cBox\u003e\n    \u003cTextInput \n      value={tagFilterQuery} \n      onChange={setTagFilterQuery}\n      focused={true}\n    /\u003e\n  \u003c/Box\u003e\n)}\n```\n\n**Files to Modify:**\n- `src/cli/screens/ListScreen.tsx` - Add input mode state, refactor useInput handler\n- Possibly create a reusable `useInputMode` hook for consistency","acceptance_criteria":"- [ ] Pressing 't' enters tag filter mode and locks out other keybinds\n- [ ] User can type tag name to filter/search tags\n- [ ] Pressing Esc exits tag filter mode and returns to list navigation\n- [ ] Arrow keys navigate between tag options when in tag filter mode\n- [ ] Space/Enter toggles selected tag\n- [ ] Tab can also be used to exit tag filter (consistent with SearchScreen)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T12:31:05.155674-08:00","updated_at":"2025-12-14T15:34:13.513459-08:00","closed_at":"2025-12-14T15:34:13.513459-08:00","dependencies":[{"issue_id":"grimoire-24z","depends_on_id":"grimoire-7mp","type":"parent-child","created_at":"2025-12-14T12:31:12.468401-08:00","created_by":"daemon"}]}
{"id":"grimoire-28f","title":"Create format command for linting","description":"Implement the `grimoire format` command for formatting prompts.\n\n**CLI Interface:**\n```\ngrimoire format \u003cprompt-name\u003e\ngrimoire format --all             # Format all prompts\ngrimoire format --check           # Lint mode (no changes)\ngrimoire format --fix             # Auto-fix issues\ngrimoire format -i                # Interactive preview\n```\n\n**Check Mode Output:**\n```\nChecking: coding-assistant\n\n  Line 5: Trailing whitespace\n  Line 12: Missing final newline\n  Line 18: Inconsistent indentation (expected 2 spaces)\n\nFound 3 issues. Run with --fix to auto-fix.\n```\n\n**Fix Mode Output:**\n```\nFormatting: coding-assistant\n\nFixed:\n  ✓ Removed trailing whitespace (3 lines)\n  ✓ Added final newline\n  ✓ Normalized indentation\n\nPrompt formatted successfully.\n```\n\n**Interactive Mode:**\n- Show before/after diff\n- Confirm each fix\n- Skip or apply individual changes","acceptance_criteria":"- Check reports issues\n- Fix applies changes\n- --all processes all prompts\n- Interactive preview works\n- Issues categorized","notes":"Assigned to agent - implementing format command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:20.67573-08:00","updated_at":"2025-12-13T21:36:17.128174-08:00","closed_at":"2025-12-13T21:36:17.128174-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-28f","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.266409-08:00","created_by":"daemon"},{"issue_id":"grimoire-28f","depends_on_id":"grimoire-oc7","type":"blocks","created_at":"2025-12-13T19:32:06.548448-08:00","created_by":"daemon"}]}
{"id":"grimoire-2p5","title":"Fix TypeScript Errors","description":"156 TypeScript errors need fixing across the codebase before build passes. Key files with most errors:\n- src/services/index.ts (37 errors) - barrel export issues\n- src/services/retention-service.ts (12 errors)\n- src/services/providers/openai-provider.ts (11 errors)\n- tests/services/token-counter-service.test.ts (10 errors)\n- tests/services/branch-service.test.ts (9 errors)\n- tests/openai-provider.test.ts (8 errors)","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T22:00:06.566911-08:00","updated_at":"2025-12-13T22:11:06.12649-08:00","closed_at":"2025-12-13T22:11:06.12649-08:00","labels":["bugfix","typescript"]}
{"id":"grimoire-2sh","title":"Add Edit History dashboard with version browsing","description":"Create an interactive history/versions dashboard to browse prompt version history, view diffs, and restore previous versions. Current history command is CLI-only.","design":"**Current State:**\n- `src/commands/history.ts` - CLI history command\n- `src/services/version-service.ts` - Version management\n- HistoryScreen exists but basic\n\n**Implementation Plan:**\n\n1. **Enhance HistoryScreen** (`src/cli/screens/HistoryScreen.tsx`):\n   - Timeline view of versions\n   - Side-by-side diff view\n   - Restore/rollback functionality\n\n2. **Version Timeline:**\n```\n┌─ History: coding-assistant ─────────┐\n│                                     │\n│ v5 (HEAD) ─ Today, 2:30 PM          │\n│   \"Updated system prompt\"           │\n│   +12 -3 lines                      │\n│                                     │\n│ v4 ─ Yesterday, 4:15 PM             │\n│   \"Added error handling\"            │\n│   +8 -0 lines                       │\n│                                     │\n│ v3 ─ Dec 10, 2024                   │\n│   \"Refactored for clarity\"          │\n│   +20 -15 lines                     │\n│                                     │\n├─────────────────────────────────────┤\n│ [Enter]diff  [r]estore  [v]iew      │\n└─────────────────────────────────────┘\n```\n\n3. **Diff View:**\n```\n┌─ Diff: v4 → v5 ─────────────────────┐\n│                                     │\n│ @@ -10,3 +10,12 @@                  │\n│  normal line                        │\n│ -removed line                       │\n│ +added line                         │\n│ +another added line                 │\n│  unchanged                          │\n│                                     │\n├─────────────────────────────────────┤\n│ [r]estore v4  [n]ext diff  [Esc]    │\n└─────────────────────────────────────┘\n```\n\n**Files to Modify:**\n- `src/cli/screens/HistoryScreen.tsx` - Enhance with diff view\n- `src/cli/components/diff/` - Reuse existing diff components","acceptance_criteria":"- [ ] Timeline view of all versions with metadata\n- [ ] Change reason displayed for each version\n- [ ] Addition/deletion counts shown\n- [ ] Side-by-side or unified diff view\n- [ ] Can restore any previous version\n- [ ] Restore creates new version (non-destructive)\n- [ ] Latest version marked as HEAD","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:11.353728-08:00","updated_at":"2025-12-14T17:48:29.683153-08:00","closed_at":"2025-12-14T17:48:29.683153-08:00","dependencies":[{"issue_id":"grimoire-2sh","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:23.20431-08:00","created_by":"daemon"}]}
{"id":"grimoire-309","title":"Create ResponseCacheService for caching LLM responses","description":"Create src/services/response-cache-service.ts for caching LLM responses.\n\n**Service Interface:**\n```typescript\ninterface ResponseCacheService {\n  readonly get: (request: LLMRequest) =\u003e Effect.Effect\u003cOption\u003cLLMResponse\u003e\u003e\n  readonly set: (request: LLMRequest, response: LLMResponse) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly clear: () =\u003e Effect.Effect\u003cvoid\u003e\n  readonly getStats: () =\u003e Effect.Effect\u003cCacheStats\u003e\n}\n```\n\n**Cache Key:**\nHash of: model + messages + temperature + maxTokens\n\n**Storage:**\n- SQLite table or file-based cache\n- TTL-based expiration (configurable, default 24h)\n- Size limit (configurable, default 100MB)\n\n**Benefits:**\n- Avoid redundant API calls\n- Faster testing with same prompts\n- Cost savings during development\n\n**Cache Bypass:**\n- `--no-cache` flag on commands\n- Temperature \u003e 0 (non-deterministic)","acceptance_criteria":"- Cache lookup works\n- Cache write works\n- TTL expiration works\n- Size limits enforced\n- --no-cache bypasses","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:39.588143-08:00","updated_at":"2025-12-13T21:30:08.814103-08:00","closed_at":"2025-12-13T21:30:08.814103-08:00","labels":["area:convex","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-309","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:48.484753-08:00","created_by":"daemon"}]}
{"id":"grimoire-36j","title":"Create project directory structure","description":"Create the standard directory structure for the Grimoire CLI:\n\n```\ngrimoire/\n├── src/\n│   ├── index.ts              # Entry point\n│   ├── cli/\n│   │   ├── app.tsx           # Root Ink App\n│   │   ├── components/       # Ink UI components\n│   │   └── hooks/            # React hooks\n│   ├── services/\n│   │   └── index.ts          # Layer composition\n│   ├── commands/             # CLI command handlers\n│   └── models/\n│       ├── prompt.ts         # Prompt domain types\n│       └── errors.ts         # Error types\n├── tests/                    # Test files\n└── package.json\n```\n\nCreate index.ts barrel exports where appropriate.","acceptance_criteria":"- All directories created\n- Empty index.ts files in key directories\n- Structure matches plan specification","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.390452-08:00","updated_at":"2025-12-13T19:56:04.876338-08:00","closed_at":"2025-12-13T19:56:04.876338-08:00","labels":["area:infra","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-36j","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.696205-08:00","created_by":"daemon"},{"issue_id":"grimoire-36j","depends_on_id":"grimoire-jp6","type":"blocks","created_at":"2025-12-13T19:22:05.655709-08:00","created_by":"daemon"}],"comments":[{"id":3,"issue_id":"grimoire-36j","author":"","text":"Assigned to Agent-2","created_at":"2025-12-14T03:52:07Z"},{"id":7,"issue_id":"grimoire-36j","author":"","text":"Agent-2 completed. Created directory structure:\n- src/cli/app.tsx, components/, hooks/\n- src/services/, commands/, models/\n- src/models/prompt.ts, errors.ts (with Effect patterns)\n- tests/ directory with test file\nAll acceptance criteria met.","created_at":"2025-12-14T03:56:04Z"}]}
{"id":"grimoire-37s","title":"Implement ImportService with conflict handling","description":"Create src/services/import-service.ts for importing prompts.\n\n**Service Interface:**\n```typescript\ninterface ImportService {\n  readonly preview: (source: string) =\u003e Effect.Effect\u003cImportPreview\u003e\n  readonly import: (source: string, strategy: ConflictStrategy) =\u003e Effect.Effect\u003cImportResult\u003e\n  readonly validate: (data: unknown) =\u003e Effect.Effect\u003cExportBundle, ValidationError\u003e\n}\n\ntype ConflictStrategy = \"skip\" | \"rename\" | \"overwrite\"\n\ninterface ImportPreview {\n  total: number\n  newPrompts: number\n  conflicts: ConflictInfo[]\n  errors: string[]\n}\n\ninterface ImportResult {\n  imported: number\n  skipped: number\n  renamed: number\n  overwritten: number\n  errors: string[]\n}\n```\n\n**Conflict Detection:**\n- Match by ID (exact)\n- Match by name (case-insensitive)\n- Show diffs for conflicts in preview\n\n**Sources:**\n- Local file path\n- URL (fetch and parse)\n- Stdin (pipe)","acceptance_criteria":"- Preview shows what will happen\n- Skip, rename, overwrite strategies work\n- URL import works\n- Validates against schema\n- Errors reported clearly","status":"closed","priority":2,"issue_type":"task","assignee":"agent-16","created_at":"2025-12-09T04:07:15.511175-08:00","updated_at":"2025-12-13T21:29:31.132235-08:00","closed_at":"2025-12-13T21:29:31.132235-08:00","labels":["area:api","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-37s","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:09.090162-08:00","created_by":"daemon"}],"comments":[{"id":42,"issue_id":"grimoire-37s","author":"","text":"Assigned to Agent 4 - Working on src/services/import-service.ts","created_at":"2025-12-14T05:15:06Z"}]}
{"id":"grimoire-38q","title":"Add RuntimeProvider wrapper to App component for interactive mode","description":"The interactive mode (`grimoire -i`) was failing with:\n```\nError: useRuntime must be used within a RuntimeProvider\n```\n\n**Fix:** Wrapped App component with RuntimeProvider in `src/cli/app.tsx`:\n```tsx\nexport const App: React.FC = () =\u003e {\n  return (\n    \u003cRuntimeProvider\u003e\n      \u003cAppProvider\u003e\n        \u003cAppInner /\u003e\n      \u003c/AppProvider\u003e\n    \u003c/RuntimeProvider\u003e\n  );\n};\n```\n\nInteractive mode now initializes correctly (shows \"Loading prompts...\").","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:51:23.407766-08:00","updated_at":"2025-12-13T23:13:51.324589-08:00","closed_at":"2025-12-13T23:13:51.324589-08:00","labels":["feature:grimoire-cli","phase:6","type:bugfix"]}
{"id":"grimoire-3ih","title":"Define domain error types with Effect Data.TaggedError","description":"Create src/models/errors.ts with typed error classes using Effect's Data.TaggedError pattern.\n\n**Error Types:**\n```typescript\nimport { Data } from \"effect\"\n\nexport class StorageError extends Data.TaggedError(\"StorageError\")\u003c{\n  readonly message: string\n  readonly cause?: unknown\n}\u003e {}\n\nexport class PromptNotFoundError extends Data.TaggedError(\"PromptNotFoundError\")\u003c{\n  readonly id: string\n}\u003e {}\n\nexport class ValidationError extends Data.TaggedError(\"ValidationError\")\u003c{\n  readonly field: string\n  readonly message: string\n}\u003e {}\n```\n\nAdd additional error types as needed:\n- ClipboardError\n- EditorError  \n- SqlError\n- ConfigError","acceptance_criteria":"- All error types defined with Data.TaggedError\n- Each error has appropriate fields\n- Errors are exported from models/index.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.481619-08:00","updated_at":"2025-12-13T20:24:20.270411-08:00","closed_at":"2025-12-13T20:24:20.270411-08:00","labels":["area:convex","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-3ih","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.857804-08:00","created_by":"daemon"},{"issue_id":"grimoire-3ih","depends_on_id":"grimoire-70o","type":"blocks","created_at":"2025-12-13T19:22:05.882093-08:00","created_by":"daemon"}],"comments":[{"id":11,"issue_id":"grimoire-3ih","author":"","text":"Completed error types:\n- StorageError, ClipboardError, PromptNotFoundError\n- ValidationError (with field + message)\n- EditorError, SqlError, ConfigError\nAll using Effect Data.TaggedError pattern. Also fixed test file types.","created_at":"2025-12-14T04:24:20Z"}]}
{"id":"grimoire-3ja","title":"Create input components (MultiLineInput, TagEditor)","description":"Create reusable input components for the TUI.\n\n**Components:**\n\n1. **MultiLineInput** - Multi-line text editor\n   - Cursor tracking (line, column)\n   - Arrow key navigation\n   - Text insertion/deletion\n   - Line wrapping display\n   - Optional line numbers\n   - Scroll when content exceeds viewport\n\n2. **TagEditor** - Tag chip management\n   - Display existing tags as chips\n   - Add new tag (type and press Enter)\n   - Remove tag (backspace or x)\n   - Autocomplete from existing tags\n   - Keyboard navigable\n\n3. **TextInput** - Single line text input\n   - Cursor position\n   - Text selection (optional)\n   - Placeholder text\n   - Validation feedback\n\n4. **Select** - Dropdown/list selection\n   - Arrow key navigation\n   - Type to filter\n   - Selected indicator\n\n**Shared Behaviors:**\n- Focus state indication\n- Tab to move between inputs\n- Consistent border styling","acceptance_criteria":"- MultiLineInput handles editing\n- TagEditor manages tags\n- TextInput works for names\n- Select for dropdowns\n- Tab navigation between inputs","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:34.228394-08:00","updated_at":"2025-12-13T21:30:08.705392-08:00","closed_at":"2025-12-13T21:30:08.705392-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-3ja","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:34.677992-08:00","created_by":"daemon"}],"comments":[{"id":48,"issue_id":"grimoire-3ja","author":"","text":"Assigned to Agent 10 - Working on src/cli/components/input/","created_at":"2025-12-14T05:16:24Z"}]}
{"id":"grimoire-3le","title":"Implement CLI dependency installer","description":"Service for checking and installing CLI dependencies defined in skill manifests.\n\n**File**: `src/services/skills/cli-installer-service.ts`\n\n**Interface**:\n```typescript\ninterface CliInstallerServiceImpl {\n  // Check if binary is available\n  readonly check: (binary: string, checkCommand: string) =\u003e Effect.Effect\u003cboolean\u003e;\n  \n  // Install dependency\n  readonly install: (\n    binary: string,\n    installConfig: CliInstallConfig,\n    options?: InstallOptions\n  ) =\u003e Effect.Effect\u003cvoid, CliDependencyError\u003e;\n  \n  // Get available installers\n  readonly availableInstallers: () =\u003e Effect.Effect\u003cInstallerType[]\u003e;\n}\n\ntype InstallerType = 'brew' | 'cargo' | 'npm' | 'go';\n\ninterface InstallOptions {\n  preferred?: InstallerType;\n  interactive?: boolean;\n}\n```\n\n**Install preference order**:\n1. brew (if macOS and available)\n2. cargo (if Rust project or cargo available)\n3. npm (if Node project)\n4. go (if Go available)\n\n**Check command examples**:\n- `bd --version` for beads\n- `jq --version` for jq\n- `node --version` for node\n\n**Implementation**:\n```typescript\nconst install = (binary, config, options) =\u003e\n  Effect.gen(function* () {\n    // Check available installers\n    const available = yield* availableInstallers();\n    \n    // Find first matching installer\n    const installer = available.find(i =\u003e config.install[i]);\n    \n    if (!installer) {\n      return yield* Effect.fail(new CliDependencyError({\n        binary,\n        message: `No installer available. Manual install required.`\n      }));\n    }\n    \n    // Run installation\n    const pkg = config.install[installer];\n    const result = yield* runInstaller(installer, pkg);\n    \n    // Verify installation\n    const success = yield* check(binary, config.check);\n    if (!success) {\n      return yield* Effect.fail(new CliDependencyError({\n        binary,\n        message: `Installation completed but ${binary} not found`\n      }));\n    }\n  });\n```","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:36:36.891582-08:00","updated_at":"2025-12-15T11:06:29.834052-08:00","closed_at":"2025-12-15T11:06:29.834052-08:00","labels":["adapters","skills","utilities"],"dependencies":[{"issue_id":"grimoire-3le","depends_on_id":"grimoire-8vb","type":"parent-child","created_at":"2025-12-14T16:36:50.458269-08:00","created_by":"daemon"}],"comments":[{"id":75,"issue_id":"grimoire-3le","author":"","text":"Agent assigned: Creating CLI installer service","created_at":"2025-12-15T19:01:08Z"},{"id":79,"issue_id":"grimoire-3le","author":"","text":"Assigned to Agent-1: Implementing CLI dependency installer service","created_at":"2025-12-15T19:02:00Z"},{"id":84,"issue_id":"grimoire-3le","author":"","text":"Assigned to Agent a7df7b8 - implementing CliInstallerService with check, install, and availableInstallers methods","created_at":"2025-12-15T19:02:03Z"}]}
{"id":"grimoire-3nx","title":"Implement EditorService for $EDITOR integration","description":"Create src/services/editor-service.ts to open prompts in the user's preferred editor.\n\n**Service Interface:**\n```typescript\ninterface EditorService {\n  readonly open: (content: string, filename?: string) =\u003e Effect.Effect\u003cstring, EditorError\u003e\n  readonly getEditorCommand: Effect.Effect\u003cstring\u003e\n}\n```\n\n**Implementation:**\n1. Determine editor: `$VISUAL` \u003e `$EDITOR` \u003e fallback (nano/vim/notepad)\n2. Create temp file with content (use Bun's temp file API)\n3. Spawn editor process and wait for exit\n4. Read temp file contents after editor closes\n5. Clean up temp file\n\n**Temp File Handling:**\n- Use ~/.grimoire/tmp/ directory\n- Filename hint for syntax highlighting (e.g., `prompt-name.md`)\n- Preserve content on editor crash/force-quit","acceptance_criteria":"- Respects $VISUAL and $EDITOR\n- Opens editor and waits for close\n- Returns modified content\n- Temp files cleaned up","status":"closed","priority":1,"issue_type":"task","assignee":"agent-4","created_at":"2025-12-09T04:05:32.89927-08:00","updated_at":"2025-12-13T21:02:24.632485-08:00","closed_at":"2025-12-13T21:02:24.632485-08:00","labels":["area:api","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-3nx","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:29.851479-08:00","created_by":"daemon"}],"comments":[{"id":34,"issue_id":"grimoire-3nx","author":"","text":"Assigned to agent-4. Starting implementation of EditorService.","created_at":"2025-12-14T04:57:25Z"},{"id":37,"issue_id":"grimoire-3nx","author":"","text":"Implementation complete by agent-4.\n\n**Created:** `src/services/editor-service.ts`\n\n**Features:**\n- getEditorCommand - checks $VISUAL, $EDITOR, platform fallbacks\n- open(content, filename?) - temp file workflow with editor spawn\n- Interactive stdio inheritance for terminal editors\n- Temp file cleanup with error tolerance\n\nTypecheck passes. Ready for closure.","created_at":"2025-12-14T05:02:15Z"}]}
{"id":"grimoire-3q1","title":"Implement BranchService for A/B testing","description":"Create src/services/branch-service.ts for managing prompt branches.\n\n**Service Interface:**\n```typescript\ninterface BranchService {\n  readonly createBranch: (params: CreateBranchParams) =\u003e Effect.Effect\u003cBranch\u003e\n  readonly listBranches: (promptId: string) =\u003e Effect.Effect\u003cBranch[]\u003e\n  readonly switchBranch: (promptId: string, branchName: string) =\u003e Effect.Effect\u003cBranch\u003e\n  readonly deleteBranch: (promptId: string, branchName: string) =\u003e Effect.Effect\u003cvoid, BranchError\u003e\n  readonly mergeBranch: (params: MergeParams) =\u003e Effect.Effect\u003cPromptVersion, MergeConflictError\u003e\n  readonly compareBranches: (promptId: string, a: string, b: string) =\u003e Effect.Effect\u003cBranchComparison\u003e\n}\n\ninterface CreateBranchParams {\n  promptId: string\n  name: string\n  fromVersion?: number  // Default: current head\n}\n```\n\n**Branch Storage (branches table):**\n```sql\nCREATE TABLE branches (\n  id TEXT PRIMARY KEY,\n  prompt_id TEXT NOT NULL,\n  name TEXT NOT NULL,\n  created_at TEXT NOT NULL,\n  created_from_version TEXT,\n  is_active INTEGER DEFAULT 0,\n  UNIQUE(prompt_id, name)\n);\n```\n\n**Use Case:**\nCreate branch \"experiment\" to test new prompt version while keeping \"main\" stable.","acceptance_criteria":"- Create branches from any version\n- Switch between branches\n- List all branches for prompt\n- Merge branches (fast-forward or conflict)\n- Compare branches shows diff","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:08:25.74691-08:00","updated_at":"2025-12-13T21:29:31.101713-08:00","closed_at":"2025-12-13T21:29:31.101713-08:00","labels":["area:convex","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-3q1","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.463917-08:00","created_by":"daemon"},{"issue_id":"grimoire-3q1","depends_on_id":"grimoire-f2l","type":"blocks","created_at":"2025-12-13T19:29:01.398873-08:00","created_by":"daemon"}]}
{"id":"grimoire-3v7","title":"Create sync command for remote backup","description":"Implement the `grimoire sync` command for remote synchronization.\n\n**CLI Interface:**\n```\ngrimoire sync                     # Auto-detect push/pull\ngrimoire sync --push\ngrimoire sync --pull\ngrimoire sync --status\ngrimoire sync --setup             # Configure remote\ngrimoire sync --resolve           # Conflict resolution\n```\n\n**Setup Flow:**\n```\ngrimoire sync --setup\n\n? Choose sync provider:\n  \u003e Git repository\n    GitHub Gist\n    S3 bucket\n\n? Git remote URL: git@github.com:user/prompts.git\n? Branch (default: main): \n\nSync configured successfully!\nRun 'grimoire sync' to push your prompts.\n```\n\n**Status Output:**\n```\nSync Status\n\nRemote: git@github.com:user/prompts.git (main)\nLast sync: 2 hours ago\n\nLocal changes:\n  Modified: coding-assistant\n  Added: new-prompt\n\nRemote changes:\n  Modified: reviewer\n\nRun 'grimoire sync' to synchronize.\n```\n\n**Conflict Resolution:**\n```\nConflict in: coding-assistant\n\nLocal:\n  + Added new section on error handling\n\nRemote:\n  + Added examples section\n\n? How to resolve?\n  \u003e Keep local\n    Keep remote\n    Keep both (merge)\n    Open in editor\n```","acceptance_criteria":"- Setup configures remote\n- Push sends changes\n- Pull receives changes\n- Status shows state\n- Conflicts resolvable","notes":"Assigned to agent - implementing sync command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:21.447966-08:00","updated_at":"2025-12-13T21:36:17.154483-08:00","closed_at":"2025-12-13T21:36:17.154483-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-3v7","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.353514-08:00","created_by":"daemon"},{"issue_id":"grimoire-3v7","depends_on_id":"grimoire-20u","type":"blocks","created_at":"2025-12-13T19:32:06.718158-08:00","created_by":"daemon"}]}
{"id":"grimoire-3vza","title":"Add Gemini token counting and pricing","description":"Update src/services/token-counter-service.ts:\n\nAdd Gemini models to:\n- MODEL_TO_ENCODING mapping (use cl100k_base approximation)\n- MODEL_PRICING with costs:\n  - gemini-2.0-flash-exp: $0.075/$0.30 per 1M tokens\n  - gemini-1.5-pro: $1.25/$5.00 per 1M tokens\n  - gemini-1.5-flash: $0.075/$0.30 per 1M tokens\n  - gemini-1.5-flash-8b: $0.0375/$0.15 per 1M tokens","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:42.803285-08:00","updated_at":"2025-12-14T19:29:39.710383-08:00","closed_at":"2025-12-14T19:29:39.710383-08:00","labels":["ai","gemini"],"dependencies":[{"issue_id":"grimoire-3vza","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.379411-08:00","created_by":"daemon"},{"issue_id":"grimoire-3vza","depends_on_id":"grimoire-cfu9","type":"blocks","created_at":"2025-12-14T19:05:28.384026-08:00","created_by":"daemon"}]}
{"id":"grimoire-3w4","title":"Implement SkillStateService","description":"Service for managing skills state per-project.\n\n**File**: `src/services/skills/skill-state-service.ts`\n\n**Interface**:\n```typescript\ninterface SkillStateServiceImpl {\n  // Project state\n  readonly getProjectState: (projectPath: string) =\u003e Effect.Effect\u003cProjectState | null\u003e;\n  readonly initProject: (projectPath: string, agent: AgentType) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly isInitialized: (projectPath: string) =\u003e Effect.Effect\u003cboolean\u003e;\n  \n  // Enabled skills\n  readonly getEnabled: (projectPath: string) =\u003e Effect.Effect\u003cstring[]\u003e;\n  readonly setEnabled: (projectPath: string, skills: string[]) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly addEnabled: (projectPath: string, skill: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly removeEnabled: (projectPath: string, skill: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  \n  // Tracking\n  readonly recordDisable: (projectPath: string, skill: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly updateLastSync: (projectPath: string) =\u003e Effect.Effect\u003cvoid\u003e;\n}\n```\n\n**Storage**: `~/.skills/state.json`\n```json\n{\n  \"version\": 1,\n  \"projects\": {\n    \"/path/to/project\": {\n      \"agent\": \"claude_code\",\n      \"enabled\": [\"beads\", \"typescript-strict\"],\n      \"disabled_at\": { \"old-skill\": \"2024-01-15T...\" },\n      \"initialized_at\": \"2024-01-10T...\",\n      \"last_sync\": \"2024-01-15T...\"\n    }\n  }\n}\n```\n\n**Key behaviors**:\n- Auto-create state file if missing\n- Use file locking for concurrent access\n- Atomic writes (write temp, rename)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:34:42.95818-08:00","updated_at":"2025-12-15T10:54:24.060039-08:00","closed_at":"2025-12-15T10:54:24.060039-08:00","labels":["infrastructure","services","skills"],"dependencies":[{"issue_id":"grimoire-3w4","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:57.122701-08:00","created_by":"daemon"},{"issue_id":"grimoire-3w4","depends_on_id":"grimoire-n84","type":"blocks","created_at":"2025-12-14T16:34:57.400274-08:00","created_by":"daemon"},{"issue_id":"grimoire-3w4","depends_on_id":"grimoire-9n5","type":"blocks","created_at":"2025-12-14T16:34:57.554757-08:00","created_by":"daemon"}]}
{"id":"grimoire-3z7","title":"Define Arena domain types and schemas","description":"Create src/models/arena.ts with all Arena domain types:\n- ArenaRun, ArenaResult, ArenaVote, ProviderElo interfaces\n- ArenaError, ArenaRunNotFoundError error classes\n- ArenaRunStatus enum (pending | running | completed | failed)\n- VoteType enum (preference | tie | both_bad | both_good)\n- ArenaConfig interface for run configuration","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-14T18:40:26.821358-08:00","updated_at":"2025-12-14T18:40:26.821358-08:00","labels":["arena","data-layer","types"],"dependencies":[{"issue_id":"grimoire-3z7","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.457539-08:00","created_by":"daemon"}]}
{"id":"grimoire-458","title":"Create edit command with external editor support","description":"Implement the `grimoire edit` command for modifying existing prompts.\n\n**CLI Interface:**\n```\ngrimoire edit \u003cname-or-id\u003e\n  --name, -n        Edit only the name\n  --tags, -t        Edit only tags (replaces all)\n  --add-tag         Add a single tag\n  --remove-tag      Remove a single tag\n  --inline          Edit content in terminal (not $EDITOR)\n  -i                Interactive mode (full form)\n```\n\n**Behavior:**\n1. Lookup prompt by name or ID (fuzzy match)\n2. If no flags: open full content in $EDITOR\n3. If `--name`: quick rename\n4. If `--tags`: replace tags\n5. If `-i`: launch interactive editor screen\n\n**Version Handling:**\n- Increment version number\n- Save previous version to prompt_versions table\n- Update timestamps\n\nShow diff preview before saving (optional).","acceptance_criteria":"- Edit by name or ID works\n- Opens $EDITOR for content\n- Quick name/tag edits work\n- Version incremented\n- Previous version saved","status":"closed","priority":1,"issue_type":"task","assignee":"agent-7","created_at":"2025-12-09T04:05:33.290322-08:00","updated_at":"2025-12-13T21:07:14.291232-08:00","closed_at":"2025-12-13T21:07:14.291232-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-458","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:29.9292-08:00","created_by":"daemon"},{"issue_id":"grimoire-458","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:23:52.185797-08:00","created_by":"daemon"},{"issue_id":"grimoire-458","depends_on_id":"grimoire-3nx","type":"blocks","created_at":"2025-12-13T19:23:52.271315-08:00","created_by":"daemon"}]}
{"id":"grimoire-482","title":"Arena: LLM Provider Comparison Tool","description":"Create an Arena CLI tool and TUI dashboard for comparing outputs from different LLM providers (OpenAI, Anthropic, Google) for the same prompt. Includes ELO-based ranking system, SQLite persistence, and both CLI and interactive TUI interfaces.","acceptance_criteria":"- Users can select a prompt and run it against multiple providers\n- Results displayed side-by-side with metrics (tokens, cost, time)\n- ELO ranking system tracks provider performance over time\n- SQLite persistence for runs, results, and ratings\n- Both CLI command and TUI dashboard available\n- Leaderboard shows provider rankings","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-14T18:39:50.430517-08:00","updated_at":"2025-12-14T18:39:50.430517-08:00","labels":["arena","feature","llm"]}
{"id":"grimoire-4cb","title":"Add Pinned Prompts dashboard and list UI","description":"Create a dedicated pinned prompts view and improve pinned prompts visibility in the main list. Users should be able to quickly access and manage their pinned prompts.\n\nCurrent state: Pinned prompts show at top of list with 📌 icon but no dedicated view or management.","design":"**Current State:**\n- `src/services/favorite-pin-service.ts` - Pin/favorite operations\n- ListScreen shows pinned first with 📌 icon\n- No dedicated pinned view\n\n**Implementation Plan:**\n\n1. **Pinned Section in List:**\n   - Visually separate pinned section with header\n   - Quick pin/unpin with 'p' key\n   - Reorder pins with Ctrl+Up/Down\n\n2. **Updated List View:**\n```\n┌─ Prompts ───────────────────────────┐\n│ ── Pinned ──────────────────────    │\n│   📌 quick-reference      Today     │\n│   📌 daily-standup        Today     │\n│ ── All Prompts ─────────────────    │\n│   \u003e coding-assistant      2h ago    │\n│     email-template        1d ago    │\n│     analysis-prompt       3d ago    │\n└─────────────────────────────────────┘\n```\n\n3. **Pinned Dashboard (accessible via 'P'):**\n```\n┌─ Pinned Prompts ────────────────────┐\n│                                     │\n│ 1. 📌 quick-reference               │\n│ 2. 📌 daily-standup                 │\n│ 3. 📌 code-review-template          │\n│                                     │\n├─────────────────────────────────────┤\n│ Drag to reorder: Ctrl+↑/↓           │\n│                                     │\n│ [Enter]view  [u]npin  [↑↓]move      │\n└─────────────────────────────────────┘\n```\n\n**Files to Modify/Create:**\n- Modify `src/cli/screens/ListScreen.tsx` - Add pinned section header\n- Create `src/cli/screens/PinnedScreen.tsx` - Dedicated pinned view\n- Modify `src/cli/app.tsx` - Add route for pinned dashboard","acceptance_criteria":"- [ ] Pinned prompts visually separated in main list\n- [ ] 'p' key toggles pin on selected prompt\n- [ ] 'P' (shift+p) opens dedicated pinned dashboard\n- [ ] Can reorder pinned prompts with keyboard\n- [ ] Pin order persists across sessions\n- [ ] Empty state when no pinned prompts","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.990921-08:00","updated_at":"2025-12-14T17:48:29.692049-08:00","closed_at":"2025-12-14T17:48:29.692049-08:00","dependencies":[{"issue_id":"grimoire-4cb","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:23.051529-08:00","created_by":"daemon"}]}
{"id":"grimoire-4x0","title":"Add chain command model override","description":"Add ability to override model for entire chain or per-step from CLI.\n\n## Current State\n- Chain YAML has `model` field per step\n- No way to override from CLI\n\n## Enhancements\n- Add `--model` flag to override all steps\n- Add `--step-model step_name=model` for per-step override\n- Add `--list-models` to show chain's configured models\n- Precedence: CLI override \u003e YAML config \u003e default\n\n## Example Usage\n```bash\ngrimoire chain run my-chain --model claude-sonnet-4\ngrimoire chain run my-chain --step-model summarize=gpt-4o --step-model analyze=claude-opus-4\n```\n\n## Files to Modify\n- `src/commands/chain.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T10:41:49.890401-08:00","updated_at":"2025-12-15T10:41:49.890401-08:00","labels":["chain","cli","command"],"dependencies":[{"issue_id":"grimoire-4x0","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.573975-08:00","created_by":"daemon"},{"issue_id":"grimoire-4x0","depends_on_id":"grimoire-erb","type":"blocks","created_at":"2025-12-15T10:42:21.669907-08:00","created_by":"daemon"}]}
{"id":"grimoire-4xg","title":"Configure Bun test runner","description":"Set up Bun's built-in test runner for the project.\n\n**Configuration:**\n- Create bunfig.toml with test configuration\n- Set up test directory structure in tests/\n- Create example test demonstrating patterns\n- Configure test scripts in package.json\n\n**Scripts:**\n- `test`: Run all tests\n- `test:watch`: Watch mode for development\n\n**Test patterns:**\n- Effect testing utilities\n- Mocking services with test layers\n- Ink component testing (if applicable)","acceptance_criteria":"- `bun test` runs successfully\n- bunfig.toml configured\n- Example test file demonstrates patterns\n- Watch mode works","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:03:04.770708-08:00","updated_at":"2025-12-13T19:56:05.037413-08:00","closed_at":"2025-12-13T19:56:05.037413-08:00","labels":["area:testing","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-4xg","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:50.123624-08:00","created_by":"daemon"},{"issue_id":"grimoire-4xg","depends_on_id":"grimoire-jp6","type":"blocks","created_at":"2025-12-13T19:22:05.803757-08:00","created_by":"daemon"}],"comments":[{"id":5,"issue_id":"grimoire-4xg","author":"","text":"Assigned to Agent-4","created_at":"2025-12-14T03:52:07Z"},{"id":9,"issue_id":"grimoire-4xg","author":"","text":"Agent-4 completed:\n- Updated bunfig.toml with test config\n- Created tests/setup.ts and example.test.ts\n- Added test:watch script\n- Comprehensive Effect testing patterns demonstrated","created_at":"2025-12-14T03:56:04Z"}]}
{"id":"grimoire-53h","title":"Fix remaining service TypeScript errors","description":"Fix TypeScript errors in remaining service files:\n- src/services/version-service.ts (6 errors)\n- src/services/search-service.ts (5 errors)\n- src/services/archive-service.ts (4 errors)\n- src/services/api-key-service.ts (4 errors)\n- src/commands/format.ts (3 errors)\n- src/services/diff-service.ts (2 errors)\n- src/services/branch-service.ts (2 errors)\n- src/services/tag-service.ts (1 error)\n- src/services/import-service.ts (1 error)\n- src/services/chain-service.ts (1 error)\n- src/index.ts (1 error)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.733337-08:00","updated_at":"2025-12-13T22:11:02.410865-08:00","closed_at":"2025-12-13T22:11:02.410865-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-53h","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.472629-08:00","created_by":"daemon"}]}
{"id":"grimoire-53z","title":"Add CLI command to view and apply template variables","description":"Users need CLI commands to:\n1. View template variables and their defaults: `grimoire templates vars \u003cname\u003e`\n2. Apply specific values to template variables: `grimoire templates apply \u003cname\u003e --var key=value`\n\nCurrent `templates apply` only uses defaults, no way to override from CLI.","design":"**Current State (src/commands/templates.ts:103-144):**\n- `templates apply` extracts variables with defaults\n- Only applies defaults, ignores CLI input\n- No `templates vars` subcommand\n\n**Implementation:**\n\n1. **Add `templates vars` subcommand:**\n```typescript\ncase \"vars\": {\n  if (!targetArg) {\n    console.log(\"Usage: grimoire templates vars \u003cname-or-id\u003e\");\n    return;\n  }\n\n  const template = yield* storage.getById(targetArg).pipe(\n    Effect.catchTag(\"PromptNotFoundError\", () =\u003e\n      storage.getByName(targetArg)\n    )\n  );\n\n  if (!template.isTemplate) {\n    console.log(\"Error: Not a template\");\n    return;\n  }\n\n  const vars = extractVariablesWithDefaults(template.content);\n  \n  console.log(`Template: ${template.name}`);\n  console.log(`\\nVariables:`);\n  \n  if (Object.keys(vars).length === 0) {\n    console.log(\"  (none)\");\n  } else {\n    console.log(\"NAME\".padEnd(20) + \"DEFAULT\");\n    console.log(\"-\".repeat(40));\n    for (const [name, defaultVal] of Object.entries(vars)) {\n      const def = defaultVal || \"(required)\";\n      console.log(`${name.padEnd(20)}${def}`);\n    }\n  }\n  break;\n}\n```\n\n2. **Update `templates apply` to accept `--var` flags:**\n```typescript\ncase \"apply\": {\n  // ... existing code ...\n  \n  // Parse CLI variable overrides\n  const cliVars: Record\u003cstring, string\u003e = {};\n  const varFlags = args.flags[\"var\"];\n  if (typeof varFlags === \"string\") {\n    const [key, value] = varFlags.split(\"=\", 2);\n    if (key \u0026\u0026 value !== undefined) cliVars[key] = value;\n  } else if (Array.isArray(varFlags)) {\n    for (const v of varFlags) {\n      const [key, value] = v.split(\"=\", 2);\n      if (key \u0026\u0026 value !== undefined) cliVars[key] = value;\n    }\n  }\n  \n  // Merge: CLI overrides \u003e defaults\n  const vars = extractVariablesWithDefaults(template.content);\n  let content = template.content;\n  \n  for (const [varName, defaultVal] of Object.entries(vars)) {\n    const value = cliVars[varName] ?? defaultVal;\n    if (!value) {\n      console.error(`Error: Missing required variable: ${varName}`);\n      return;\n    }\n    content = content.replace(\n      new RegExp(`\\\\{\\\\{${varName}(?::[^}]*)?\\\\}\\\\}`, \"g\"),\n      value\n    );\n  }\n  // ... rest of apply logic\n}\n```\n\n**Usage:**\n```bash\ngrimoire templates vars my-template\n# Template: my-template\n# Variables:\n# NAME                DEFAULT\n# ----------------------------------------\n# name                (required)\n# greeting            Hello\n# company             Acme Inc\n\ngrimoire templates apply my-template --var name=John --var company=\"My Corp\"\n```\n\n**Files to Modify:**\n- `src/commands/templates.ts` - Add vars subcommand, update apply","acceptance_criteria":"- [ ] `grimoire templates vars \u003cname\u003e` lists all variables with defaults\n- [ ] `grimoire templates apply \u003cname\u003e --var key=value` allows variable override\n- [ ] Multiple `--var` flags supported\n- [ ] Required variables (no default) are clearly marked\n- [ ] Error if required variable not provided","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:32:22.706717-08:00","updated_at":"2025-12-14T15:55:19.193871-08:00","closed_at":"2025-12-14T15:55:19.193871-08:00","dependencies":[{"issue_id":"grimoire-53z","depends_on_id":"grimoire-wv8","type":"parent-child","created_at":"2025-12-14T12:32:32.990598-08:00","created_by":"daemon"}]}
{"id":"grimoire-5a4","title":"Create rm command with soft and hard delete","description":"Implement the `grimoire rm` command for deleting prompts.\n\n**CLI Interface:**\n```\ngrimoire rm \u003cname-or-id...\u003e\n  --force, -f       Hard delete (remove file permanently)\n  --yes, -y         Skip confirmation\n  -i                Interactive selection mode\n```\n\n**Behavior:**\n1. **Soft Delete (default):**\n   - Move file to ~/.grimoire/archive/\n   - Mark as archived in database\n   - Can be restored with `archive restore`\n\n2. **Hard Delete (--force):**\n   - Delete file permanently\n   - Remove from database\n   - Clear from FTS index\n\n**Confirmation:**\n- Show prompt name(s) to be deleted\n- Require 'y' confirmation unless --yes\n- In interactive mode, show checklist for multi-select\n\n**Bulk Delete:**\n`grimoire rm prompt1 prompt2 prompt3` deletes all specified.","acceptance_criteria":"- Soft delete archives by default\n- Hard delete removes permanently\n- Confirmation required without --yes\n- Bulk delete works\n- Interactive selection works","status":"closed","priority":1,"issue_type":"task","assignee":"agent-9","created_at":"2025-12-09T04:05:33.564154-08:00","updated_at":"2025-12-13T21:07:14.344895-08:00","closed_at":"2025-12-13T21:07:14.344895-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-5a4","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:30.007779-08:00","created_by":"daemon"},{"issue_id":"grimoire-5a4","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:23:52.54705-08:00","created_by":"daemon"}]}
{"id":"grimoire-5b2n","title":"Create Gemini provider","description":"Create new Gemini provider at src/services/providers/gemini-provider.ts\n\n- Use @tanstack/ai-gemini adapter\n- Support models: gemini-2.0-flash-exp, gemini-1.5-pro, gemini-1.5-flash, gemini-1.5-flash-8b\n- Implement LLMProvider interface (complete, stream, listModels, validateApiKey)\n- Use ApiKeyService.get(\"google\") for API key\n- Export from src/services/providers/index.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.121652-08:00","updated_at":"2025-12-14T19:26:43.227811-08:00","closed_at":"2025-12-14T19:26:43.227811-08:00","labels":["ai","gemini","provider"],"dependencies":[{"issue_id":"grimoire-5b2n","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:09.93695-08:00","created_by":"daemon"},{"issue_id":"grimoire-5b2n","depends_on_id":"grimoire-gokn","type":"blocks","created_at":"2025-12-14T19:05:27.841204-08:00","created_by":"daemon"}]}
{"id":"grimoire-5hf","title":"Set up ESLint and Prettier configuration","description":"Configure ESLint for TypeScript/React linting and Prettier for code formatting.\n\n**ESLint:**\n- TypeScript parser and plugin\n- React/React-hooks plugins for Ink components\n- Effect-specific rules if available\n\n**Prettier:**\n- Consistent formatting for .ts/.tsx files\n- Integration with ESLint (eslint-config-prettier)\n\n**Scripts:**\n- `lint`: Check for issues\n- `lint:fix`: Auto-fix issues\n- `format`: Run Prettier","acceptance_criteria":"- .eslintrc.json configured\n- .prettierrc configured\n- `bun run lint` works\n- `bun run format` works","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:03:04.302591-08:00","updated_at":"2025-12-13T20:19:59.68767-08:00","closed_at":"2025-12-13T20:19:59.68767-08:00","labels":["area:infra","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-5hf","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.77636-08:00","created_by":"daemon"},{"issue_id":"grimoire-5hf","depends_on_id":"grimoire-jp6","type":"blocks","created_at":"2025-12-13T19:22:05.730907-08:00","created_by":"daemon"}],"comments":[{"id":6,"issue_id":"grimoire-5hf","author":"","text":"Assigned to Agent-5","created_at":"2025-12-14T03:52:07Z"},{"id":10,"issue_id":"grimoire-5hf","author":"","text":"Agent-5 completed with assistance. ESLint and Prettier configured:\n- eslint.config.js with flat config format\n- TypeScript + React + React Hooks plugins\n- Effect-compatible rules\n- Prettier integration\n- lint, lint:fix, format scripts work correctly","created_at":"2025-12-14T04:19:59Z"}]}
{"id":"grimoire-5qd","title":"Implement OpenCodeAdapter","description":"Agent adapter for OpenCode integration.\n\n**File**: `src/services/skills/opencode-adapter.ts`\n\n**Detection**:\n```typescript\nreadonly detect = (projectPath: string) =\u003e\n  Effect.succeed(fs.existsSync(path.join(projectPath, \".opencode\")));\n```\n\n**Initialization**:\n- Create `.opencode/skills/` directory\n- Ensure `AGENTS.md` exists (create if not)\n- Add managed section markers if missing\n\n**MCP Configuration**:\n- Read `.opencode/config.json` (or appropriate config file)\n- Add to MCP servers section\n- Write back atomically\n\n**Plugin Installation**:\n- Not supported (OpenCode doesn't have plugin system)\n- Return no-op or skip\n\n**Injection**:\n- Same pattern as ClaudeCodeAdapter but for `AGENTS.md`\n\n**Paths**:\n- Skills dir: `.opencode/skills/`\n- Agent MD: `AGENTS.md`","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:36:36.654016-08:00","updated_at":"2025-12-15T11:06:17.591652-08:00","closed_at":"2025-12-15T11:06:17.591652-08:00","labels":["adapters","skills"],"dependencies":[{"issue_id":"grimoire-5qd","depends_on_id":"grimoire-8vb","type":"parent-child","created_at":"2025-12-14T16:36:50.338662-08:00","created_by":"daemon"},{"issue_id":"grimoire-5qd","depends_on_id":"grimoire-i8v","type":"blocks","created_at":"2025-12-14T16:36:50.607297-08:00","created_by":"daemon"},{"issue_id":"grimoire-5qd","depends_on_id":"grimoire-765","type":"blocks","created_at":"2025-12-14T16:36:50.764473-08:00","created_by":"daemon"}]}
{"id":"grimoire-5vc","title":"Create export command","description":"Implement the `grimoire export` command.\n\n**CLI Interface:**\n```\ngrimoire export\n  --format, -f      json or yaml (default: json)\n  --output, -o      File path or - for stdout\n  --tags            Filter by tags\n  --include-history Include version history\n  --pretty          Pretty print (default: true)\n```\n\n**Behavior:**\n1. Default: export all prompts to stdout as pretty JSON\n2. With `--output file.json`: write to file\n3. With `--tags coding,ts`: export only matching prompts\n\n**Example:**\n```bash\n# Export all to file\ngrimoire export -o backup.json\n\n# Export coding prompts as YAML\ngrimoire export --tags coding -f yaml -o coding-prompts.yaml\n\n# Pipe to another tool\ngrimoire export --format json | jq '.prompts | length'\n```","acceptance_criteria":"- Exports all prompts by default\n- Tag filtering works\n- JSON and YAML formats work\n- File and stdout output work\n- History inclusion optional","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:07:15.655254-08:00","updated_at":"2025-12-13T21:29:31.279499-08:00","closed_at":"2025-12-13T21:29:31.279499-08:00","labels":["area:frontend","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-5vc","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:09.183097-08:00","created_by":"daemon"},{"issue_id":"grimoire-5vc","depends_on_id":"grimoire-i2w","type":"blocks","created_at":"2025-12-13T19:28:22.905759-08:00","created_by":"daemon"}]}
{"id":"grimoire-5wo","title":"Wire Arena services into MainLive layer","description":"Update src/services/index.ts:\n- Export ArenaService and EloService\n- Add ArenaServiceLive and EloServiceLive to MainLive layer composition\n- Register Google provider in LLM service setup\n- Ensure proper dependency order in layer composition","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T18:40:27.457536-08:00","updated_at":"2025-12-14T18:40:27.457536-08:00","labels":["arena","integration"],"dependencies":[{"issue_id":"grimoire-5wo","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.805951-08:00","created_by":"daemon"},{"issue_id":"grimoire-5wo","depends_on_id":"grimoire-ak7","type":"blocks","created_at":"2025-12-14T18:41:02.669108-08:00","created_by":"daemon"},{"issue_id":"grimoire-5wo","depends_on_id":"grimoire-uhq","type":"blocks","created_at":"2025-12-14T18:41:02.766551-08:00","created_by":"daemon"},{"issue_id":"grimoire-5wo","depends_on_id":"grimoire-ui1","type":"blocks","created_at":"2025-12-14T18:41:02.861864-08:00","created_by":"daemon"}]}
{"id":"grimoire-63v","title":"Implement ArchiveService for prompt archiving","description":"Create src/services/archive-service.ts for managing archived prompts.\n\n**Service Interface:**\n```typescript\ninterface ArchiveService {\n  readonly archive: (promptNames: string[]) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly list: () =\u003e Effect.Effect\u003cArchivedPrompt[]\u003e\n  readonly restore: (promptNames: string[]) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly purge: (olderThan?: Date) =\u003e Effect.Effect\u003cnumber\u003e\n}\n\ninterface ArchivedPrompt {\n  name: string\n  archivedAt: Date\n  originalPath: string\n  archivePath: string\n}\n```\n\n**Archive Storage:**\n- Move files to `~/.grimoire/archive/`\n- Preserve directory structure\n- Track in database with `is_archived` flag or separate table\n\n**Operations:**\n- `archive`: Move to archive, update DB\n- `list`: Show archived prompts with archive date\n- `restore`: Move back to prompts/, update DB\n- `purge`: Permanently delete old archived prompts","acceptance_criteria":"- Archive moves files correctly\n- List shows all archived\n- Restore returns to original location\n- Purge removes old items\n- Database stays in sync","status":"closed","priority":2,"issue_type":"task","assignee":"agent-17","created_at":"2025-12-09T04:07:15.943006-08:00","updated_at":"2025-12-13T21:18:06.542939-08:00","closed_at":"2025-12-13T21:18:06.542939-08:00","labels":["area:convex","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-63v","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:09.279398-08:00","created_by":"daemon"}],"comments":[{"id":43,"issue_id":"grimoire-63v","author":"","text":"Assigned to Agent 5 - Working on src/services/archive-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":56,"issue_id":"grimoire-63v","author":"","text":"Implementation complete. ArchiveService created at src/services/archive-service.ts with: archive, list, restore, purge methods. Creates archived_prompts table and handles file moves between prompts/ and archive/.","created_at":"2025-12-14T05:18:06Z"}]}
{"id":"grimoire-65m","title":"Implement `skills search` command","description":"Search for skills on GitHub.\n\n**File**: `src/commands/skills/search.ts`\n\n**Output format**:\n```\nSearching GitHub for \"nextjs\"...\n\nResults (5):\n  1. core/nextjs-14       Next.js 14 App Router patterns    ★ 234\n  2. vercel/nextjs-edge   Edge runtime conventions          ★ 156\n  3. acme/nextjs-auth     Auth patterns for Next.js         ★ 89\n  4. ...\n\nRun 'grimoire skills add github:\u003crepo\u003e' to add a skill\n```\n\n**Implementation**:\n1. Search GitHub API for topic `skills-cli` or `agent-skill`\n2. Also search for `skill.yaml` filename\n3. Display formatted results\n4. Cache results briefly to avoid rate limits\n\n**Flags**:\n- `--limit \u003cn\u003e` - Max results (default: 10)\n\n**GitHub API**:\n```\nGET /search/repositories?q=topic:skills-cli+{query}\nGET /search/code?q=filename:skill.yaml+{query}\n```\n\n**Rate limiting**:\n- Use GITHUB_TOKEN if available\n- Cache results for 5 minutes\n- Graceful degradation on rate limit","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:37:25.763047-08:00","updated_at":"2025-12-15T11:14:20.080337-08:00","closed_at":"2025-12-15T11:14:20.080337-08:00","labels":["commands","polish","skills"],"dependencies":[{"issue_id":"grimoire-65m","depends_on_id":"grimoire-cwc","type":"parent-child","created_at":"2025-12-14T16:37:34.503764-08:00","created_by":"daemon"}],"comments":[{"id":95,"issue_id":"grimoire-65m","author":"","text":"Assigned to Agent-4: Implementing skills search command","created_at":"2025-12-15T19:06:57Z"},{"id":99,"issue_id":"grimoire-65m","author":"","text":"Assigned to Agent aab4c56 - implementing skills search command with GitHub API integration","created_at":"2025-12-15T19:07:32Z"},{"id":104,"issue_id":"grimoire-65m","author":"","text":"Assigning to Agent 2 - starting implementation","created_at":"2025-12-15T19:07:51Z"},{"id":108,"issue_id":"grimoire-65m","author":"","text":"Agent assigned: Implementing skills search command","created_at":"2025-12-15T19:11:13Z"}]}
{"id":"grimoire-68z","title":"Implement ArenaScreen TUI dashboard","description":"Create src/cli/screens/ArenaScreen.tsx with modes:\n1. select - Choose prompt from list\n2. providers - Multi-select providers with model dropdowns\n3. configure - Set temperature, max tokens\n4. running - Side-by-side streaming output panels\n5. results - Compare outputs with metrics\n6. vote - Select winner (A/B/Tie/Both bad)\n7. history - View past runs and leaderboard\n\nComponents: ProviderSelector, ConfigPanel, RunningPanel, ResultsPanel, VotePanel, HistoryPanel\nFollow patterns from CompareScreen.tsx","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T18:40:27.956854-08:00","updated_at":"2025-12-14T18:40:27.956854-08:00","labels":["arena","screen","tui"],"dependencies":[{"issue_id":"grimoire-68z","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:45.171217-08:00","created_by":"daemon"},{"issue_id":"grimoire-68z","depends_on_id":"grimoire-5wo","type":"blocks","created_at":"2025-12-14T18:41:03.283009-08:00","created_by":"daemon"}]}
{"id":"grimoire-6l3","title":"Add interactive Test Dashboard screen","description":"Create an interactive dashboard in the TUI to run and view prompt tests. The current test command is CLI-only. Users should be able to:\n- Select a prompt to test\n- Configure test parameters (model, temperature, etc.)\n- See streaming output in real-time\n- View test history and results\n- Save/compare results","design":"**Current State:**\n- `src/commands/test.ts` - CLI test command\n- No interactive test screen in TUI\n\n**Implementation Plan:**\n\n1. **Create TestScreen component** (`src/cli/screens/TestScreen.tsx`):\n```tsx\ninterface TestScreenProps {\n  promptId?: string;  // Optional pre-selected prompt\n}\n\ntype TestMode = \"setup\" | \"running\" | \"results\";\n\nexport const TestScreen: React.FC\u003cTestScreenProps\u003e = ({ promptId }) =\u003e {\n  const [mode, setMode] = useState\u003cTestMode\u003e(\"setup\");\n  const [config, setConfig] = useState\u003cTestConfig\u003e({\n    model: \"gpt-4o\",\n    temperature: 0.7,\n    maxTokens: 1024,\n    variables: {}\n  });\n  const [output, setOutput] = useState(\"\");\n  const [stats, setStats] = useState\u003cTestStats | null\u003e(null);\n  \n  // ... keyboard navigation, Effect hooks for LLM calls\n};\n```\n\n2. **Test Setup Screen:**\n```\n┌──────────────────────────────────────┐\n│ Test Prompt: my-coding-assistant     │\n├──────────────────────────────────────┤\n│ Model:       [gpt-4o         ▼]      │\n│ Temperature: [0.7            ]       │\n│ Max Tokens:  [1024           ]       │\n├──────────────────────────────────────┤\n│ Variables:                           │\n│   task:      [review this code ]     │\n│   language:  [python           ]     │\n├──────────────────────────────────────┤\n│ [Run Test]  [Cancel]                 │\n└──────────────────────────────────────┘\n```\n\n3. **Running Screen:**\n```\nTesting: my-coding-assistant\nModel: gpt-4o | Temp: 0.7\n───────────────────────────────────\n[Streaming response output here...]\n───────────────────────────────────\nTokens: 150 in / 234 out\nTime: 3.2s elapsed\n```\n\n4. **Results Screen:**\n```\nTest Complete: my-coding-assistant\n───────────────────────────────────\n[Full response]\n───────────────────────────────────\nStats:\n  Input Tokens:  150\n  Output Tokens: 234\n  Total Cost:    $0.0012\n  Duration:      3.2s\n  \nActions: [s]ave result  [r]un again  [Esc] back\n```\n\n**Files to Create/Modify:**\n- Create `src/cli/screens/TestScreen.tsx`\n- Modify `src/cli/app.tsx` - Add test route\n- Create `src/cli/components/testing/test-config-form.tsx`\n- Create `src/cli/components/testing/streaming-output.tsx`","acceptance_criteria":"- [ ] Test dashboard accessible from main menu (press 't' on prompt)\n- [ ] Can configure model, temperature, max tokens\n- [ ] Can set template variables before running\n- [ ] Real-time streaming output during test\n- [ ] Shows token usage and cost after completion\n- [ ] Can save test result to history\n- [ ] Keyboard navigation for all options","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.115337-08:00","updated_at":"2025-12-14T17:48:29.636916-08:00","closed_at":"2025-12-14T17:48:29.636916-08:00","dependencies":[{"issue_id":"grimoire-6l3","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:22.763504-08:00","created_by":"daemon"}]}
{"id":"grimoire-6nd","title":"Implement Anthropic provider","description":"Create src/services/providers/anthropic-provider.ts for Anthropic API integration.\n\n**Supported Models:**\n- claude-sonnet-4-20250514\n- claude-opus-4-20250514\n- claude-3-5-sonnet-20241022\n- claude-3-5-haiku-20241022\n\n**Implementation:**\n```typescript\nconst AnthropicProvider: LLMProvider = {\n  name: 'anthropic',\n  \n  complete: (request) =\u003e Effect.gen(function* () {\n    const apiKey = yield* ApiKeyService.get('anthropic')\n    const response = yield* fetch('https://api.anthropic.com/v1/messages', {\n      method: 'POST',\n      headers: {\n        'x-api-key': apiKey,\n        'anthropic-version': '2023-06-01',\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        model: request.model,\n        messages: formatMessages(request.messages),\n        max_tokens: request.maxTokens || 4096,\n        temperature: request.temperature\n      })\n    })\n    // Parse and return response\n  }),\n  \n  stream: (request) =\u003e Stream.async((emit) =\u003e {\n    // Use SSE streaming\n    // Parse event types: message_start, content_block_delta, message_stop\n  })\n}\n```\n\n**Message Format:**\nConvert between OpenAI-style messages and Anthropic format (system separate).","acceptance_criteria":"- Complete API calls work\n- Streaming works correctly\n- All Claude models supported\n- Message format conversion works\n- Token usage returned","notes":"Assigned to agent - implementing Anthropic provider","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:38.920024-08:00","updated_at":"2025-12-13T21:36:27.783682-08:00","closed_at":"2025-12-13T21:36:27.783682-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-6nd","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.398109-08:00","created_by":"daemon"},{"issue_id":"grimoire-6nd","depends_on_id":"grimoire-yeu","type":"blocks","created_at":"2025-12-13T19:30:48.846796-08:00","created_by":"daemon"},{"issue_id":"grimoire-6nd","depends_on_id":"grimoire-xqo","type":"blocks","created_at":"2025-12-13T19:31:00.909782-08:00","created_by":"daemon"}]}
{"id":"grimoire-6qy","title":"Set up FTS5 virtual table and triggers","description":"Create FTS5 full-text search virtual table for prompt searching.\n\n**FTS5 Table:**\n```sql\nCREATE VIRTUAL TABLE prompts_fts USING fts5(\n    name, content, tags,\n    content=prompts,\n    content_rowid=rowid,\n    tokenize='porter unicode61'\n);\n```\n\n**Triggers for keeping FTS in sync:**\n```sql\n-- Insert trigger\nCREATE TRIGGER prompts_ai AFTER INSERT ON prompts BEGIN\n  INSERT INTO prompts_fts(rowid, name, content, tags) \n  VALUES (new.rowid, new.name, new.content, new.tags);\nEND;\n\n-- Update trigger\nCREATE TRIGGER prompts_au AFTER UPDATE ON prompts BEGIN\n  UPDATE prompts_fts SET name = new.name, content = new.content, tags = new.tags \n  WHERE rowid = old.rowid;\nEND;\n\n-- Delete trigger\nCREATE TRIGGER prompts_ad AFTER DELETE ON prompts BEGIN\n  DELETE FROM prompts_fts WHERE rowid = old.rowid;\nEND;\n```\n\nAdd to migration v1 or v2.","acceptance_criteria":"- FTS5 table created with porter stemmer\n- Triggers sync FTS on insert/update/delete\n- Search queries return ranked results\n- Snippet generation works","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:04.186948-08:00","updated_at":"2025-12-13T20:53:02.285098-08:00","closed_at":"2025-12-13T20:53:02.285098-08:00","labels":["area:schema","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-6qy","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.602345-08:00","created_by":"daemon"},{"issue_id":"grimoire-6qy","depends_on_id":"grimoire-b2l","type":"blocks","created_at":"2025-12-13T19:22:51.180178-08:00","created_by":"daemon"}],"comments":[{"id":25,"issue_id":"grimoire-6qy","author":"","text":"Assigned to Agent-12","created_at":"2025-12-14T04:49:54Z"},{"id":27,"issue_id":"grimoire-6qy","author":"","text":"Agent-12 completed:\n- Added migration v2 with FTS5 virtual table\n- Created prompts_fts table with porter stemmer\n- Added insert, update, delete triggers for FTS sync","created_at":"2025-12-14T04:53:02Z"}]}
{"id":"grimoire-6tx","title":"Implement OpenAI provider with streaming","description":"Create src/services/providers/openai-provider.ts for OpenAI API integration.\n\n**Supported Models:**\n- gpt-4o, gpt-4o-mini\n- gpt-4-turbo, gpt-4\n- gpt-3.5-turbo\n- o1, o1-mini\n\n**Implementation:**\n```typescript\nconst OpenAIProvider: LLMProvider = {\n  name: 'openai',\n  \n  complete: (request) =\u003e Effect.gen(function* () {\n    const apiKey = yield* ApiKeyService.get('openai')\n    const response = yield* fetch('https://api.openai.com/v1/chat/completions', {\n      method: 'POST',\n      headers: { Authorization: `Bearer ${apiKey}` },\n      body: JSON.stringify({\n        model: request.model,\n        messages: request.messages,\n        temperature: request.temperature,\n        max_tokens: request.maxTokens\n      })\n    })\n    // Parse and return response\n  }),\n  \n  stream: (request) =\u003e Stream.async((emit) =\u003e {\n    // Use fetch with stream: true\n    // Parse SSE events\n    // Emit chunks\n  })\n}\n```\n\n**Features:**\n- Complete (non-streaming)\n- Stream with SSE parsing\n- Error handling (rate limits, auth)\n- Token usage tracking","acceptance_criteria":"- Complete API calls work\n- Streaming works correctly\n- All models supported\n- Rate limit errors handled\n- Token usage returned","notes":"Assigned to agent - implementing OpenAI provider","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:38.757347-08:00","updated_at":"2025-12-13T21:36:27.757379-08:00","closed_at":"2025-12-13T21:36:27.757379-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-6tx","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.47727-08:00","created_by":"daemon"},{"issue_id":"grimoire-6tx","depends_on_id":"grimoire-yeu","type":"blocks","created_at":"2025-12-13T19:30:48.745987-08:00","created_by":"daemon"},{"issue_id":"grimoire-6tx","depends_on_id":"grimoire-xqo","type":"blocks","created_at":"2025-12-13T19:31:00.834729-08:00","created_by":"daemon"}]}
{"id":"grimoire-70o","title":"Configure TypeScript for Bun + Effect + React/Ink","description":"Create tsconfig.json with proper configuration for Bun runtime, Effect library, and React/Ink JSX.\n\n**Configuration:**\n```json\n{\n  \"compilerOptions\": {\n    \"lib\": [\"ESNext\"],\n    \"target\": \"ESNext\",\n    \"module\": \"ESNext\",\n    \"jsx\": \"react-jsx\",\n    \"jsxImportSource\": \"react\",\n    \"moduleResolution\": \"bundler\",\n    \"strict\": true,\n    \"noEmit\": true,\n    \"baseUrl\": \".\",\n    \"paths\": { \"@/*\": [\"./src/*\"] },\n    \"types\": [\"bun-types\"]\n  },\n  \"include\": [\"src/**/*\", \"tests/**/*\"]\n}\n```","acceptance_criteria":"- tsconfig.json created with all settings\n- Path aliases work (@/* -\u003e src/*)\n- Bun types recognized\n- JSX compiles correctly for Ink","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.216442-08:00","updated_at":"2025-12-13T19:56:04.946783-08:00","closed_at":"2025-12-13T19:56:04.946783-08:00","labels":["area:infra","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-70o","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.616613-08:00","created_by":"daemon"},{"issue_id":"grimoire-70o","depends_on_id":"grimoire-jp6","type":"blocks","created_at":"2025-12-13T19:22:05.587753-08:00","created_by":"daemon"}],"comments":[{"id":4,"issue_id":"grimoire-70o","author":"","text":"Assigned to Agent-3","created_at":"2025-12-14T03:52:07Z"},{"id":8,"issue_id":"grimoire-70o","author":"","text":"Agent-3 completed. Updated tsconfig.json:\n- jsx: react-jsx with jsxImportSource: react\n- lib/target: ESNext\n- types: bun-types\n- noEmit: true\n- Path aliases (@/* -\u003e src/*)\n- Include tests/**/*","created_at":"2025-12-14T03:56:04Z"}]}
{"id":"grimoire-765","title":"Implement managed section injection utilities","description":"Utility functions for managing skill injections in agent MD files.\n\n**File**: `src/services/skills/injection-utils.ts`\n\n**Marker format**:\n```markdown\n\u003c!-- skills:managed:start --\u003e\n\u003c!-- skill:beads:start --\u003e\n## Issue Tracking (beads)\n...content...\n\u003c!-- skill:beads:end --\u003e\n\u003c!-- skills:managed:end --\u003e\n```\n\n**Functions**:\n```typescript\n// Check if managed section exists\nconst hasManagedSection = (content: string): boolean;\n\n// Add managed section to file\nconst addManagedSection = (content: string): string;\n\n// Check if skill is injected\nconst hasSkillInjection = (content: string, skillName: string): boolean;\n\n// Add skill injection\nconst addSkillInjection = (\n  content: string,\n  skillName: string,\n  injectionContent: string\n): Effect.Effect\u003cstring, InjectionError\u003e;\n\n// Remove skill injection\nconst removeSkillInjection = (\n  content: string,\n  skillName: string\n): string;\n\n// Replace skill injection\nconst replaceSkillInjection = (\n  content: string,\n  skillName: string,\n  newContent: string\n): Effect.Effect\u003cstring, InjectionError\u003e;\n\n// List injected skills\nconst listInjectedSkills = (content: string): string[];\n```\n\n**Edge cases**:\n- Missing end marker → Error\n- Nested/malformed markers → Error\n- Content contains marker-like strings → Escape or warn\n- Multiple same-skill injections → Error","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:36:36.771105-08:00","updated_at":"2025-12-15T11:01:28.425601-08:00","closed_at":"2025-12-15T11:01:28.425601-08:00","labels":["adapters","skills","utilities"],"dependencies":[{"issue_id":"grimoire-765","depends_on_id":"grimoire-8vb","type":"parent-child","created_at":"2025-12-14T16:36:50.392071-08:00","created_by":"daemon"}],"comments":[{"id":73,"issue_id":"grimoire-765","author":"","text":"Agent assigned: Verifying implementation completeness and running tests","created_at":"2025-12-15T19:01:08Z"}]}
{"id":"grimoire-7gm","title":"Create show command with metadata display","description":"Implement the `grimoire show` command to display prompt details.\n\n**CLI Interface:**\n```\ngrimoire show \u003cname-or-id\u003e\n  --raw, -r         Raw content only (no metadata)\n  --json            JSON output (for scripting)\n  --history, -H     Show version history\n  -i                Interactive viewer with scroll\n```\n\n**Default Output:**\n```\n╭─ Coding Assistant ─────────────────────╮\n│ ID: 550e8400-e29b...                   │\n│ Tags: coding, typescript               │\n│ Created: 2024-01-01                    │\n│ Updated: 2 hours ago                   │\n│ Version: 3                             │\n├────────────────────────────────────────┤\n│ \u003ccontent here with syntax highlight\u003e   │\n╰────────────────────────────────────────╯\n```\n\n**JSON Output:**\nFull prompt object for scripting/piping.\n\n**History Mode:**\nShow version timeline with dates and optionally inline diffs.","acceptance_criteria":"- Shows prompt with metadata\n- --raw outputs content only\n- --json outputs valid JSON\n- --history shows versions\n- Interactive viewer scrollable","status":"closed","priority":1,"issue_type":"task","assignee":"agent-10","created_at":"2025-12-09T04:05:33.705092-08:00","updated_at":"2025-12-13T21:07:14.37206-08:00","closed_at":"2025-12-13T21:07:14.37206-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-7gm","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:30.095039-08:00","created_by":"daemon"},{"issue_id":"grimoire-7gm","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:24:01.984139-08:00","created_by":"daemon"}]}
{"id":"grimoire-7h1","title":"Add Google model pricing to token counter","description":"Update src/services/token-counter-service.ts MODEL_PRICING:\n- gemini-1.5-pro: $1.25/$5.00 per 1M tokens (in/out)\n- gemini-1.5-flash: $0.075/$0.30 per 1M tokens\n- gemini-1.5-flash-8b: $0.0375/$0.15 per 1M tokens\n- gemini-2.0-flash-exp: $0.10/$0.40 per 1M tokens","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T18:40:27.575801-08:00","updated_at":"2025-12-14T18:40:27.575801-08:00","labels":["arena","integration","pricing"],"dependencies":[{"issue_id":"grimoire-7h1","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.901293-08:00","created_by":"daemon"},{"issue_id":"grimoire-7h1","depends_on_id":"grimoire-ui1","type":"blocks","created_at":"2025-12-14T18:41:02.968003-08:00","created_by":"daemon"}]}
{"id":"grimoire-7mp","title":"Interactive UI Input Mode Fixes \u0026 Improvements","description":"Epic for fixing keyboard input handling and modal states in the interactive UI. Currently, when entering filter modes (like tag filter with 't'), other keybinds are not locked, causing unexpected behavior.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-14T12:31:05.062549-08:00","updated_at":"2025-12-14T12:31:05.062549-08:00"}
{"id":"grimoire-7zt","title":"Build diff viewer Ink components","description":"Create Ink components for displaying diffs in the terminal.\n\n**Components:**\n\n1. **DiffViewer** - Unified diff display\n   - Color-coded additions (green) and deletions (red)\n   - Line numbers\n   - Context lines\n   - Scrollable for long diffs\n   - Hunk headers\n\n2. **SideBySideDiffViewer** - Two-column comparison\n   - Old content on left, new on right\n   - Aligned line numbers\n   - Highlights changes within lines\n   - Synchronized scrolling\n\n3. **HistoryViewer** - Version timeline\n   - List of versions with metadata\n   - Expandable to show diffs\n   - Navigate with arrow keys\n   - Select to restore\n\n4. **RollbackConfirm** - Confirmation dialog\n   - Shows diff summary\n   - Target version info\n   - Confirm/Cancel\n\n5. **BranchManager** - Branch management UI\n   - List branches\n   - Create/switch/delete\n   - Visual branch indicator\n\nPlace in src/cli/components/","acceptance_criteria":"- DiffViewer shows colored diff\n- SideBySide aligns properly\n- HistoryViewer navigable\n- All components scrollable\n- Keyboard navigation works","status":"closed","priority":2,"issue_type":"task","assignee":"agent-7zt","created_at":"2025-12-09T04:08:26.348194-08:00","updated_at":"2025-12-13T21:46:38.398164-08:00","closed_at":"2025-12-13T21:46:38.398164-08:00","labels":["area:ui","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-7zt","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.551319-08:00","created_by":"daemon"},{"issue_id":"grimoire-7zt","depends_on_id":"grimoire-w20","type":"blocks","created_at":"2025-12-13T19:29:01.322735-08:00","created_by":"daemon"}],"comments":[{"id":60,"issue_id":"grimoire-7zt","author":"","text":"Assigned to agent-7zt","created_at":"2025-12-14T05:34:33Z"},{"id":64,"issue_id":"grimoire-7zt","author":"","text":"Agent a72c6fc assigned - building diff viewer components","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-7zv","title":"Implement Router component for screen rendering","description":"Create Router component to render the appropriate screen based on app state.\n\n**Implementation:**\n```tsx\n// src/cli/components/Router.tsx\nexport const Router: React.FC\u003c{ screen: Screen }\u003e = ({ screen }) =\u003e {\n  switch (screen.name) {\n    case 'list':\n      return \u003cListScreen /\u003e\n    case 'view':\n      return \u003cViewerScreen promptId={screen.promptId} /\u003e\n    case 'edit':\n      return \u003cEditorScreen promptId={screen.promptId} /\u003e\n    case 'search':\n      return \u003cSearchScreen /\u003e\n    case 'settings':\n      return \u003cSettingsScreen /\u003e\n    case 'history':\n      return \u003cHistoryScreen promptId={screen.promptId} /\u003e\n    default:\n      return \u003cText\u003eUnknown screen\u003c/Text\u003e\n  }\n}\n```\n\n**Features:**\n- Renders screen based on state\n- Passes required props to screens\n- Loading states during transitions\n- Error boundary for screen crashes","acceptance_criteria":"- Router renders correct screen\n- Props passed correctly\n- Transitions smooth\n- Error handling works","notes":"Assigned to agent - implementing Router component","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.185961-08:00","updated_at":"2025-12-13T21:46:28.01569-08:00","closed_at":"2025-12-13T21:46:28.01569-08:00","labels":["area:frontend","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-7zv","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:34.751996-08:00","created_by":"daemon"},{"issue_id":"grimoire-7zv","depends_on_id":"grimoire-ae4","type":"blocks","created_at":"2025-12-13T19:29:48.178189-08:00","created_by":"daemon"}],"comments":[{"id":62,"issue_id":"grimoire-7zv","author":"","text":"Agent a9528f9 assigned - implementing Router component","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-803","title":"Enhance compare command for cross-model comparison","description":"Allow comparing the same prompt across different models/providers.\n\n## Current State\n- Compares different prompts with same model\n- No cross-model comparison\n\n## Enhancements\n- Add `--models model1,model2,...` flag for cross-model comparison\n- Add `--all-providers` to run against default model of each configured provider\n- Display comparison table with model name column\n- Show cost comparison across models\n\n## Example Usage\n```bash\n# Compare same prompt across models\ngrimoire compare my-prompt --models gpt-4o,claude-sonnet-4,gemini-2.0-flash\n\n# Compare across all configured providers\ngrimoire compare my-prompt --all-providers\n```\n\n## Files to Modify\n- `src/commands/compare.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T10:41:50.065065-08:00","updated_at":"2025-12-15T10:41:50.065065-08:00","labels":["cli","command","compare"],"dependencies":[{"issue_id":"grimoire-803","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.703555-08:00","created_by":"daemon"},{"issue_id":"grimoire-803","depends_on_id":"grimoire-20c","type":"blocks","created_at":"2025-12-15T10:42:21.768325-08:00","created_by":"daemon"}]}
{"id":"grimoire-842","title":"Create archive command","description":"Implement the `grimoire archive` command.\n\n**CLI Interface:**\n```\ngrimoire archive add \u003cname...\u003e\ngrimoire archive list\ngrimoire archive restore \u003cname...\u003e\ngrimoire archive purge [--older-than 30d]\n```\n\n**Subcommands:**\n\n1. **add**: Archive prompts (soft delete)\n   ```\n   grimoire archive add old-prompt\n   Archived: old-prompt\n   ```\n\n2. **list**: Show archived prompts\n   ```\n   NAME              ARCHIVED\n   old-prompt        3 days ago\n   deprecated-v1     2 weeks ago\n   ```\n\n3. **restore**: Restore from archive\n   - Check for name conflicts\n   - Move file back to prompts/\n\n4. **purge**: Permanently delete old archives\n   - `--older-than 30d` - delete older than 30 days\n   - Requires confirmation","acceptance_criteria":"- Archive add works\n- List shows archived prompts\n- Restore returns prompts\n- Purge cleans old archives\n- Confirmation for purge","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:07:16.089829-08:00","updated_at":"2025-12-13T21:29:31.249141-08:00","closed_at":"2025-12-13T21:29:31.249141-08:00","labels":["area:frontend","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-842","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:22.502979-08:00","created_by":"daemon"},{"issue_id":"grimoire-842","depends_on_id":"grimoire-63v","type":"blocks","created_at":"2025-12-13T19:28:23.098763-08:00","created_by":"daemon"}]}
{"id":"grimoire-8c8","title":"Add interactive Chain Dashboard screen","description":"Create an interactive dashboard to view, manage, and run prompt chains. Current chain functionality is CLI-only. The dashboard should visualize the chain workflow, allow editing, and show execution progress.","design":"**Current State:**\n- `src/commands/chain.ts` - CLI chain commands\n- `src/services/chain-service.ts` - Chain business logic\n- No TUI representation\n\n**Implementation Plan:**\n\n1. **Create ChainScreen** (`src/cli/screens/ChainScreen.tsx`):\n   - List view of all chains\n   - Detail view of selected chain with step visualization\n   - Run mode with progress tracking\n\n2. **Chain List View:**\n```\n┌─ Prompt Chains ─────────────────────┐\n│ \u003e research-to-article   3 steps     │\n│   code-review-workflow  5 steps     │\n│   content-pipeline      4 steps     │\n├─────────────────────────────────────┤\n│ [n]ew  [Enter]view  [r]un  [d]elete │\n└─────────────────────────────────────┘\n```\n\n3. **Chain Detail View (ASCII workflow visualization):**\n```\nChain: research-to-article\n\n ┌─────────┐     ┌─────────┐     ┌─────────┐\n │ Step 1  │ ──▶ │ Step 2  │ ──▶ │ Step 3  │\n │research │     │ outline │     │ article │\n └─────────┘     └─────────┘     └─────────┘\n     │               │               │\n     ▼               ▼               ▼\n   topic         research_out    outline_out\n\nVariables: topic (required)\n\n[r]un  [e]dit  [v]alidate  [Esc]back\n```\n\n4. **Chain Execution View:**\n```\nRunning: research-to-article\n─────────────────────────────────────\nStep 1/3: research [█████░░░░░] 50%\n\n[Current output streaming here...]\n─────────────────────────────────────\nCompleted: 0/3 | Cost: $0.0042 | Time: 12s\n```\n\n**Files to Create:**\n- `src/cli/screens/ChainScreen.tsx` - Main chain dashboard\n- `src/cli/components/chain/chain-list.tsx`\n- `src/cli/components/chain/chain-diagram.tsx` - ASCII workflow viz\n- `src/cli/components/chain/chain-runner.tsx`","acceptance_criteria":"- [ ] Chain dashboard accessible from interactive mode\n- [ ] Lists all available chains with step count\n- [ ] Detail view shows workflow diagram with steps and dependencies\n- [ ] Can run chain with variable input\n- [ ] Progress visualization during execution\n- [ ] Cumulative cost and time tracking\n- [ ] Can create new chain (opens editor)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.286657-08:00","updated_at":"2025-12-14T17:48:29.646351-08:00","closed_at":"2025-12-14T17:48:29.646351-08:00","dependencies":[{"issue_id":"grimoire-8c8","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:22.816243-08:00","created_by":"daemon"}]}
{"id":"grimoire-8ic","title":"Build interactive components for QoL features","description":"Create Ink components for Phase 8 interactive modes.\n\n**Components:**\n\n1. **StatsDashboard** - Interactive statistics view\n   - Collection overview\n   - Most used prompts chart\n   - Tag distribution\n   - Recent activity\n   - Refresh on demand\n\n2. **FormatPreview** - Format diff preview\n   - Before/after side-by-side\n   - Individual change toggles\n   - Apply selected changes\n   - Skip/apply all\n\n3. **FavoriteManager** - Favorite/pin management\n   - List with indicators\n   - Toggle with Enter\n   - Drag-to-reorder style\n   - Bulk operations\n\n4. **ChainEditor** - Chain creation/editing\n   - Step list\n   - Add/remove steps\n   - Variable mapping\n   - Validation feedback\n   - Run preview\n\n5. **SyncManager** - Sync status and operations\n   - Connection status\n   - Pending changes list\n   - Push/pull buttons\n   - Conflict resolution UI\n   - Progress indicator","acceptance_criteria":"- StatsDashboard displays data\n- FormatPreview shows diff\n- FavoriteManager manages favorites\n- ChainEditor creates chains\n- SyncManager handles sync","notes":"Assigned to agent - implementing QoL interactive components","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:21.646215-08:00","updated_at":"2025-12-13T21:58:05.735971-08:00","closed_at":"2025-12-13T21:58:05.735971-08:00","labels":["area:ui","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-8ic","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.442438-08:00","created_by":"daemon"},{"issue_id":"grimoire-8ic","depends_on_id":"grimoire-thi","type":"blocks","created_at":"2025-12-13T19:32:06.932874-08:00","created_by":"daemon"},{"issue_id":"grimoire-8ic","depends_on_id":"grimoire-wuy","type":"blocks","created_at":"2025-12-13T19:32:07.04783-08:00","created_by":"daemon"},{"issue_id":"grimoire-8ic","depends_on_id":"grimoire-28f","type":"blocks","created_at":"2025-12-13T19:32:07.148879-08:00","created_by":"daemon"}],"comments":[{"id":68,"issue_id":"grimoire-8ic","author":"","text":"Agent a805cde assigned - building QoL interactive components","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-8rv","title":"Implement SkillCacheService","description":"Service for managing skill cache in ~/.skills/cache/\n\n**File**: `src/services/skills/skill-cache-service.ts`\n\n**Interface**:\n```typescript\ninterface SkillCacheServiceImpl {\n  // Cache management\n  readonly getCached: (name: string) =\u003e Effect.Effect\u003cCachedSkill, SkillNotCachedError\u003e;\n  readonly listCached: () =\u003e Effect.Effect\u003cCachedSkill[]\u003e;\n  readonly isCached: (name: string) =\u003e Effect.Effect\u003cboolean\u003e;\n  \n  // Fetching\n  readonly fetchFromGitHub: (source: GitHubSource) =\u003e Effect.Effect\u003cCachedSkill, SkillSourceError\u003e;\n  readonly fetchFromLocal: (path: string) =\u003e Effect.Effect\u003cCachedSkill, SkillSourceError\u003e;\n  \n  // Validation\n  readonly validateManifest: (path: string) =\u003e Effect.Effect\u003cSkillManifest, SkillManifestError\u003e;\n  \n  // Cache operations\n  readonly remove: (name: string) =\u003e Effect.Effect\u003cvoid, SkillNotCachedError\u003e;\n  readonly clear: () =\u003e Effect.Effect\u003cvoid\u003e;\n  \n  // Index\n  readonly updateIndex: () =\u003e Effect.Effect\u003cvoid\u003e;\n}\n\ninterface CachedSkill {\n  manifest: SkillManifest;\n  skillMdPath?: string;\n  readmePath?: string;\n  cachedAt: Date;\n  source: string;\n}\n```\n\n**Storage**:\n```\n~/.skills/cache/\n├── {skill-name}/\n│   ├── skill.yaml\n│   ├── SKILL.md\n│   ├── README.md\n│   └── .meta.json  # source, cachedAt, version\n└── .index.json     # quick lookup index\n```\n\n**GitHub fetching**:\n1. Parse source: `github:owner/repo[@ref][#subdir]`\n2. Try GitHub API first (GET /repos/{owner}/{repo}/contents)\n3. Fallback to shallow git clone\n4. Validate manifest exists\n5. Store in cache directory","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:34:42.839853-08:00","updated_at":"2025-12-15T10:54:24.002897-08:00","closed_at":"2025-12-15T10:54:24.002897-08:00","labels":["infrastructure","services","skills"],"dependencies":[{"issue_id":"grimoire-8rv","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:57.067613-08:00","created_by":"daemon"},{"issue_id":"grimoire-8rv","depends_on_id":"grimoire-n84","type":"blocks","created_at":"2025-12-14T16:34:57.327501-08:00","created_by":"daemon"},{"issue_id":"grimoire-8rv","depends_on_id":"grimoire-9n5","type":"blocks","created_at":"2025-12-14T16:34:57.476262-08:00","created_by":"daemon"}]}
{"id":"grimoire-8vb","title":"[Phase 3] Agent Adapters","description":"Implement agent-specific adapters for skill integration.\n\n**Deliverables**:\n1. AgentAdapter trait/interface\n2. ClaudeCodeAdapter - Plugin installation, MCP config, CLAUDE.md injection\n3. OpenCodeAdapter - AGENTS.md injection, MCP config\n4. Agent detection logic\n\n**Key operations**:\n- `detect()` - Check if agent is used in project\n- `init()` - Create agent-specific directories\n- `enableSkill()` - Apply skill to project\n- `disableSkill()` - Remove skill from project\n\n**Blocked by**: Phase 1 (Core Infrastructure)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:33:43.587237-08:00","updated_at":"2025-12-15T11:06:28.686839-08:00","closed_at":"2025-12-15T11:06:28.686839-08:00","labels":["integration","skills"],"dependencies":[{"issue_id":"grimoire-8vb","depends_on_id":"grimoire-av5","type":"parent-child","created_at":"2025-12-14T16:33:55.759277-08:00","created_by":"daemon"},{"issue_id":"grimoire-8vb","depends_on_id":"grimoire-1wu","type":"blocks","created_at":"2025-12-14T16:33:55.945827-08:00","created_by":"daemon"}]}
{"id":"grimoire-8wm","title":"[Phase 2] Skills Commands - Core","description":"Implement the core P0 commands for skills feature.\n\n**Commands**:\n- `skills init` - Initialize project\n- `skills add \u003csource\u003e` - Cache a skill\n- `skills enable \u003cname\u003e` - Enable skill\n- `skills disable \u003cname\u003e` - Disable skill\n- `skills list` - List skills\n\n**Blocked by**: Phase 1 (Core Infrastructure)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:33:43.131839-08:00","updated_at":"2025-12-15T11:06:28.656638-08:00","closed_at":"2025-12-15T11:06:28.656638-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-8wm","depends_on_id":"grimoire-av5","type":"parent-child","created_at":"2025-12-14T16:33:55.705735-08:00","created_by":"daemon"},{"issue_id":"grimoire-8wm","depends_on_id":"grimoire-1wu","type":"blocks","created_at":"2025-12-14T16:33:55.87988-08:00","created_by":"daemon"}]}
{"id":"grimoire-8yk","title":"Implement SyncService for filesystem-database synchronization","description":"Create src/services/sync-service.ts to keep Markdown files and SQLite database in sync.\n\n**Service Interface:**\n```typescript\nclass SyncService extends Context.Tag(\"SyncService\")\u003cSyncService, {\n  readonly fullSync: () =\u003e Effect.Effect\u003cSyncResult\u003e\n  readonly syncFile: (path: string) =\u003e Effect.Effect\u003cvoid, SyncError\u003e\n  readonly checkIntegrity: () =\u003e Effect.Effect\u003cIntegrityResult\u003e\n}\u003e() {}\n```\n\n**Sync Logic:**\n1. **Full Sync:**\n   - Scan ~/.grimoire/prompts/ for .md files\n   - Compare content hashes with database\n   - Update database for changed files\n   - Remove database entries for deleted files\n   - Create files for database-only entries (if applicable)\n\n2. **Single File Sync:**\n   - Read file, parse frontmatter\n   - Compute content hash\n   - Update or insert database record\n   - Update FTS index\n\n**SyncResult:**\n- Files scanned\n- Files updated\n- Files created\n- Files removed\n- Errors encountered","acceptance_criteria":"- Full sync reconciles files with database\n- Single file sync updates one record\n- Content hashes detect changes\n- SyncResult provides clear summary","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:04.300756-08:00","updated_at":"2025-12-13T20:53:02.355855-08:00","closed_at":"2025-12-13T20:53:02.355855-08:00","labels":["area:convex","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-8yk","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.686736-08:00","created_by":"daemon"},{"issue_id":"grimoire-8yk","depends_on_id":"grimoire-eap","type":"blocks","created_at":"2025-12-13T19:22:51.256714-08:00","created_by":"daemon"},{"issue_id":"grimoire-8yk","depends_on_id":"grimoire-djq","type":"blocks","created_at":"2025-12-13T19:22:51.334574-08:00","created_by":"daemon"}],"comments":[{"id":26,"issue_id":"grimoire-8yk","author":"","text":"Assigned to Agent-13","created_at":"2025-12-14T04:49:54Z"},{"id":28,"issue_id":"grimoire-8yk","author":"","text":"Agent-13 completed:\n- Created SyncService with fullSync, syncFile, checkIntegrity methods\n- Handles file-to-DB sync with hash comparison\n- Manages tag relationships\n- Returns detailed SyncResult and IntegrityResult","created_at":"2025-12-14T04:53:02Z"}]}
{"id":"grimoire-9l4","title":"Fix retention-service.ts errors (12 errors)","description":"Fix 12 TypeScript errors in src/services/retention-service.ts","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.635146-08:00","updated_at":"2025-12-13T22:11:02.306075-08:00","closed_at":"2025-12-13T22:11:02.306075-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-9l4","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.400818-08:00","created_by":"daemon"}]}
{"id":"grimoire-9n5","title":"Define Skills domain error types","description":"Create tagged error types for skills feature.\n\n**File**: `src/models/skill-errors.ts`\n\n**Errors to define**:\n```typescript\nimport { Data } from \"effect\";\n\nexport class SkillNotFoundError extends Data.TaggedError(\"SkillNotFoundError\")\u003c{\n  name: string;\n  suggestion?: string;  // fuzzy match suggestion\n}\u003e {}\n\nexport class SkillNotCachedError extends Data.TaggedError(\"SkillNotCachedError\")\u003c{\n  name: string;\n}\u003e {}\n\nexport class SkillAlreadyEnabledError extends Data.TaggedError(\"SkillAlreadyEnabledError\")\u003c{\n  name: string;\n}\u003e {}\n\nexport class SkillNotEnabledError extends Data.TaggedError(\"SkillNotEnabledError\")\u003c{\n  name: string;\n}\u003e {}\n\nexport class SkillManifestError extends Data.TaggedError(\"SkillManifestError\")\u003c{\n  name: string;\n  message: string;\n  path?: string;\n}\u003e {}\n\nexport class SkillSourceError extends Data.TaggedError(\"SkillSourceError\")\u003c{\n  source: string;\n  message: string;\n  cause?: unknown;\n}\u003e {}\n\nexport class ProjectNotInitializedError extends Data.TaggedError(\"ProjectNotInitializedError\")\u003c{\n  path: string;\n}\u003e {}\n\nexport class AgentNotDetectedError extends Data.TaggedError(\"AgentNotDetectedError\")\u003c{\n  path: string;\n}\u003e {}\n\nexport class CliDependencyError extends Data.TaggedError(\"CliDependencyError\")\u003c{\n  binary: string;\n  message: string;\n}\u003e {}\n\nexport class PluginInstallError extends Data.TaggedError(\"PluginInstallError\")\u003c{\n  plugin: string;\n  message: string;\n}\u003e {}\n\nexport class InjectionError extends Data.TaggedError(\"InjectionError\")\u003c{\n  file: string;\n  message: string;\n}\u003e {}\n```\n\n**Follow patterns from `src/models/errors.ts`**","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:34:42.707501-08:00","updated_at":"2025-12-15T10:50:16.276401-08:00","closed_at":"2025-12-15T10:50:16.276401-08:00","labels":["errors","infrastructure","skills"],"dependencies":[{"issue_id":"grimoire-9n5","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:57.014103-08:00","created_by":"daemon"}]}
{"id":"grimoire-9q4","title":"Build ViewerScreen with scrollable content","description":"Create the prompt viewer screen for displaying full prompt content.\n\n**Features:**\n- Metadata header (name, tags, dates, version)\n- Scrollable content area\n- Syntax highlighting for code blocks\n- Actions: e=edit, c=copy, t=test, h=history, Esc=back\n\n**Layout:**\n```\n╭─ Coding Assistant ─────────────────────╮\n│ Tags: coding, typescript               │\n│ Updated: 2 hours ago | Version: 3      │\n├────────────────────────────────────────┤\n│                                        │\n│  \u003cscrollable content area\u003e             │\n│                                        │\n╰────────────────────────────────────────╯\n[e:Edit] [c:Copy] [t:Test] [h:History] [Esc:Back]\n```\n\n**Scrolling:**\n- j/k or arrows to scroll\n- Page up/down for fast scroll\n- g/G for top/bottom\n- Track scroll position indicator","acceptance_criteria":"- Full prompt content displayed\n- Metadata visible in header\n- Scrolling works smoothly\n- All actions functional\n- Code blocks highlighted","notes":"Assigned to agent - implementing ViewerScreen with scrollable content","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.469266-08:00","updated_at":"2025-12-13T21:57:02.401515-08:00","closed_at":"2025-12-13T21:57:02.401515-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-9q4","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:34.833683-08:00","created_by":"daemon"},{"issue_id":"grimoire-9q4","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:29:48.469721-08:00","created_by":"daemon"}]}
{"id":"grimoire-9w3","title":"Implement FavoriteService and PinService","description":"Create services for managing favorites and pinned prompts.\n\n**FavoriteService:**\n```typescript\ninterface FavoriteService {\n  readonly toggle: (promptId: string) =\u003e Effect.Effect\u003cboolean\u003e  // Returns new state\n  readonly add: (promptId: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly remove: (promptId: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly list: () =\u003e Effect.Effect\u003cPrompt[]\u003e\n  readonly reorder: (promptIds: string[]) =\u003e Effect.Effect\u003cvoid\u003e\n}\n```\n\n**PinService:**\n```typescript\ninterface PinService {\n  readonly toggle: (promptId: string) =\u003e Effect.Effect\u003cboolean\u003e\n  readonly pin: (promptId: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly unpin: (promptId: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly list: () =\u003e Effect.Effect\u003cPrompt[]\u003e\n  readonly reorder: (promptIds: string[]) =\u003e Effect.Effect\u003cvoid\u003e\n}\n```\n\n**Behavior:**\n- Pinned prompts appear at top of list\n- Favorites accessible via filter\n- Order preserved within each group\n- Sync favorite/pin state to frontmatter","acceptance_criteria":"- Toggle works\n- List returns correct order\n- Reorder updates positions\n- Frontmatter synced\n- Works with list command","notes":"Assigned to agent - implementing FavoriteService and PinService","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:19.758185-08:00","updated_at":"2025-12-13T21:36:21.80882-08:00","closed_at":"2025-12-13T21:36:21.80882-08:00","labels":["area:convex","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-9w3","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.542447-08:00","created_by":"daemon"},{"issue_id":"grimoire-9w3","depends_on_id":"grimoire-a4s","type":"blocks","created_at":"2025-12-13T19:31:53.159703-08:00","created_by":"daemon"}]}
{"id":"grimoire-a4s","title":"Add favorite and pin fields to Prompt model","description":"Extend the Prompt model and database schema to support favorites and pins.\n\n**Schema Changes:**\n```sql\nALTER TABLE prompts ADD COLUMN is_favorite INTEGER DEFAULT 0;\nALTER TABLE prompts ADD COLUMN favorite_order INTEGER;\nALTER TABLE prompts ADD COLUMN is_pinned INTEGER DEFAULT 0;\nALTER TABLE prompts ADD COLUMN pin_order INTEGER;\n```\n\n**Model Update:**\n```typescript\nexport const PromptSchema = Schema.Struct({\n  // ... existing fields\n  isFavorite: Schema.Boolean.pipe(Schema.optional),\n  favoriteOrder: Schema.Number.pipe(Schema.optional),\n  isPinned: Schema.Boolean.pipe(Schema.optional),\n  pinOrder: Schema.Number.pipe(Schema.optional)\n})\n```\n\n**Migration:**\n- Create migration v2 (or next version)\n- Add columns with defaults\n- No data migration needed\n\n**Frontmatter Update:**\nOptionally add to frontmatter:\n```yaml\nfavorite: true\npinned: true\n```","acceptance_criteria":"- Schema extended\n- Migration created\n- Model updated\n- Frontmatter sync works\n- Existing prompts unaffected","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:19.583441-08:00","updated_at":"2025-12-13T21:30:08.78802-08:00","closed_at":"2025-12-13T21:30:08.78802-08:00","labels":["area:schema","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-a4s","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.644117-08:00","created_by":"daemon"}],"comments":[{"id":51,"issue_id":"grimoire-a4s","author":"","text":"Assigned to Agent 13 - Working on src/models/prompt.ts and migration","created_at":"2025-12-14T05:16:24Z"}]}
{"id":"grimoire-a8k","title":"Add benchmark command model configuration","description":"Add model override and multi-model benchmark support.\n\n## Current State\n- Benchmark YAML has `model` field in suite definition\n- No CLI override\n- Single model per benchmark run\n\n## Enhancements\n- Add `--model` flag to override YAML config\n- Add `--models model1,model2` to run benchmark against multiple models\n- Generate comparative report across models\n- Add model column to results table\n\n## Example Usage\n```bash\n# Override model\ngrimoire benchmark tests.yaml --model claude-sonnet-4\n\n# Multi-model benchmark\ngrimoire benchmark tests.yaml --models gpt-4o,claude-sonnet-4\n```\n\n## Files to Modify\n- `src/commands/benchmark.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T10:41:50.242265-08:00","updated_at":"2025-12-15T10:41:50.242265-08:00","labels":["benchmark","cli","command"],"dependencies":[{"issue_id":"grimoire-a8k","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.835468-08:00","created_by":"daemon"},{"issue_id":"grimoire-a8k","depends_on_id":"grimoire-erb","type":"blocks","created_at":"2025-12-15T10:42:21.90139-08:00","created_by":"daemon"}]}
{"id":"grimoire-abt","title":"Add version retention policy","description":"Implement configurable version retention to manage storage.\n\n**Configuration:**\n```yaml\n# ~/.grimoire/config.yaml\nversioning:\n  maxVersionsPerPrompt: 50      # Keep last 50 versions\n  retentionDays: 90             # Or versions older than 90 days\n  strategy: count               # 'count', 'days', or 'both'\n  preserveTaggedVersions: true  # Never delete tagged versions\n```\n\n**RetentionService:**\n```typescript\ninterface RetentionService {\n  readonly cleanupVersions: (promptId: string) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly cleanupAll: () =\u003e Effect.Effect\u003cCleanupResult\u003e\n  readonly previewCleanup: () =\u003e Effect.Effect\u003cCleanupPreview\u003e\n  readonly tagVersion: (promptId: string, version: number, tag: string) =\u003e Effect.Effect\u003cvoid\u003e\n}\n```\n\n**Cleanup Logic:**\n1. Per-prompt cleanup based on policy\n2. Skip versions with tags\n3. Always keep version 1 and HEAD\n4. Run on schedule or manually\n\n**Commands:**\n- `grimoire config versioning` - Show/edit retention settings\n- `grimoire versions cleanup --preview` - Preview cleanup\n- `grimoire versions cleanup` - Run cleanup","acceptance_criteria":"- Config for retention policy\n- Cleanup respects policy\n- Tagged versions preserved\n- Preview before cleanup\n- Manual and auto cleanup","status":"closed","priority":3,"issue_type":"task","assignee":"agent-abt","created_at":"2025-12-09T04:08:26.47702-08:00","updated_at":"2025-12-13T21:58:05.711675-08:00","closed_at":"2025-12-13T21:58:05.711675-08:00","labels":["area:convex","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-abt","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.650566-08:00","created_by":"daemon"},{"issue_id":"grimoire-abt","depends_on_id":"grimoire-f2l","type":"blocks","created_at":"2025-12-13T19:29:01.568575-08:00","created_by":"daemon"}],"comments":[{"id":61,"issue_id":"grimoire-abt","author":"","text":"Assigned to agent-abt","created_at":"2025-12-14T05:34:33Z"},{"id":65,"issue_id":"grimoire-abt","author":"","text":"Agent a9469cb assigned - implementing retention policy","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-ae4","title":"Create AppProvider for application state","description":"Create application state context for managing screen navigation and global UI state.\n\n**State Structure:**\n```tsx\n// src/cli/context/app-context.tsx\ninterface AppState {\n  currentScreen: Screen\n  history: Screen[]\n  statusMessage: string | null\n  isDirty: boolean\n  notification: Notification | null\n}\n\ntype Screen =\n  | { name: 'list' }\n  | { name: 'view'; promptId: string }\n  | { name: 'edit'; promptId?: string }  // undefined = new prompt\n  | { name: 'search' }\n  | { name: 'settings' }\n  | { name: 'history'; promptId: string }\n\ninterface AppActions {\n  navigate: (screen: Screen) =\u003e void\n  goBack: () =\u003e void\n  setStatus: (message: string | null) =\u003e void\n  setDirty: (dirty: boolean) =\u003e void\n  showNotification: (notification: Notification) =\u003e void\n}\n```\n\n**Features:**\n- Screen navigation with history stack\n- Status bar message\n- Dirty state for unsaved changes\n- Toast notifications","acceptance_criteria":"- AppProvider context works\n- Navigation with history\n- Status messages display\n- Dirty state tracked\n- useAppState hook available","notes":"Assigned to agent - implementing AppProvider","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.047329-08:00","updated_at":"2025-12-13T21:32:34.615693-08:00","closed_at":"2025-12-13T21:32:34.615693-08:00","labels":["area:frontend","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-ae4","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:34.914895-08:00","created_by":"daemon"},{"issue_id":"grimoire-ae4","depends_on_id":"grimoire-cug","type":"blocks","created_at":"2025-12-13T19:29:48.093283-08:00","created_by":"daemon"}]}
{"id":"grimoire-ak7","title":"Implement Arena service for runs and results","description":"Create src/services/arena-service.ts:\n- createRun(promptId?, promptContent, config) - create new arena run\n- executeRun(runId) - execute parallel LLM calls to all providers\n- recordVote(runId, winnerId, loserId?, voteType) - record vote and update ELO\n- getRun(runId) - get run with results\n- listRuns(filters?) - list runs with pagination\n- getPromptHistory(promptId) - get arena history for a prompt\n\nDepends on: SqlService, LLMService, EloService, TokenCounterService","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T18:40:27.315601-08:00","updated_at":"2025-12-14T18:40:27.315601-08:00","labels":["arena","core","service"],"dependencies":[{"issue_id":"grimoire-ak7","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.725134-08:00","created_by":"daemon"},{"issue_id":"grimoire-ak7","depends_on_id":"grimoire-3z7","type":"blocks","created_at":"2025-12-14T18:41:02.384825-08:00","created_by":"daemon"},{"issue_id":"grimoire-ak7","depends_on_id":"grimoire-lxp","type":"blocks","created_at":"2025-12-14T18:41:02.470516-08:00","created_by":"daemon"},{"issue_id":"grimoire-ak7","depends_on_id":"grimoire-uhq","type":"blocks","created_at":"2025-12-14T18:41:02.576533-08:00","created_by":"daemon"}]}
{"id":"grimoire-amg","title":"Fix type-only exports in services/index.ts for ESM compatibility","description":"The services/index.ts file exports interfaces (type-only) alongside values, which breaks Bun's strict ESM mode.\n\n**Error:**\n```\nSyntaxError: export 'ClipboardService' not found in './clipboard-service'\n```\n\n**Root Cause:**\nAll `*Service` interfaces are exported as values instead of types:\n```typescript\n// Wrong - interfaces don't exist at runtime\nexport { ClipboardService, Clipboard, ClipboardLive } from \"./clipboard-service\";\n\n// Correct - separate type and value exports\nexport type { ClipboardService } from \"./clipboard-service\";\nexport { Clipboard, ClipboardLive } from \"./clipboard-service\";\n```\n\n**Affected Lines:** 16, 19, 23, 27, 31, 34, 37, 40, 44, 48, 51, 62, 65, 76, 80, 84, 94, 103, 107, 118, 132, 136, 140, 144, 154, 166, 169","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:33:14.305988-08:00","updated_at":"2025-12-13T22:46:53.008806-08:00","closed_at":"2025-12-13T22:46:53.008806-08:00","labels":["feature:grimoire-cli","phase:1","type:bugfix"],"comments":[{"id":72,"issue_id":"grimoire-amg","author":"","text":"Fixed multiple issues:\n\n1. **ESM type exports** - `ClipboardService` interface needed `export type` (only one, others are Context.Tag classes)\n\n2. **Layer composition** - MainLive wasn't properly providing SqlService to dependent services. Rewrote layer composition with proper dependency chains.\n\n3. **YAML serialization** - `storage-service.ts` was passing `undefined` values to frontmatter which YAML can't serialize. Fixed with conditional spreading.\n\n**Verified working:**\n- `grimoire --version` ✓\n- `grimoire --help` ✓\n- `grimoire list` ✓\n- `grimoire add \u003cname\u003e --content \u003ctext\u003e` ✓\n- `grimoire show \u003cname\u003e` ✓\n- `grimoire copy \u003cname\u003e` ✓\n- `grimoire stats` ✓\n\n**Known issue:** `search` command has FTS5 schema mismatch (separate issue)","created_at":"2025-12-14T06:46:46Z"}]}
{"id":"grimoire-auo","title":"Fix test file TypeScript errors (30+ errors)","description":"Fix TypeScript errors in test files:\n- tests/services/token-counter-service.test.ts (10 errors)\n- tests/services/branch-service.test.ts (9 errors)\n- tests/openai-provider.test.ts (8 errors)\n- tests/commands/history.test.ts (7 errors)\n- tests/services/providers/ollama-provider.test.ts (2 errors)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.68592-08:00","updated_at":"2025-12-13T22:11:02.356842-08:00","closed_at":"2025-12-13T22:11:02.356842-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-auo","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.44169-08:00","created_by":"daemon"}]}
{"id":"grimoire-av5","title":"Skills Feature - Agent Context Package Manager","description":"Add a \"skills\" feature to grimoire that functions as a package manager for agent context. Skills are managed prompts/plugins that can be installed, enabled per-project, and shared across the community.\n\n**Target**: `grimoire skills \u003ccmd\u003e` command namespace\n\n**Key Commands**:\n- `skills init` - Initialize skills in current project\n- `skills add \u003csource\u003e` - Add a skill to local cache from GitHub\n- `skills enable \u003cname\u003e` - Enable skill(s) in current project\n- `skills disable \u003cname\u003e` - Disable skill(s)\n- `skills list` - List available and enabled skills\n- `skills search \u003cquery\u003e` - Search for skills\n- `skills info \u003cname\u003e` - Show skill details\n- `skills sync` - Update enabled skills\n- `skills doctor` - Diagnose issues\n\n**Architecture**:\n- SourceManager: Fetch skills from GitHub, manage cache\n- SkillEngine: Parse skill.yaml, orchestrate enable/disable\n- AgentAdapters: Agent-specific logic (Claude Code, OpenCode)\n- StateManager: Track enabled skills per project\n\n**Storage**:\n- Global: `~/.skills/` (config.yaml, state.json, cache/)\n- Project: `.claude/skills/`, `CLAUDE.md` (managed section)\n\nReference: `skills-cli-design.md` for full specification","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T16:33:12.214035-08:00","updated_at":"2025-12-15T11:14:51.395151-08:00","closed_at":"2025-12-15T11:14:51.395151-08:00","labels":["major-feature","skills"]}
{"id":"grimoire-azb","title":"Create search command with result highlighting","description":"Implement the `grimoire search` command for finding prompts.\n\n**CLI Interface:**\n```\ngrimoire search \u003cquery\u003e\n  --tags, -t        Filter by tags\n  --from            Date from (YYYY-MM-DD)\n  --to              Date to (YYYY-MM-DD)\n  --limit           Max results (default: 20)\n  --fuzzy           Enable fuzzy matching\n  -i                Interactive mode\n```\n\n**Output Format:**\n```\nFound 5 results for \"typescript coding\"\n\n[1] coding-assistant (coding, typescript)\n    ...with expertise in \u003cmark\u003eTypeScript\u003c/mark\u003e and \u003cmark\u003ecoding\u003c/mark\u003e best practices...\n\n[2] ts-reviewer (typescript, review)\n    ...review \u003cmark\u003eTypeScript\u003c/mark\u003e \u003cmark\u003ecode\u003c/mark\u003e for potential issues...\n```\n\n**Interactive Mode:**\n- Live search as you type (debounced)\n- Results update in real-time\n- Arrow keys to navigate results\n- Enter to view selected result\n- Tag filter chips\n\nUse FTS5 for search, display snippets with ANSI color highlighting.","acceptance_criteria":"- Search returns relevant results\n- Highlights shown in snippets\n- Tag filtering works\n- Date range filtering works\n- Interactive live search works","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:07:15.242721-08:00","updated_at":"2025-12-13T21:29:31.169617-08:00","closed_at":"2025-12-13T21:29:31.169617-08:00","labels":["area:frontend","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-azb","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:08.685464-08:00","created_by":"daemon"},{"issue_id":"grimoire-azb","depends_on_id":"grimoire-yte","type":"blocks","created_at":"2025-12-13T19:28:22.814347-08:00","created_by":"daemon"}]}
{"id":"grimoire-b2l","title":"Create database migration system","description":"Implement a migration system for SQLite schema versioning.\n\n**Schema Tables:**\n```sql\nCREATE TABLE schema_versions (\n  version INTEGER PRIMARY KEY,\n  description TEXT NOT NULL,\n  applied_at TEXT DEFAULT (datetime('now'))\n);\n```\n\n**MigrationService Interface:**\n```typescript\ninterface Migration {\n  version: number\n  description: string\n  up: string[]  // SQL statements\n}\n\nclass MigrationService extends Context.Tag(\"MigrationService\")\u003c\n  MigrationService,\n  {\n    readonly getCurrentVersion: () =\u003e Effect.Effect\u003cnumber\u003e\n    readonly migrate: () =\u003e Effect.Effect\u003cnumber[]\u003e  // Returns applied versions\n    readonly getPending: () =\u003e Effect.Effect\u003cMigration[]\u003e\n  }\n\u003e() {}\n```\n\n**Initial Migration (v1):**\n- prompts table\n- tags table  \n- prompt_tags junction table\n- prompt_versions table","acceptance_criteria":"- Migration system tracks applied versions\n- Migrations run in order\n- Skips already-applied migrations\n- Initial schema created correctly","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:04.0731-08:00","updated_at":"2025-12-13T20:48:11.394356-08:00","closed_at":"2025-12-13T20:48:11.394356-08:00","labels":["area:schema","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-b2l","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.367479-08:00","created_by":"daemon"},{"issue_id":"grimoire-b2l","depends_on_id":"grimoire-eap","type":"blocks","created_at":"2025-12-13T19:22:51.036895-08:00","created_by":"daemon"}],"comments":[{"id":22,"issue_id":"grimoire-b2l","author":"","text":"Assigned to Agent-11","created_at":"2025-12-14T04:44:09Z"},{"id":24,"issue_id":"grimoire-b2l","author":"","text":"Agent-11 completed:\n- Created MigrationService with getCurrentVersion, migrate, getPending\n- schema_versions table for tracking\n- Initial migration v1 creates prompts, tags, prompt_tags, prompt_versions\n- Transactional migration execution\n- Integrated into MainLive with SqlService dependency","created_at":"2025-12-14T04:48:11Z"}]}
{"id":"grimoire-b6m","title":"Build interactive components for testing features","description":"Create Ink components for Phase 7 interactive modes.\n\n**Components:**\n\n1. **StreamingOutput** - Display streaming LLM response\n   - Show text as it arrives\n   - Typing effect\n   - Scroll for long responses\n   - Progress indicator\n\n2. **TestInteractive** - Interactive test UI\n   - Prompt preview\n   - Variable inputs\n   - Model selector\n   - Send button\n   - Result display\n\n3. **CompareView** - Side-by-side comparison\n   - Two or more columns\n   - Synchronized scrolling\n   - Winner voting buttons\n   - Stats footer\n\n4. **BenchmarkProgress** - Test suite progress\n   - Test list with status icons\n   - Progress bar\n   - Current test details\n   - Running time\n\n5. **CostCalculator** - Interactive cost UI\n   - Model selector\n   - Token count display\n   - Output token slider\n   - Batch count input\n   - Live cost update","acceptance_criteria":"- StreamingOutput works smoothly\n- TestInteractive flow complete\n- CompareView displays properly\n- BenchmarkProgress updates live\n- CostCalculator interactive","notes":"Assigned to agent - implementing interactive components for testing features","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:40.661683-08:00","updated_at":"2025-12-13T21:57:02.573983-08:00","closed_at":"2025-12-13T21:57:02.573983-08:00","labels":["area:ui","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-b6m","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:48.566428-08:00","created_by":"daemon"},{"issue_id":"grimoire-b6m","depends_on_id":"grimoire-yuo","type":"blocks","created_at":"2025-12-13T19:31:01.350609-08:00","created_by":"daemon"}]}
{"id":"grimoire-bwz","title":"Add model listing command per provider","description":"Add a command to list available models for each configured provider.\n\n## Implementation\n- Add `grimoire config llm models [provider]` subcommand\n- Call `provider.listModels()` which already exists in LLMProvider interface\n- Display models in a formatted table with provider name\n- If no provider specified, list models for all configured providers\n- Show which model is currently the default\n\n## Files to Modify\n- `src/commands/config.ts` - Add `models` subcommand\n- May need to enhance provider `listModels()` implementations","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T10:41:48.882313-08:00","updated_at":"2025-12-15T10:41:48.882313-08:00","labels":["cli","foundation","provider"],"dependencies":[{"issue_id":"grimoire-bwz","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:06.968017-08:00","created_by":"daemon"}]}
{"id":"grimoire-cdl","title":"Create Effect service pattern templates","description":"Create template/example services demonstrating the Effect service pattern used throughout Grimoire.\n\n**Pattern:**\n```typescript\n// 1. Service interface\ninterface StorageService {\n  readonly getAll: Effect.Effect\u003cPrompt[], StorageError\u003e\n  readonly save: (prompt: Prompt) =\u003e Effect.Effect\u003cvoid, StorageError\u003e\n}\n\n// 2. Service Tag\nclass Storage extends Context.Tag(\"Storage\")\u003cStorage, StorageService\u003e() {}\n\n// 3. Layer implementation\nconst StorageLive = Layer.effect(\n  Storage,\n  Effect.gen(function* () {\n    return {\n      getAll: Effect.gen(function* () { /* impl */ }),\n      save: (prompt) =\u003e Effect.gen(function* () { /* impl */ })\n    }\n  })\n)\n```\n\nCreate example in src/services/index.ts showing:\n- Tag definition\n- Layer creation\n- Layer composition with Layer.merge/Layer.provide","acceptance_criteria":"- Example service demonstrates full pattern\n- MainLive layer composes all services\n- Pattern documented with comments","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.576995-08:00","updated_at":"2025-12-13T20:29:38.730509-08:00","closed_at":"2025-12-13T20:29:38.730509-08:00","labels":["area:convex","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-cdl","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.9441-08:00","created_by":"daemon"},{"issue_id":"grimoire-cdl","depends_on_id":"grimoire-3ih","type":"blocks","created_at":"2025-12-13T19:22:05.970095-08:00","created_by":"daemon"}],"comments":[{"id":12,"issue_id":"grimoire-cdl","author":"","text":"Assigned to Agent-6","created_at":"2025-12-14T04:24:40Z"},{"id":13,"issue_id":"grimoire-cdl","author":"","text":"Agent-6 completed. Created comprehensive Effect service patterns:\n- StorageService and ClipboardService interfaces\n- Storage and Clipboard tags with Context.Tag\n- StorageLive and ClipboardLive layer implementations\n- MainLive composed layer\n- Usage examples and advanced patterns\n- Thorough documentation with key takeaways","created_at":"2025-12-14T04:29:38Z"}]}
{"id":"grimoire-cdlw","title":"Migrate AI functionality to TanStack AI with model hotswapping","description":"Migrate all LLM functionality from native fetch implementations to TanStack AI adapters. Add Gemini as 4th provider. Enable runtime model hotswapping via TUI settings and keyboard shortcut.\n\nKey outcomes:\n- All providers use TanStack AI under the hood (wrapped in Effect)\n- Gemini support added\n- Users can switch models via settings screen or `m` shortcut\n- Config persists default provider/model","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-14T19:04:01.380906-08:00","updated_at":"2025-12-14T19:43:16.163521-08:00","closed_at":"2025-12-14T19:43:16.163521-08:00","labels":["ai","feature","refactor"]}
{"id":"grimoire-cef","title":"Add global keyboard navigation and shortcuts","description":"Implement global keyboard navigation for the TUI.\n\n**Global Shortcuts (always available):**\n| Key | Action |\n|-----|--------|\n| q | Quit (with unsaved changes warning) |\n| / | Go to search screen |\n| Esc | Back/Cancel |\n| ? | Show help overlay |\n\n**Navigation Shortcuts:**\n| Key | Action |\n|-----|--------|\n| j/↓ | Move down |\n| k/↑ | Move up |\n| Enter | Select/Confirm |\n| Tab | Next field |\n| Shift+Tab | Previous field |\n\n**Screen-specific Shortcuts:**\n- Document in each screen's ActionBar\n- Override global shortcuts when appropriate (e.g., / in search input)\n\n**Implementation:**\n```tsx\nconst AppShell: React.FC = () =\u003e {\n  const { exit } = useApp()\n  const { navigate, state } = useAppState()\n  \n  useInput((input, key) =\u003e {\n    // Global shortcuts\n    if (input === 'q' \u0026\u0026 !state.isDirty) exit()\n    if (input === '/' \u0026\u0026 state.currentScreen.name !== 'search') {\n      navigate({ name: 'search' })\n    }\n    if (key.escape) navigate.goBack()\n  }, { isActive: !modalOpen })\n}\n```","acceptance_criteria":"- Global shortcuts work\n- Navigation shortcuts work\n- Screen shortcuts override when needed\n- Help overlay accessible\n- Quit warns on unsaved changes","notes":"Assigned to agent - implementing global keyboard navigation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:34.385462-08:00","updated_at":"2025-12-13T21:57:02.502967-08:00","closed_at":"2025-12-13T21:57:02.502967-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-cef","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:35.000417-08:00","created_by":"daemon"},{"issue_id":"grimoire-cef","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:30:00.181733-08:00","created_by":"daemon"}]}
{"id":"grimoire-cfu9","title":"Register Gemini provider in service layer","description":"Update src/services/index.ts:\n\n- Import GeminiProvider from providers\n- Instantiate GeminiProvider in LLMLive layer\n- Register with llmService.registerProvider()","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.340154-08:00","updated_at":"2025-12-14T19:28:58.55363-08:00","closed_at":"2025-12-14T19:28:58.55363-08:00","labels":["ai","gemini"],"dependencies":[{"issue_id":"grimoire-cfu9","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.070483-08:00","created_by":"daemon"},{"issue_id":"grimoire-cfu9","depends_on_id":"grimoire-5b2n","type":"blocks","created_at":"2025-12-14T19:05:28.041287-08:00","created_by":"daemon"},{"issue_id":"grimoire-cfu9","depends_on_id":"grimoire-uvwz","type":"blocks","created_at":"2025-12-14T19:05:28.121378-08:00","created_by":"daemon"}]}
{"id":"grimoire-cpo","title":"Create add command for new prompts","description":"Implement the `grimoire add` command for creating new prompts.\n\n**CLI Interface:**\n```\ngrimoire add [name]\n  --content, -c     Prompt content directly\n  --tags, -t        Comma-separated tags\n  --template, -T    Template ID to base on\n  -i                Interactive mode (full form)\n```\n\n**Behavior:**\n1. If `--content` provided: use directly\n2. If name only: open $EDITOR for content\n3. If `-i` or no args: launch interactive PromptForm component\n4. If `--template`: load template, substitute variables, open editor\n\n**Interactive Mode (Ink):**\n- Name input field\n- Tag editor (add/remove chips)\n- Multi-line content editor\n- Save/Cancel buttons\n\nGenerate UUID, set created/updated timestamps, version=1.","acceptance_criteria":"- Direct content creation works\n- Editor opens for content entry\n- Interactive form launches with -i\n- Template substitution works\n- Prompt saved to file and database","status":"closed","priority":1,"issue_type":"task","assignee":"agent-5","created_at":"2025-12-09T04:05:33.024974-08:00","updated_at":"2025-12-13T21:07:14.23624-08:00","closed_at":"2025-12-13T21:07:14.23624-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-cpo","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:30.183683-08:00","created_by":"daemon"},{"issue_id":"grimoire-cpo","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:23:51.953238-08:00","created_by":"daemon"},{"issue_id":"grimoire-cpo","depends_on_id":"grimoire-3nx","type":"blocks","created_at":"2025-12-13T19:23:52.028163-08:00","created_by":"daemon"}]}
{"id":"grimoire-cub","title":"Create tag command for tag management","description":"Implement the `grimoire tag` command for managing tags.\n\n**CLI Interface:**\n```\ngrimoire tag add \u003cprompt\u003e \u003ctag\u003e\ngrimoire tag remove \u003cprompt\u003e \u003ctag\u003e\ngrimoire tag list\ngrimoire tag rename \u003cold\u003e \u003cnew\u003e\ngrimoire tag -i                    # Interactive tag manager\n```\n\n**Subcommands:**\n\n1. **add**: Add tag to prompt\n   - Fuzzy match prompt by name/ID\n   - Create tag if doesn't exist\n   - Update frontmatter and DB\n\n2. **remove**: Remove tag from prompt\n   - Don't delete orphaned tags (might be useful)\n\n3. **list**: Show all tags with counts\n   ```\n   TAG              COUNT\n   coding           15\n   typescript       8\n   writing          5\n   ```\n\n4. **rename**: Rename tag globally\n   - Updates all prompts with that tag\n   - Show affected count\n\n**Interactive Mode:**\n- List all tags with checkboxes\n- Filter/search tags\n- Bulk operations","acceptance_criteria":"- All subcommands work\n- Tags created/removed correctly\n- List shows counts\n- Rename updates all prompts\n- Interactive mode functional","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:07:15.113637-08:00","updated_at":"2025-12-13T21:29:31.210099-08:00","closed_at":"2025-12-13T21:29:31.210099-08:00","labels":["area:frontend","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-cub","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:08.761748-08:00","created_by":"daemon"},{"issue_id":"grimoire-cub","depends_on_id":"grimoire-tvy","type":"blocks","created_at":"2025-12-13T19:28:22.730456-08:00","created_by":"daemon"}]}
{"id":"grimoire-cug","title":"Set up RuntimeProvider for Effect integration with React","description":"Create Effect runtime provider to integrate Effect services with React/Ink components.\n\n**Implementation:**\n```tsx\n// src/cli/context/runtime-context.tsx\nimport { ManagedRuntime, Layer } from \"effect\"\nimport { createContext, useContext, useMemo, ReactNode } from \"react\"\nimport { MainLayer } from \"@/services\"\n\ntype RuntimeType = ManagedRuntime.ManagedRuntime\u003cMainServices, never\u003e\n\nconst RuntimeContext = createContext\u003cRuntimeType | null\u003e(null)\n\nexport const RuntimeProvider: React.FC\u003c{ children: ReactNode }\u003e = ({ children }) =\u003e {\n  const runtime = useMemo(() =\u003e ManagedRuntime.make(MainLayer), [])\n  \n  return (\n    \u003cRuntimeContext.Provider value={runtime}\u003e\n      {children}\n    \u003c/RuntimeContext.Provider\u003e\n  )\n}\n\nexport const useRuntime = () =\u003e {\n  const runtime = useContext(RuntimeContext)\n  if (!runtime) throw new Error(\"RuntimeProvider not found\")\n  return runtime\n}\n```\n\n**Cleanup:**\nHandle runtime disposal when app unmounts (use Effect.addFinalizer).","acceptance_criteria":"- RuntimeProvider wraps app\n- useRuntime hook available\n- Runtime properly initialized\n- Cleanup on unmount\n- All services accessible","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:32.910849-08:00","updated_at":"2025-12-13T21:30:08.733373-08:00","closed_at":"2025-12-13T21:30:08.733373-08:00","labels":["area:frontend","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-cug","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:35.098677-08:00","created_by":"daemon"}],"comments":[{"id":46,"issue_id":"grimoire-cug","author":"","text":"Assigned to Agent 8 - Working on src/cli/context/runtime-context.tsx","created_at":"2025-12-14T05:16:24Z"}]}
{"id":"grimoire-cwc","title":"[Phase 4] Skills Commands - Extended","description":"Implement P1/P2 commands for skills feature polish.\n\n**Commands**:\n- `skills info \u003cname\u003e` - Show skill details (README, manifest)\n- `skills search \u003cquery\u003e` - Search GitHub for skills\n- `skills sync` - Update enabled skills\n- `skills doctor` - Diagnose and fix issues\n\n**Blocked by**: Phase 2 (Core Commands)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:33:43.682214-08:00","updated_at":"2025-12-15T11:14:31.753483-08:00","closed_at":"2025-12-15T11:14:31.753483-08:00","labels":["commands","polish","skills"],"dependencies":[{"issue_id":"grimoire-cwc","depends_on_id":"grimoire-av5","type":"parent-child","created_at":"2025-12-14T16:33:55.811353-08:00","created_by":"daemon"},{"issue_id":"grimoire-cwc","depends_on_id":"grimoire-8wm","type":"blocks","created_at":"2025-12-14T16:33:56.010612-08:00","created_by":"daemon"}]}
{"id":"grimoire-d7q","title":"Create list command with filtering and pagination","description":"Implement the `grimoire list` command to display prompts in a table.\n\n**CLI Interface:**\n```\ngrimoire list\n  --tags, -t        Filter by tags (comma-separated)\n  --search, -s      Search query (uses FTS5)\n  --sort            Sort by: name, date, usage (default: date)\n  --limit, -n       Number of results (default: 20)\n  --offset          Pagination offset\n  -i                Interactive mode with selection\n```\n\n**Output Format (non-interactive):**\n```\nNAME                 TAGS                UPDATED\ncoding-assistant     coding, ts          2 hours ago\ncreative-writer      writing             3 days ago\n```\n\n**Interactive Mode:**\n- Table with row selection (j/k navigation)\n- Quick actions: Enter=view, e=edit, c=copy, d=delete\n- Tag filter chips at top\n- Pagination controls\n\nUse Ink's `\u003cBox\u003e` and `\u003cText\u003e` for table layout.","acceptance_criteria":"- Lists prompts in table format\n- Filtering by tags works\n- Search uses FTS5\n- Sorting works for all fields\n- Pagination with --limit/--offset\n- Interactive mode selectable","status":"closed","priority":1,"issue_type":"task","assignee":"agent-6","created_at":"2025-12-09T04:05:33.154886-08:00","updated_at":"2025-12-13T21:07:14.264345-08:00","closed_at":"2025-12-13T21:07:14.264345-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-d7q","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:30.27524-08:00","created_by":"daemon"},{"issue_id":"grimoire-d7q","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:23:52.105421-08:00","created_by":"daemon"}]}
{"id":"grimoire-dab","title":"Build SettingsScreen for configuration","description":"Create the settings screen for configuring Grimoire options.\n\n**Settings Categories:**\n1. **API Keys**\n   - OpenAI API key\n   - Anthropic API key\n   - Show masked/clear toggle\n\n2. **Defaults**\n   - Default model for testing\n   - Default editor command\n   - Default export format\n\n3. **Storage**\n   - Storage path display\n   - Database size\n   - Clear cache option\n\n4. **Versioning**\n   - Retention policy settings\n   - Max versions\n   - Days to keep\n\n**Layout:**\n```\nSettings\n\n▸ API Keys\n  OpenAI: ••••••••••abc123\n  Anthropic: Not set\n\n▸ Defaults  \n  Model: gpt-4o\n  Editor: $EDITOR (vim)\n  \n▸ Storage\n  Path: ~/.grimoire\n  Prompts: 42\n  Database: 2.3 MB\n\n[Enter:Edit] [Esc:Back]\n```\n\nUse expandable sections with Tab to switch.","acceptance_criteria":"- All settings categories shown\n- API keys editable\n- Defaults changeable\n- Storage info displayed\n- Settings persisted","notes":"Assigned to agent - implementing SettingsScreen for configuration","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:10:33.910108-08:00","updated_at":"2025-12-13T21:57:02.478884-08:00","closed_at":"2025-12-13T21:57:02.478884-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-dab","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:48.01254-08:00","created_by":"daemon"},{"issue_id":"grimoire-dab","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:30:00.098562-08:00","created_by":"daemon"}]}
{"id":"grimoire-db1","title":"Create skills command router and help","description":"Set up the main skills command entry point with subcommand routing.\n\n**File**: `src/commands/skills.ts`\n\n**Implementation**:\n```typescript\nexport const skillsCommand = (args: ParsedArgs) =\u003e\n  Effect.gen(function* () {\n    const subcommand = args.positional[0];\n\n    if (!subcommand || args.flags[\"help\"] || args.flags[\"h\"]) {\n      printSkillsHelp();\n      return;\n    }\n\n    switch (subcommand) {\n      case \"init\":\n        return yield* skillsInit(args);\n      case \"add\":\n        return yield* skillsAdd(args);\n      case \"enable\":\n        return yield* skillsEnable(args);\n      case \"disable\":\n        return yield* skillsDisable(args);\n      case \"list\":\n        return yield* skillsList(args);\n      case \"info\":\n        return yield* skillsInfo(args);\n      case \"search\":\n        return yield* skillsSearch(args);\n      case \"sync\":\n        return yield* skillsSync(args);\n      case \"doctor\":\n        return yield* skillsDoctor(args);\n      default:\n        console.log(`Unknown skills command: ${subcommand}`);\n        printSkillsHelp();\n        process.exit(1);\n    }\n  });\n\nfunction printSkillsHelp() {\n  console.log(`\ngrimoire skills - Package manager for agent context\n\nCOMMANDS:\n  init                    Initialize skills in current project\n  add \u003csource\u003e            Add a skill to local cache\n  enable \u003cname\u003e [names…]  Enable skill(s) in current project\n  disable \u003cname\u003e [names…] Disable skill(s) in current project\n  list                    List available and enabled skills\n  info \u003cname\u003e             Show details about a skill\n  search \u003cquery\u003e          Search for skills (GitHub)\n  sync                    Update enabled skills to latest\n  doctor                  Diagnose and fix common issues\n\nFLAGS:\n  -h, --help              Show this help\n  -v, --verbose           Verbose output\n  -q, --quiet             Minimal output\n\nEXAMPLES:\n  grimoire skills init\n  grimoire skills add github:steveyegge/beads\n  grimoire skills enable beads typescript-strict\n  grimoire skills list --enabled\n`);\n}\n```\n\n**Also update**:\n- `src/commands/index.ts` - Export skillsCommand\n- `src/index.ts` - Add case for \"skills\" command","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:34:43.202816-08:00","updated_at":"2025-12-15T10:50:16.348693-08:00","closed_at":"2025-12-15T10:50:16.348693-08:00","labels":["commands","infrastructure","skills"],"dependencies":[{"issue_id":"grimoire-db1","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:57.257339-08:00","created_by":"daemon"}]}
{"id":"grimoire-dfa","title":"Phase 8: Quality of Life Features","description":"Implement QoL and advanced features: stats, format, favorite, pin, chain, alias, and sync.\n\n**Commands:**\n1. `stats` - Usage analytics and token counts\n2. `format` - Lint and auto-fix prompts\n3. `favorite` - Mark prompts as favorites\n4. `pin` - Pin prompts to top of list\n5. `chain` - Multi-prompt workflows\n6. `alias` - Command shortcuts\n7. `sync` - Git-based remote backup\n\n**Services:**\n- StatsService - Usage tracking, token counting\n- FormatService - Linting rules, auto-fix\n- FavoriteService - Toggle, list, reorder\n- PinService - Pin/unpin, ordering\n- ChainService - Load, validate, execute chains\n- AliasService - Create, resolve aliases\n- RemoteSyncService - Git push/pull\n\n**Chains:**\nMulti-step prompt workflows with:\n- Variable passing between steps\n- Dependency ordering\n- Parallel execution where possible\n\n**Remote Sync:**\n- Git repository provider\n- Conflict detection and resolution\n- Auto-sync option","design":"Chain execution:\n- Topological sort by dependencies\n- Stream intermediate results\n- Capture outputs for next steps\n- Total cost/time tracking","acceptance_criteria":"- stats command\n- format command with linting\n- favorite/pin commands\n- chain command for workflows\n- alias command for shortcuts\n- sync command with git provider","status":"closed","priority":3,"issue_type":"epic","created_at":"2025-12-09T03:57:45.139235-08:00","updated_at":"2025-12-13T21:58:19.460843-08:00","closed_at":"2025-12-13T21:58:19.460843-08:00","dependencies":[{"issue_id":"grimoire-dfa","depends_on_id":"grimoire-vtz","type":"blocks","created_at":"2025-12-09T03:58:05.791321-08:00","created_by":"daemon"},{"issue_id":"grimoire-dfa","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.961763-08:00","created_by":"daemon"}],"comments":[{"id":71,"issue_id":"grimoire-dfa","author":"","text":"Phase 8 status update: 12/14 tasks complete. Remaining in_progress: grimoire-1fz (chain subcommands) and grimoire-8ic (QoL interactive components).","created_at":"2025-12-14T05:57:28Z"}]}
{"id":"grimoire-dfo","title":"Add CLI command to configure LLM providers","description":"Users need a CLI command to configure LLM providers (API keys, default models, endpoints). Currently there's no built-in way to set up providers without manually editing config files or environment variables.\n\nDesired:\n```bash\ngrimoire config llm list                    # Show configured providers\ngrimoire config llm add openai              # Interactive setup for OpenAI\ngrimoire config llm set-default gpt-4o      # Set default model\ngrimoire config llm test anthropic          # Test API key validity\ngrimoire config llm remove ollama           # Remove provider config\n```","design":"**Current State:**\n- `src/services/api-key-service.ts` exists but limited\n- `src/services/llm-service.ts` has provider registration\n- Providers in `src/services/providers/` (openai, anthropic, ollama)\n- No config persistence layer for LLM settings\n\n**Implementation Plan:**\n\n1. **Create Config Storage** (`src/services/config-service.ts`):\n```typescript\ninterface LLMConfig {\n  providers: {\n    [name: string]: {\n      apiKey?: string;  // Encrypted or use keychain\n      baseUrl?: string;\n      defaultModel?: string;\n      enabled: boolean;\n    };\n  };\n  defaultProvider: string;\n  defaultModel: string;\n}\n```\n\n2. **Config file location:** `~/.grimoire/config.json` or similar\n\n3. **Create `config` command** (`src/commands/config.ts`):\n```typescript\nexport const configCommand = (args: ParsedArgs) =\u003e\n  Effect.gen(function* () {\n    const subcommand = args.positional[0];  // \"llm\"\n    const action = args.positional[1];       // \"list\", \"add\", etc.\n    \n    switch (action) {\n      case \"list\":\n        return yield* listProviders();\n      case \"add\":\n        const provider = args.positional[2];\n        return yield* addProvider(provider);\n      case \"set-default\":\n        const model = args.positional[2];\n        return yield* setDefaultModel(model);\n      case \"test\":\n        const providerName = args.positional[2];\n        return yield* testProvider(providerName);\n      // ...\n    }\n  });\n```\n\n4. **Secure API key storage:**\n   - Use `keytar` for system keychain integration\n   - Or encrypted local storage with user password\n   - Environment variable override still supported\n\n5. **Interactive setup** for `add`:\n```\ngrimoire config llm add openai\nEnter OpenAI API key: sk-...\nValidating key... ✓\nDefault model for OpenAI (gpt-4o): \nConfiguration saved!\n```\n\n**Files to Create/Modify:**\n- Create `src/services/config-service.ts` - Config persistence\n- Create `src/commands/config.ts` - Config command\n- Modify `src/index.ts` - Register config command\n- Modify LLM service initialization to load config","acceptance_criteria":"- [ ] `grimoire config llm list` shows configured providers and their status\n- [ ] `grimoire config llm add \u003cprovider\u003e` interactively configures a provider\n- [ ] `grimoire config llm test \u003cprovider\u003e` validates API key\n- [ ] `grimoire config llm set-default \u003cmodel\u003e` sets default model\n- [ ] API keys are stored securely (not plaintext in config)\n- [ ] Configuration persists across sessions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:32:22.57564-08:00","updated_at":"2025-12-14T15:58:55.347155-08:00","closed_at":"2025-12-14T15:58:55.347155-08:00","dependencies":[{"issue_id":"grimoire-dfo","depends_on_id":"grimoire-wv8","type":"parent-child","created_at":"2025-12-14T12:32:32.93932-08:00","created_by":"daemon"}]}
{"id":"grimoire-djq","title":"Implement PromptStorageService with gray-matter","description":"Create src/services/prompt-storage-service.ts for reading/writing Markdown files with YAML frontmatter.\n\n**Dependencies:** Install `gray-matter` for frontmatter parsing.\n\n**Service Interface:**\n```typescript\nclass PromptStorageService extends Context.Tag(\"PromptStorageService\")\u003c\n  PromptStorageService,\n  {\n    readonly readPrompt: (path: string) =\u003e Effect.Effect\u003cParsedPrompt, FileError\u003e\n    readonly writePrompt: (path: string, frontmatter: Frontmatter, content: string) =\u003e Effect.Effect\u003cvoid, FileError\u003e\n    readonly listPrompts: () =\u003e Effect.Effect\u003cstring[], FileError\u003e\n    readonly computeHash: (content: string) =\u003e Effect.Effect\u003cstring\u003e\n  }\n\u003e() {}\n```\n\n**File Format:**\n```markdown\n---\nid: 550e8400-e29b-41d4-a716-446655440000\nname: Coding Assistant\ntags: [coding, typescript]\ncreated: 2024-01-01T00:00:00Z\nupdated: 2024-01-15T10:30:00Z\nversion: 3\n---\n\nPrompt content here...\n```\n\n**Storage Location:** `~/.grimoire/prompts/`","acceptance_criteria":"- gray-matter installed and configured\n- Frontmatter parsed correctly\n- Content separated from metadata\n- Files written with proper YAML frontmatter\n- Content hash computed with Bun's crypto","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:03.88747-08:00","updated_at":"2025-12-13T20:48:11.324852-08:00","closed_at":"2025-12-13T20:48:11.324852-08:00","labels":["area:convex","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-djq","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.523957-08:00","created_by":"daemon"},{"issue_id":"grimoire-djq","depends_on_id":"grimoire-gex","type":"blocks","created_at":"2025-12-13T19:22:51.108382-08:00","created_by":"daemon"}],"comments":[{"id":21,"issue_id":"grimoire-djq","author":"","text":"Assigned to Agent-10","created_at":"2025-12-14T04:44:09Z"},{"id":23,"issue_id":"grimoire-djq","author":"","text":"Agent-10 completed:\n- Installed gray-matter package\n- Created PromptStorageService with readPrompt, writePrompt, listPrompts, computeHash\n- Uses gray-matter for YAML frontmatter parsing\n- Storage at ~/.grimoire/prompts/\n- SHA256 hashing with Bun.CryptoHasher","created_at":"2025-12-14T04:48:11Z"}]}
{"id":"grimoire-dq6","title":"Implement SkillEngineService for enable/disable","description":"Core orchestration service for enabling and disabling skills.\n\n**File**: `src/services/skills/skill-engine-service.ts`\n\n**Interface**:\n```typescript\ninterface SkillEngineServiceImpl {\n  // Enable skill in project\n  readonly enable: (\n    projectPath: string,\n    skillName: string,\n    options?: EnableOptions\n  ) =\u003e Effect.Effect\u003cEnableResult, SkillError\u003e;\n  \n  // Disable skill in project\n  readonly disable: (\n    projectPath: string,\n    skillName: string,\n    options?: DisableOptions\n  ) =\u003e Effect.Effect\u003cvoid, SkillError\u003e;\n  \n  // Check if skill can be enabled\n  readonly canEnable: (\n    projectPath: string,\n    skillName: string\n  ) =\u003e Effect.Effect\u003cEnableCheck\u003e;\n  \n  // Rollback a failed enable\n  readonly rollback: (\n    projectPath: string,\n    skillName: string\n  ) =\u003e Effect.Effect\u003cvoid\u003e;\n}\n\ninterface EnableOptions {\n  yes?: boolean;        // Auto-confirm\n  noDeps?: boolean;     // Skip CLI deps\n  noInit?: boolean;     // Skip init commands\n}\n\ninterface EnableResult {\n  skillName: string;\n  cliInstalled?: string[];\n  pluginInstalled?: boolean;\n  mcpConfigured?: boolean;\n  injected?: boolean;\n  initRan?: boolean;\n}\n```\n\n**Enable Workflow**:\n1. Resolve skill from cache\n2. Check project is initialized\n3. Check skill not already enabled (idempotent)\n4. Install CLI dependencies (if any)\n5. Delegate to AgentAdapter for agent-specific setup\n6. Copy skill file to project\n7. Inject into agent MD\n8. Run init commands\n9. Update state\n\n**Disable Workflow**:\n1. Verify skill is enabled\n2. Remove skill file\n3. Remove injection from agent MD\n4. Update state\n5. Do NOT uninstall dependencies (by design)\n\n**Rollback**:\n- On any failure during enable, undo all changes","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:45.050034-08:00","updated_at":"2025-12-15T11:06:17.617272-08:00","closed_at":"2025-12-15T11:06:17.617272-08:00","labels":["commands","services","skills"],"dependencies":[{"issue_id":"grimoire-dq6","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:58.94462-08:00","created_by":"daemon"},{"issue_id":"grimoire-dq6","depends_on_id":"grimoire-i8v","type":"blocks","created_at":"2025-12-14T16:36:50.845679-08:00","created_by":"daemon"}],"comments":[{"id":81,"issue_id":"grimoire-dq6","author":"","text":"Assigned to Agent-1: SkillEngineService implementation","created_at":"2025-12-15T19:02:02Z"}]}
{"id":"grimoire-dt8","title":"Implement ClipboardService with platform detection","description":"Create src/services/clipboard-service.ts for cross-platform clipboard operations.\n\n**Service Interface:**\n```typescript\ninterface ClipboardService {\n  readonly copy: (text: string) =\u003e Effect.Effect\u003cvoid, ClipboardError\u003e\n  readonly paste: Effect.Effect\u003cstring, ClipboardError\u003e\n}\n```\n\n**Platform Detection:**\n- **macOS:** Use `pbcopy` / `pbpaste`\n- **Linux:** Use `xclip` or `xsel` (check availability)\n- **Windows:** Use `clip` / PowerShell for paste\n\n**Implementation:**\n```typescript\nconst getClipboardCommand = () =\u003e {\n  switch (process.platform) {\n    case 'darwin': return { copy: 'pbcopy', paste: 'pbpaste' }\n    case 'linux': return { copy: 'xclip -selection clipboard', paste: 'xclip -selection clipboard -o' }\n    case 'win32': return { copy: 'clip', paste: 'powershell -command \"Get-Clipboard\"' }\n  }\n}\n```\n\nUse Bun.spawn for executing clipboard commands.","acceptance_criteria":"- Works on macOS, Linux, Windows\n- Clear error if clipboard tool unavailable\n- Handles large text content\n- UTF-8 encoding preserved","status":"closed","priority":1,"issue_type":"task","assignee":"agent-3","created_at":"2025-12-09T04:05:32.773158-08:00","updated_at":"2025-12-13T21:02:24.604206-08:00","closed_at":"2025-12-13T21:02:24.604206-08:00","labels":["area:api","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-dt8","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:30.369005-08:00","created_by":"daemon"}],"comments":[{"id":33,"issue_id":"grimoire-dt8","author":"","text":"Assigned to agent-3. Starting implementation of ClipboardService.","created_at":"2025-12-14T04:57:25Z"},{"id":36,"issue_id":"grimoire-dt8","author":"","text":"Implementation complete by agent-3.\n\n**Created:** `src/services/clipboard-service.ts`\n\n**Features:**\n- Platform detection: macOS (pbcopy/pbpaste), Linux (xclip), Windows (clip/powershell)\n- copy(text) - writes to stdin of copy command\n- paste - reads stdout of paste command\n- Proper ClipboardError handling\n\nTypecheck passes. Ready for closure.","created_at":"2025-12-14T05:02:15Z"}]}
{"id":"grimoire-dzj","title":"Implement ClaudeCodeAdapter","description":"Agent adapter for Claude Code integration.\n\n**File**: `src/services/skills/claude-code-adapter.ts`\n\n**Detection**:\n```typescript\nreadonly detect = (projectPath: string) =\u003e\n  Effect.succeed(fs.existsSync(path.join(projectPath, \".claude\")));\n```\n\n**Initialization**:\n- Create `.claude/skills/` directory\n- Ensure `CLAUDE.md` exists (create if not)\n- Add managed section markers if missing\n\n**Plugin Installation** (Claude Code specific):\n```typescript\nreadonly installPlugin = (marketplace: string, name: string) =\u003e\n  Effect.gen(function* () {\n    // Add marketplace (ignore error if already added)\n    yield* runCommand(\"claude\", [\"plugin\", \"marketplace\", \"add\", marketplace]);\n    \n    // Install plugin\n    const result = yield* runCommand(\"claude\", [\"plugin\", \"install\", name]);\n    if (!result.success) {\n      return yield* Effect.fail(new PluginInstallError({ plugin: name, message: result.stderr }));\n    }\n  });\n```\n\n**MCP Configuration**:\n- Read `.claude/settings.json`\n- Add to `mcpServers` object\n- Write back atomically\n\n**Injection**:\n- Find `\u003c!-- skills:managed:start/end --\u003e` markers in `CLAUDE.md`\n- Wrap content with `\u003c!-- skill:{name}:start/end --\u003e`\n- Insert within managed section\n- Handle existing injection (replace)\n\n**Paths**:\n- Skills dir: `.claude/skills/`\n- Agent MD: `CLAUDE.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:36:36.530119-08:00","updated_at":"2025-12-15T11:10:01.577083-08:00","closed_at":"2025-12-15T11:10:01.577083-08:00","labels":["adapters","skills"],"dependencies":[{"issue_id":"grimoire-dzj","depends_on_id":"grimoire-8vb","type":"parent-child","created_at":"2025-12-14T16:36:50.288733-08:00","created_by":"daemon"},{"issue_id":"grimoire-dzj","depends_on_id":"grimoire-i8v","type":"blocks","created_at":"2025-12-14T16:36:50.531402-08:00","created_by":"daemon"},{"issue_id":"grimoire-dzj","depends_on_id":"grimoire-765","type":"blocks","created_at":"2025-12-14T16:36:50.684356-08:00","created_by":"daemon"}],"comments":[{"id":88,"issue_id":"grimoire-dzj","author":"","text":"Assigned to Agent-2: ClaudeCodeAdapter full implementation","created_at":"2025-12-15T19:03:20Z"},{"id":91,"issue_id":"grimoire-dzj","author":"","text":"Agent assigned: Implementing full ClaudeCodeAdapter functionality (init, plugin install, MCP config, injection)","created_at":"2025-12-15T19:05:44Z"}]}
{"id":"grimoire-e0g","title":"Add interactive Benchmark Dashboard screen","description":"Create an interactive dashboard to run and view benchmark test suites. Show test progress, pass/fail results, and historical comparisons.","design":"**Current State:**\n- `src/commands/benchmark.ts` - CLI benchmark command\n- Outputs table/json/junit formats\n- No interactive view\n\n**Implementation Plan:**\n\n1. **Create BenchmarkScreen** (`src/cli/screens/BenchmarkScreen.tsx`):\n   - Browse available benchmark files\n   - Configure and run benchmarks\n   - View results with pass/fail indicators\n   - Compare against previous runs\n\n2. **Benchmark Selection View:**\n```\n┌─ Benchmark Suites ──────────────────┐\n│ \u003e tests/coding.yaml      5 tests    │\n│   tests/analysis.yaml    3 tests    │\n│   tests/creative.yaml    8 tests    │\n├─────────────────────────────────────┤\n│ Model: [gpt-4o ▼]  Parallel: [3]    │\n│ [Enter]run  [v]iew tests  [Esc]back │\n└─────────────────────────────────────┘\n```\n\n3. **Running View with Progress:**\n```\nRunning: coding.yaml (gpt-4o)\n─────────────────────────────────────\n  ✓ test-1: code-completion    2.1s\n  ✓ test-2: bug-detection      3.4s\n  ▶ test-3: refactoring        [...]\n  ○ test-4: documentation      \n  ○ test-5: review             \n─────────────────────────────────────\nProgress: 2/5 passed | Cost: $0.0082\n```\n\n4. **Results Summary:**\n```\nBenchmark Complete: coding.yaml\n═════════════════════════════════════\nResults: 4/5 passed (80%)\n\n  ✓ test-1: code-completion     2.1s  $0.0021\n  ✓ test-2: bug-detection       3.4s  $0.0034\n  ✓ test-3: refactoring         4.2s  $0.0041\n  ✗ test-4: documentation       - missing \"docstring\"\n  ✓ test-5: review              2.8s  $0.0028\n\nTotal: 12.5s | $0.0124\n─────────────────────────────────────\n[s]ave results  [c]ompare  [r]erun  [Esc]back\n```\n\n**Files to Create:**\n- `src/cli/screens/BenchmarkScreen.tsx`\n- `src/cli/components/testing/benchmark-progress.tsx`\n- `src/cli/components/testing/test-result-row.tsx`","acceptance_criteria":"- [ ] Browse and select benchmark YAML files\n- [ ] Configure model and concurrency before run\n- [ ] Real-time progress with pass/fail indicators\n- [ ] Summary view with all test results\n- [ ] Per-test timing and cost breakdown\n- [ ] Option to save results for comparison\n- [ ] Failed tests show assertion error details","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.458474-08:00","updated_at":"2025-12-14T17:48:29.655994-08:00","closed_at":"2025-12-14T17:48:29.655994-08:00","dependencies":[{"issue_id":"grimoire-e0g","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:22.865642-08:00","created_by":"daemon"}]}
{"id":"grimoire-eap","title":"Implement SqlService with Bun's native SQLite","description":"Create src/services/sql-service.ts implementing SQLite access using Bun's native `bun:sqlite` module.\n\n**Service Interface:**\n```typescript\nclass SqlService extends Context.Tag(\"SqlService\")\u003cSqlService, {\n  readonly query: \u003cT\u003e(sql: string, params?: unknown[]) =\u003e Effect.Effect\u003cT[], SqlError\u003e\n  readonly run: (sql: string, params?: unknown[]) =\u003e Effect.Effect\u003cvoid, SqlError\u003e\n  readonly transaction: \u003cA, E\u003e(effect: Effect.Effect\u003cA, E\u003e) =\u003e Effect.Effect\u003cA, E | SqlError\u003e\n}\u003e() {}\n```\n\n**Implementation Details:**\n- Use Effect.acquireRelease for database lifecycle\n- Enable WAL mode: `PRAGMA journal_mode = WAL`\n- Enable foreign keys: `PRAGMA foreign_keys = ON`\n- Database path: `~/.grimoire/grimoire.db`\n- Create parent directories if needed\n- Proper error wrapping with SqlError","acceptance_criteria":"- SqlService implemented with all methods\n- Database created at ~/.grimoire/grimoire.db\n- WAL and foreign keys enabled\n- Transactions work correctly\n- Errors properly wrapped","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:03.785863-08:00","updated_at":"2025-12-13T20:43:54.033008-08:00","closed_at":"2025-12-13T20:43:54.033008-08:00","labels":["area:convex","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-eap","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.298434-08:00","created_by":"daemon"}],"comments":[{"id":17,"issue_id":"grimoire-eap","author":"","text":"Assigned to Agent-8","created_at":"2025-12-14T04:39:48Z"},{"id":19,"issue_id":"grimoire-eap","author":"","text":"Agent-8 completed SqlService:\n- src/services/sql-service.ts with query, run, transaction methods\n- Database at ~/.grimoire/grimoire.db\n- WAL mode and foreign keys enabled\n- Exported and integrated into MainLive\nTests pass, typecheck passes.","created_at":"2025-12-14T04:43:53Z"}]}
{"id":"grimoire-ehj","title":"Add skills tests and documentation","description":"Add test coverage and documentation for skills feature.\n\n**Tests to create**:\n```\ntests/skills/\n├── skill-cache-service.test.ts\n├── skill-state-service.test.ts\n├── skill-engine-service.test.ts\n├── agent-adapter.test.ts\n├── claude-code-adapter.test.ts\n├── injection-utils.test.ts\n├── commands/\n│   ├── init.test.ts\n│   ├── add.test.ts\n│   ├── enable.test.ts\n│   ├── disable.test.ts\n│   └── list.test.ts\n└── integration/\n    └── full-workflow.test.ts\n```\n\n**Test scenarios**:\n- Init with different agents\n- Add from GitHub (mock API)\n- Enable/disable with all skill types\n- Injection marker handling\n- Error cases and rollback\n- Idempotent operations\n\n**Documentation updates**:\n- Update CLAUDE.md with skills commands\n- Add skills section to help output\n- Create example skill manifest","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:37:26.067971-08:00","updated_at":"2025-12-15T11:14:45.397885-08:00","closed_at":"2025-12-15T11:14:45.397885-08:00","labels":["documentation","skills","testing"],"dependencies":[{"issue_id":"grimoire-ehj","depends_on_id":"grimoire-cwc","type":"parent-child","created_at":"2025-12-14T16:37:34.634956-08:00","created_by":"daemon"}],"comments":[{"id":102,"issue_id":"grimoire-ehj","author":"","text":"Assigned to Agent-7: Adding tests and documentation for skills feature","created_at":"2025-12-15T19:07:43Z"}]}
{"id":"grimoire-eno","title":"Implement ChainService for prompt workflows","description":"Create src/services/chain-service.ts for multi-prompt workflows.\n\n**Service Interface:**\n```typescript\ninterface ChainService {\n  readonly loadChain: (name: string) =\u003e Effect.Effect\u003cChainDefinition, ChainNotFoundError\u003e\n  readonly saveChain: (chain: ChainDefinition) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly listChains: () =\u003e Effect.Effect\u003cstring[]\u003e\n  readonly validateChain: (chain: ChainDefinition) =\u003e Effect.Effect\u003cValidationResult\u003e\n  readonly executeChain: (name: string, variables: Record\u003cstring, unknown\u003e) =\u003e Effect.Effect\u003cChainResult\u003e\n}\n\ninterface ChainDefinition {\n  name: string\n  description?: string\n  variables: Record\u003cstring, VariableSpec\u003e\n  steps: ChainStep[]\n}\n\ninterface ChainStep {\n  id: string\n  prompt: string  // Prompt name\n  variables: Record\u003cstring, string\u003e  // Can reference {{previous_output}}\n  output: string  // Variable name for this step's output\n  dependsOn?: string[]  // Step IDs\n  model?: string\n}\n```\n\n**Chain Storage:**\n- Store in `~/.grimoire/chains/` as YAML files\n- Validate references to prompts\n- Check for circular dependencies\n\n**Execution:**\n- Run steps in dependency order\n- Pass outputs between steps\n- Stream intermediate results","acceptance_criteria":"- Load/save chains works\n- Validation checks prompts exist\n- Execution runs in order\n- Variables passed between steps\n- Results captured","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:19.935408-08:00","updated_at":"2025-12-13T21:29:22.404555-08:00","closed_at":"2025-12-13T21:29:22.404555-08:00","labels":["area:convex","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-eno","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:38.748027-08:00","created_by":"daemon"}]}
{"id":"grimoire-erb","title":"Add persistent default model configuration","description":"Allow users to configure a default model per provider or a global default model.\n\n## Implementation\n- Add config keys: `DEFAULT_MODEL`, `ANTHROPIC_DEFAULT_MODEL`, `OPENAI_DEFAULT_MODEL`, etc.\n- Store in `~/.grimoire/.env` alongside API keys\n- Add `grimoire config llm default [provider] [model]` command\n- LLMService should check for default model before using hardcoded defaults\n- Add `grimoire config llm default --show` to display current defaults\n\n## Files to Modify\n- `src/commands/config.ts` - Add `default` subcommand\n- `src/services/llm-service.ts` - Read default from config\n- `src/services/api-key-service.ts` - May need to generalize for config values","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T10:41:49.044326-08:00","updated_at":"2025-12-15T10:41:49.044326-08:00","labels":["config","foundation","provider"],"dependencies":[{"issue_id":"grimoire-erb","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.024737-08:00","created_by":"daemon"}]}
{"id":"grimoire-f2g","title":"Create templates subcommands","description":"Implement the `grimoire templates` command group for template management.\n\n**CLI Interface:**\n```\ngrimoire templates list\ngrimoire templates show \u003cid\u003e\ngrimoire templates create [name]\ngrimoire templates apply \u003cid\u003e [--output name]\n```\n\n**Template Features:**\n- Templates stored in ~/.grimoire/templates/\n- Same format as prompts but with `isTemplate: true`\n- Variables marked with `{{variable:default_value}}`\n- Apply creates new prompt from template\n\n**Commands:**\n1. **list**: Show all templates (like `list` but filtered)\n2. **show**: Display template with variable placeholders highlighted\n3. **create**: Create new template (opens editor)\n4. **apply**: \n   - Load template\n   - Prompt for variable values (or use defaults)\n   - Create new prompt with interpolated content\n\n**Example Template:**\n```markdown\n---\nid: ...\nname: System Prompt Template\nisTemplate: true\n---\n\n\u003csystem\u003e\nYou are a {{role:helpful assistant}} specializing in {{domain}}.\n\u003c/system\u003e\n```","acceptance_criteria":"- templates list shows templates only\n- templates show displays with variable highlights\n- templates create works\n- templates apply creates from template\n- Default values work","status":"closed","priority":2,"issue_type":"task","assignee":"agent-11","created_at":"2025-12-09T04:05:33.848992-08:00","updated_at":"2025-12-13T21:11:05.839139-08:00","closed_at":"2025-12-13T21:11:05.839139-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-f2g","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:37.191347-08:00","created_by":"daemon"},{"issue_id":"grimoire-f2g","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:24:02.058383-08:00","created_by":"daemon"}]}
{"id":"grimoire-f2l","title":"Implement VersionService for version tracking","description":"Create src/services/version-service.ts for tracking prompt versions.\n\n**Service Interface:**\n```typescript\ninterface VersionService {\n  readonly createVersion: (params: CreateVersionParams) =\u003e Effect.Effect\u003cPromptVersion\u003e\n  readonly getVersion: (promptId: string, version: number, branch?: string) =\u003e Effect.Effect\u003cPromptVersion, VersionNotFoundError\u003e\n  readonly listVersions: (promptId: string, options?: ListVersionsOptions) =\u003e Effect.Effect\u003cPromptVersion[]\u003e\n  readonly getHead: (promptId: string, branch?: string) =\u003e Effect.Effect\u003cPromptVersion\u003e\n  readonly rollback: (promptId: string, targetVersion: number, options?: RollbackOptions) =\u003e Effect.Effect\u003cPromptVersion\u003e\n  readonly diff: (promptId: string, fromVersion: number, toVersion: number) =\u003e Effect.Effect\u003cDiffResult\u003e\n}\n\ninterface CreateVersionParams {\n  promptId: string\n  content: string\n  frontmatter: Frontmatter\n  changeReason?: string\n  branch?: string\n}\n```\n\n**Version Storage (prompt_versions table):**\n- Store full content snapshot per version\n- Track version number, timestamp, author\n- Optional change_reason field\n- Parent version reference for branching\n\n**Auto-versioning:**\nAutomatically create new version when prompt is updated through edit command.","acceptance_criteria":"- Versions created on prompt updates\n- Can retrieve specific version\n- Version history listed\n- Head version retrievable\n- Change reasons stored","status":"closed","priority":1,"issue_type":"task","assignee":"agent-18","created_at":"2025-12-09T04:08:25.634719-08:00","updated_at":"2025-12-13T21:17:49.184762-08:00","closed_at":"2025-12-13T21:17:49.184762-08:00","labels":["area:convex","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-f2l","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.129374-08:00","created_by":"daemon"}],"comments":[{"id":44,"issue_id":"grimoire-f2l","author":"","text":"Assigned to Agent 6 - Working on src/services/version-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":54,"issue_id":"grimoire-f2l","author":"","text":"Implementation complete. VersionService created at src/services/version-service.ts with: createVersion, getVersion, listVersions, getHead, rollback, diff methods. Supports branching.","created_at":"2025-12-14T05:17:49Z"}]}
{"id":"grimoire-fal","title":"Create copy command with variable interpolation","description":"Implement the `grimoire copy` command to copy prompt content to clipboard.\n\n**CLI Interface:**\n```\ngrimoire copy \u003cname-or-id\u003e\n  --vars, -v        Variables as key=value pairs\n  --stdout          Output to stdout instead of clipboard\n  --raw, -r         No variable interpolation\n  -i                Interactive variable filling\n```\n\n**Variable Interpolation:**\nSupport `{{variable}}` placeholders in prompts:\n```\nYou are helping with {{project_name}}.\nThe language is {{language}}.\n```\n\nUsage: `grimoire copy my-prompt -v project_name=grimoire -v language=TypeScript`\n\n**Interactive Mode:**\nIf prompt has variables and `-i` flag:\n1. Detect all `{{...}}` placeholders\n2. Show form with input for each variable\n3. Preview interpolated result\n4. Copy on confirm\n\n**Output:**\n- Default: copy to clipboard, show \"Copied to clipboard\"\n- `--stdout`: print to stdout (for piping)","acceptance_criteria":"- Copies content to clipboard\n- Variable interpolation works\n- Interactive variable form works\n- --stdout outputs to terminal\n- --raw skips interpolation","status":"closed","priority":1,"issue_type":"task","assignee":"agent-8","created_at":"2025-12-09T04:05:33.426169-08:00","updated_at":"2025-12-13T21:07:14.317491-08:00","closed_at":"2025-12-13T21:07:14.317491-08:00","labels":["area:frontend","feature:grimoire-cli","phase:3","type:implementation"],"dependencies":[{"issue_id":"grimoire-fal","depends_on_id":"grimoire-vtz","type":"parent-child","created_at":"2025-12-13T19:23:37.06182-08:00","created_by":"daemon"},{"issue_id":"grimoire-fal","depends_on_id":"grimoire-0dp","type":"blocks","created_at":"2025-12-13T19:23:52.359824-08:00","created_by":"daemon"},{"issue_id":"grimoire-fal","depends_on_id":"grimoire-dt8","type":"blocks","created_at":"2025-12-13T19:23:52.453206-08:00","created_by":"daemon"}]}
{"id":"grimoire-fdi","title":"Implement `skills doctor` command","description":"Diagnose and fix common issues.\n\n**File**: `src/commands/skills/doctor.ts`\n\n**Checks**:\n1. Project initialized correctly\n2. Agent MD file has valid managed section\n3. All enabled skills have source files in skills dir\n4. No orphaned skill files\n5. CLI dependencies available\n6. State file consistency\n7. Cache integrity\n\n**Output**:\n```\ngrimoire skills doctor\n\nChecking project health...\n\n✓ Project initialized (.claude/ exists)\n✓ CLAUDE.md has valid managed section\n✓ All enabled skills have files\n⚠️  Orphaned skill file: .claude/skills/old-skill.md\n✓ CLI dependencies: bd, jq\n✗ State inconsistency: 'prisma' in state but not in skills dir\n\nIssues found: 2\n\nRun 'grimoire skills doctor --fix' to auto-fix\n```\n\n**Flags**:\n- `--fix` - Attempt to auto-fix issues\n\n**Auto-fix actions**:\n- Remove orphaned skill files\n- Sync state with actual files\n- Recreate missing managed section\n- Clear corrupted cache entries","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:37:25.963949-08:00","updated_at":"2025-12-15T11:14:20.13071-08:00","closed_at":"2025-12-15T11:14:20.13071-08:00","labels":["commands","polish","skills"],"dependencies":[{"issue_id":"grimoire-fdi","depends_on_id":"grimoire-cwc","type":"parent-child","created_at":"2025-12-14T16:37:34.588048-08:00","created_by":"daemon"}],"comments":[{"id":97,"issue_id":"grimoire-fdi","author":"","text":"Assigned to Agent-6: Implementing skills doctor command","created_at":"2025-12-15T19:06:57Z"},{"id":101,"issue_id":"grimoire-fdi","author":"","text":"Assigned to Agent a5e15bc - implementing skills doctor command with health checks and auto-fix","created_at":"2025-12-15T19:07:32Z"},{"id":106,"issue_id":"grimoire-fdi","author":"","text":"Assigning to Agent 4 - starting implementation","created_at":"2025-12-15T19:07:51Z"},{"id":110,"issue_id":"grimoire-fdi","author":"","text":"Agent assigned: Implementing skills doctor command","created_at":"2025-12-15T19:11:13Z"}]}
{"id":"grimoire-fja","title":"Create TUI prompt runner with model selection","description":"Add a TUI screen for running prompts with integrated model picker.\n\n## Implementation\n- Create new TUI view/screen for prompt execution\n- Integrate model selector component\n- Features:\n  - Browse and select prompts from library\n  - Select model before execution\n  - Variable input form\n  - Streaming output display\n  - Token count and cost display\n  - Option to re-run with different model\n\n## User Flow\n1. Select prompt from list\n2. Pick model (with selector component)\n3. Fill in variables (if any)\n4. Execute and view streaming output\n5. Option to copy output or re-run\n\n## Files to Create\n- `src/cli/views/prompt-runner.tsx`\n- Integrate into main TUI navigation","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-15T10:41:50.420526-08:00","updated_at":"2025-12-15T10:41:50.420526-08:00","labels":["feature","tui","ux"],"dependencies":[{"issue_id":"grimoire-fja","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.971354-08:00","created_by":"daemon"},{"issue_id":"grimoire-fja","depends_on_id":"grimoire-iol","type":"blocks","created_at":"2025-12-15T10:42:22.022355-08:00","created_by":"daemon"}]}
{"id":"grimoire-fvw","title":"Fix services/index.ts barrel exports (37 errors)","description":"Fix 37 TypeScript errors in src/services/index.ts - primarily module export issues and type mismatches in barrel exports.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.586382-08:00","updated_at":"2025-12-13T22:11:02.260471-08:00","closed_at":"2025-12-13T22:11:02.260471-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-fvw","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.368444-08:00","created_by":"daemon"}]}
{"id":"grimoire-g71","title":"Grimoire v1.0","description":"Master epic for the Grimoire CLI - a prompt management tool with storage, editing, and clipboard support.\n\n**Vision:**\nBuild a full-featured CLI for managing prompts with:\n- Markdown file storage with SQLite metadata\n- Full-text search via FTS5\n- Version control and branching\n- Interactive TUI mode\n- LLM testing integration\n- Git-based remote sync\n\n**Phases:**\n1. Project Setup \u0026 Foundation\n2. Database Architecture  \n3. Core Commands (add, list, edit, copy, rm, show, templates)\n4. Organization \u0026 Search (tags, search, export/import, archive)\n5. Version Control (history, rollback, branching)\n6. Interactive TUI\n7. Testing \u0026 Evaluation (LLM integration)\n8. Quality of Life Features","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-13T19:20:58.939035-08:00","updated_at":"2025-12-13T21:58:29.104447-08:00","closed_at":"2025-12-13T21:58:29.104447-08:00","labels":["milestone:v1.0"]}
{"id":"grimoire-gda","title":"Fix CLI component TypeScript errors","description":"Fix TypeScript errors in CLI components:\n- src/cli/context/runtime-context.tsx (4 errors)\n- src/cli/screens/EditScreen.tsx (3 errors)\n- src/cli/components/layout/index.ts (1 error)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.709809-08:00","updated_at":"2025-12-13T22:11:02.383762-08:00","closed_at":"2025-12-13T22:11:02.383762-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-gda","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.457605-08:00","created_by":"daemon"}]}
{"id":"grimoire-gex","title":"Define frontmatter schema with Effect Schema","description":"Create src/models/prompt.ts with Effect Schema definitions for prompt frontmatter and domain types.\n\n**Schemas:**\n```typescript\nimport { Schema } from \"effect\"\n\nexport const FrontmatterSchema = Schema.Struct({\n  id: Schema.UUID,\n  name: Schema.String.pipe(Schema.minLength(1)),\n  tags: Schema.Array(Schema.String).pipe(Schema.optional),\n  created: Schema.DateFromString,\n  updated: Schema.DateFromString,\n  version: Schema.Number.pipe(Schema.int(), Schema.positive()),\n  isTemplate: Schema.Boolean.pipe(Schema.optional)\n})\n\nexport const PromptSchema = Schema.Struct({\n  ...FrontmatterSchema.fields,\n  content: Schema.String,\n  filePath: Schema.String\n})\n\nexport type Frontmatter = Schema.Schema.Type\u003ctypeof FrontmatterSchema\u003e\nexport type Prompt = Schema.Schema.Type\u003ctypeof PromptSchema\u003e\n```\n\nUse Schema.decodeUnknown for runtime validation of parsed frontmatter.","acceptance_criteria":"- FrontmatterSchema validates YAML frontmatter\n- PromptSchema represents full prompt entity\n- Types exported for use throughout codebase\n- Validation errors provide clear messages","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:04:03.979291-08:00","updated_at":"2025-12-13T20:43:54.106392-08:00","closed_at":"2025-12-13T20:43:54.106392-08:00","labels":["area:schema","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-gex","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.444229-08:00","created_by":"daemon"}],"comments":[{"id":18,"issue_id":"grimoire-gex","author":"","text":"Assigned to Agent-9","created_at":"2025-12-14T04:39:48Z"},{"id":20,"issue_id":"grimoire-gex","author":"","text":"Agent-9 completed:\n- FrontmatterSchema and PromptSchema with @effect/schema\n- Types: Frontmatter, Prompt, PromptId exported\n- Added tests/prompt.test.ts with 10 test cases\nAll tests pass.","created_at":"2025-12-14T04:43:53Z"}]}
{"id":"grimoire-gokn","title":"Install TanStack AI packages","description":"Add TanStack AI dependencies to package.json:\n- @tanstack/ai\n- @tanstack/ai-openai\n- @tanstack/ai-anthropic\n- @tanstack/ai-ollama\n- @tanstack/ai-gemini","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.003936-08:00","updated_at":"2025-12-14T19:25:24.846524-08:00","closed_at":"2025-12-14T19:25:24.846524-08:00","labels":["ai","setup"],"dependencies":[{"issue_id":"grimoire-gokn","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:09.880898-08:00","created_by":"daemon"}]}
{"id":"grimoire-gys","title":"Add file watching with Bun for live sync","description":"Implement file watching to automatically sync changes when prompt files are modified externally.\n\n**Implementation:**\nUse Bun's file watching capabilities to monitor ~/.grimoire/prompts/ directory.\n\n```typescript\nimport { watch } from \"fs\"\n\n// Watch for file changes\nconst watcher = watch(promptsDir, { recursive: true }, (event, filename) =\u003e {\n  if (filename?.endsWith('.md')) {\n    // Trigger sync for changed file\n  }\n})\n```\n\n**Features:**\n- Watch prompts directory recursively\n- Debounce rapid changes (100-200ms)\n- Sync on add, change, and unlink events\n- Handle watcher errors gracefully\n- Clean up watcher on process exit\n\n**Integration:**\n- Start watcher when running in interactive mode\n- Optional --watch flag for long-running processes","acceptance_criteria":"- File watcher monitors prompts directory\n- Changes trigger automatic sync\n- Debouncing prevents excessive syncs\n- Watcher cleans up on exit","status":"closed","priority":2,"issue_type":"task","assignee":"agent-1","created_at":"2025-12-09T04:04:04.41746-08:00","updated_at":"2025-12-13T20:56:41.979103-08:00","closed_at":"2025-12-13T20:56:41.979103-08:00","labels":["area:convex","feature:grimoire-cli","phase:2","type:implementation"],"dependencies":[{"issue_id":"grimoire-gys","depends_on_id":"grimoire-vii","type":"parent-child","created_at":"2025-12-13T19:22:35.773703-08:00","created_by":"daemon"},{"issue_id":"grimoire-gys","depends_on_id":"grimoire-8yk","type":"blocks","created_at":"2025-12-13T19:22:51.427019-08:00","created_by":"daemon"}],"comments":[{"id":29,"issue_id":"grimoire-gys","author":"","text":"Assigned to agent-1. Starting implementation of file watcher service.","created_at":"2025-12-14T04:54:05Z"},{"id":30,"issue_id":"grimoire-gys","author":"","text":"Implementation complete by agent-1.\n\n**Created:** `src/services/file-watcher-service.ts`\n**Updated:** `src/services/index.ts` (barrel export)\n\n**Features implemented:**\n- Node.js `fs.watch` with recursive monitoring of ~/.grimoire/prompts/\n- 150ms debouncing using Effect Ref with Map\u003cstring, NodeJS.Timeout\u003e\n- Event handling: change → syncFile(), rename → syncFile(), unlink → fullSync()\n- Proper cleanup with stop() method\n- Error handling with typed StorageError\n- Full Effect pattern compliance (Context.Tag, Layer, Effect.gen, Ref)\n\nTypecheck passes. Ready for closure.","created_at":"2025-12-14T04:56:41Z"}]}
{"id":"grimoire-h0d","title":"Add cost tracking: save costs after test runs and display in prompt view","description":"Cost should be saved after test runs or manually entered when creating/editing prompts. The cost information should appear when displaying a prompt.\n\nFeatures needed:\n1. Save test run costs to prompt history/metadata\n2. Allow manual cost entry on prompts\n3. Display accumulated cost in prompt view and lists\n4. Cost summary in stats dashboard","design":"**Current State:**\n- `test` and `benchmark` commands calculate costs but don't persist\n- `cost` command estimates but doesn't track actual usage\n- No cost field in Prompt schema\n\n**Implementation Plan:**\n\n1. **Extend Prompt Schema** (src/models/prompt.ts):\n```typescript\nexport const PromptSchema = Schema.Struct({\n  // ... existing fields\n  estimatedCost: Schema.optional(Schema.Number),  // Manual estimate\n  totalCost: Schema.optional(Schema.Number),       // Accumulated from runs\n  runCount: Schema.optional(Schema.Number),        // Number of test runs\n});\n```\n\n2. **Create Cost Tracking Service** (`src/services/cost-tracking-service.ts`):\n```typescript\ninterface CostRecord {\n  promptId: string;\n  model: string;\n  inputTokens: number;\n  outputTokens: number;\n  cost: number;\n  timestamp: Date;\n}\n\ninterface CostTrackingService {\n  recordCost: (record: CostRecord) =\u003e Effect.Effect\u003cvoid\u003e;\n  getPromptCosts: (promptId: string) =\u003e Effect.Effect\u003cCostRecord[]\u003e;\n  getTotalCost: (promptId: string) =\u003e Effect.Effect\u003cnumber\u003e;\n}\n```\n\n3. **Update test command** to save costs after successful run:\n```typescript\n// After test completion\nyield* costTracking.recordCost({\n  promptId: prompt.id,\n  model,\n  inputTokens: response.usage.inputTokens,\n  outputTokens: response.usage.outputTokens,\n  cost,\n  timestamp: new Date()\n});\n```\n\n4. **Update show command** to display cost:\n```\n╭──────────────────────────────────────────────╮\n│ my-prompt                                    │\n├──────────────────────────────────────────────┤\n│ ID: abc12345...                              │\n│ Tags: coding, assistant                      │\n│ Created: 2024-12-01                          │\n│ Updated: 2h ago                              │\n│ Version: 3                                   │\n│ Cost: $0.0342 (15 runs)                      │  ← NEW\n├──────────────────────────────────────────────┤\n```\n\n5. **Add manual cost entry** to create/edit:\n```bash\ngrimoire add my-prompt --estimated-cost 0.005\ngrimoire edit my-prompt --estimated-cost 0.008\n```\n\n6. **Database table for cost history:**\n```sql\nCREATE TABLE prompt_costs (\n  id INTEGER PRIMARY KEY,\n  prompt_id TEXT NOT NULL,\n  model TEXT NOT NULL,\n  input_tokens INTEGER,\n  output_tokens INTEGER,\n  cost REAL NOT NULL,\n  created_at TEXT DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (prompt_id) REFERENCES prompts(id)\n);\n```\n\n**Files to Create/Modify:**\n- Create `src/services/cost-tracking-service.ts`\n- Modify `src/models/prompt.ts` - Add cost fields\n- Modify `src/commands/test.ts` - Record cost after run\n- Modify `src/commands/benchmark.ts` - Record costs\n- Modify `src/commands/show.ts` - Display cost\n- Modify `src/cli/screens/ViewerScreen.tsx` - Show cost in TUI\n- Add migration for cost history table","acceptance_criteria":"- [ ] Cost recorded automatically after each test/benchmark run\n- [ ] Total cost accumulated and displayed in prompt view\n- [ ] Run count tracked per prompt\n- [ ] Can manually set estimated cost on create/edit\n- [ ] Cost history queryable per prompt\n- [ ] Cost shown in list view for prompts with usage\n- [ ] Stats dashboard shows total costs across all prompts","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:43.22553-08:00","updated_at":"2025-12-14T12:34:43.22553-08:00"}
{"id":"grimoire-h7c","title":"Add model aliases and shortcuts","description":"Add shorthand aliases for common models to reduce typing.\n\n## Implementation\n- Create alias mapping in config or code\n- Examples:\n  - `claude` → `claude-sonnet-4`\n  - `gpt` → `gpt-4o`\n  - `gemini` → `gemini-2.0-flash`\n  - `opus` → `claude-opus-4`\n  - `fast` → fastest configured model\n  - `cheap` → cheapest configured model\n- Allow user-defined aliases in config\n- Resolve aliases in LLMService before routing\n\n## Files to Modify\n- `src/services/llm-service.ts` - Add alias resolution\n- `src/services/api-key-service.ts` or new config service for user aliases","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T10:41:50.603015-08:00","updated_at":"2025-12-15T10:41:50.603015-08:00","labels":["config","enhancement","ux"],"dependencies":[{"issue_id":"grimoire-h7c","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:08.108606-08:00","created_by":"daemon"}]}
{"id":"grimoire-he6","title":"Build EditorScreen with multi-line input","description":"Create the in-terminal editor screen for creating/editing prompts.\n\n**Features:**\n- Name input field (Tab to move)\n- Multi-line content editor with cursor\n- Tag editor (comma-separated or chips)\n- Save (Ctrl+S) / Cancel (Esc)\n- Unsaved changes warning on exit\n- Line numbers in editor\n- Basic editing: insert, delete, backspace, newlines\n\n**Multi-line Editor Component:**\n```tsx\nconst MultiLineEditor: React.FC\u003c{\n  value: string\n  onChange: (value: string) =\u003e void\n  height: number\n}\u003e = ({ value, onChange, height }) =\u003e {\n  const [cursorPos, setCursorPos] = useState({ line: 0, col: 0 })\n  // Handle input, arrow keys, newlines, etc.\n}\n```\n\n**Form Layout:**\n```\nName: [coding-assistant________________]\n\nContent:\n  1│ You are a helpful coding assistant...\n  2│ |  \u003c- cursor\n  3│\n  \nTags: [coding] [typescript] [+Add]\n\n[Ctrl+S:Save] [Esc:Cancel]\n```","acceptance_criteria":"- Name input editable\n- Multi-line editor works\n- Cursor navigation works\n- Save/Cancel functional\n- Unsaved warning on exit\n- Tags editable","notes":"Assigned to agent - implementing EditorScreen with multi-line input","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.615081-08:00","updated_at":"2025-12-13T21:57:02.431145-08:00","closed_at":"2025-12-13T21:57:02.431145-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-he6","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:35.196232-08:00","created_by":"daemon"},{"issue_id":"grimoire-he6","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:29:59.781993-08:00","created_by":"daemon"},{"issue_id":"grimoire-he6","depends_on_id":"grimoire-3ja","type":"blocks","created_at":"2025-12-13T19:29:59.854331-08:00","created_by":"daemon"}]}
{"id":"grimoire-hss","title":"Create TokenCounterService with tiktoken","description":"Create src/services/token-counter-service.ts for accurate token counting.\n\n**Dependencies:** Install `js-tiktoken` package.\n\n**Service Interface:**\n```typescript\ninterface TokenCounterService {\n  readonly count: (text: string, model: string) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly countMessages: (messages: Message[], model: string) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly estimateCost: (inputTokens: number, outputTokens: number, model: string) =\u003e Effect.Effect\u003cnumber\u003e\n}\n```\n\n**Implementation:**\n```typescript\nimport { encodingForModel } from 'js-tiktoken'\n\nconst countImpl = (text: string, model: string) =\u003e\n  Effect.sync(() =\u003e {\n    const encoding = encodingForModel(mapModelToTiktoken(model))\n    return encoding.encode(text).length\n  })\n```\n\n**Model Mapping:**\n- Map model names to tiktoken encoding names\n- gpt-4o -\u003e cl100k_base\n- claude-* -\u003e cl100k_base (approximation)\n\n**Pricing Data:**\n```typescript\nconst MODEL_PRICING: Record\u003cstring, { inputPer1M: number; outputPer1M: number }\u003e = {\n  'gpt-4o': { inputPer1M: 2.50, outputPer1M: 10.00 },\n  'gpt-4o-mini': { inputPer1M: 0.15, outputPer1M: 0.60 },\n  'claude-sonnet-4-20250514': { inputPer1M: 3.00, outputPer1M: 15.00 }\n}\n```","acceptance_criteria":"- tiktoken installed\n- Token counts accurate\n- Message counting includes overhead\n- Cost estimation works\n- All models mapped","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:39.760595-08:00","updated_at":"2025-12-13T21:26:25.502051-08:00","closed_at":"2025-12-13T21:26:25.502051-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-hss","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.557801-08:00","created_by":"daemon"}]}
{"id":"grimoire-hxz","title":"Implement Arena CLI command","description":"Create src/commands/arena.ts:\n\nUsage: grimoire arena [prompt-name] [options]\nOptions:\n  -p, --providers \u003clist\u003e   Comma-separated providers\n  -m, --models \u003clist\u003e      Comma-separated models\n  -t, --temperature \u003cn\u003e    Default: 0.7\n  --max-tokens \u003cn\u003e         Default: 1024\n  -i, --interactive        Launch TUI\n  --winner \u003cprovider\u003e      Skip voting prompt\n  --format \u003cformat\u003e        table, json\n  --history               Show arena history\n  --leaderboard           Show ELO rankings\n\nFeatures:\n- Side-by-side output display\n- Interactive winner voting\n- JSON export option","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T18:40:27.696422-08:00","updated_at":"2025-12-14T18:40:27.696422-08:00","labels":["arena","cli","command"],"dependencies":[{"issue_id":"grimoire-hxz","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.989216-08:00","created_by":"daemon"},{"issue_id":"grimoire-hxz","depends_on_id":"grimoire-5wo","type":"blocks","created_at":"2025-12-14T18:41:03.070333-08:00","created_by":"daemon"}]}
{"id":"grimoire-i2w","title":"Implement ExportService for JSON/YAML export","description":"Create src/services/export-service.ts for exporting prompts.\n\n**Service Interface:**\n```typescript\ninterface ExportService {\n  readonly exportAll: (options: ExportOptions) =\u003e Effect.Effect\u003cstring\u003e\n  readonly exportByTags: (tags: string[], options: ExportOptions) =\u003e Effect.Effect\u003cstring\u003e\n  readonly exportByIds: (ids: string[], options: ExportOptions) =\u003e Effect.Effect\u003cstring\u003e\n  readonly writeToFile: (content: string, path: string) =\u003e Effect.Effect\u003cvoid\u003e\n}\n\ninterface ExportOptions {\n  format: 'json' | 'yaml'\n  includeHistory?: boolean\n  prettyPrint?: boolean\n}\n```\n\n**Export Bundle Schema:**\n```typescript\nconst ExportBundleSchema = Schema.Struct({\n  version: Schema.Literal(\"1.0\"),\n  exportedAt: Schema.String,\n  source: Schema.String,  // e.g., \"grimoire@0.1.0\"\n  prompts: Schema.Array(ExportedPromptSchema)\n})\n```\n\n**Exported Prompt:**\n- Full frontmatter\n- Content\n- Optionally version history\n- Tags preserved","acceptance_criteria":"- JSON export works\n- YAML export works\n- Version history optional\n- Export bundle validates\n- Pretty printing works","status":"closed","priority":2,"issue_type":"task","assignee":"agent-15","created_at":"2025-12-09T04:07:15.372101-08:00","updated_at":"2025-12-13T21:18:17.111605-08:00","closed_at":"2025-12-13T21:18:17.111605-08:00","labels":["area:api","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-i2w","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:22.574563-08:00","created_by":"daemon"}],"comments":[{"id":41,"issue_id":"grimoire-i2w","author":"","text":"Assigned to Agent 3 - Working on src/services/export-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":58,"issue_id":"grimoire-i2w","author":"","text":"Implementation complete. ExportService created at src/services/export-service.ts with: exportAll, exportByTags, exportByIds, writeToFile methods. Includes schemas for ExportBundle format and JSON/YAML serialization.","created_at":"2025-12-14T05:18:17Z"}]}
{"id":"grimoire-i8v","title":"Define AgentAdapter interface and factory","description":"Define the agent adapter trait/interface for agent-specific operations.\n\n**File**: `src/services/skills/agent-adapter.ts`\n\n**Interface**:\n```typescript\ninterface AgentAdapter {\n  readonly name: AgentType;\n  \n  // Detection\n  readonly detect: (projectPath: string) =\u003e Effect.Effect\u003cboolean\u003e;\n  \n  // Initialization\n  readonly init: (projectPath: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  \n  // Skills directory\n  readonly getSkillsDir: (projectPath: string) =\u003e string;\n  readonly getAgentMdPath: (projectPath: string) =\u003e string;\n  \n  // Skill operations\n  readonly enableSkill: (\n    projectPath: string,\n    skill: CachedSkill\n  ) =\u003e Effect.Effect\u003cAgentEnableResult, AgentAdapterError\u003e;\n  \n  readonly disableSkill: (\n    projectPath: string,\n    skillName: string\n  ) =\u003e Effect.Effect\u003cvoid, AgentAdapterError\u003e;\n  \n  // Plugin operations (Claude Code specific)\n  readonly installPlugin?: (marketplace: string, name: string) =\u003e Effect.Effect\u003cvoid, PluginInstallError\u003e;\n  \n  // MCP operations\n  readonly configureMcp?: (\n    projectPath: string,\n    name: string,\n    config: McpConfig\n  ) =\u003e Effect.Effect\u003cvoid\u003e;\n  \n  // Injection\n  readonly injectContent: (\n    projectPath: string,\n    skillName: string,\n    content: string\n  ) =\u003e Effect.Effect\u003cvoid, InjectionError\u003e;\n  \n  readonly removeInjection: (\n    projectPath: string,\n    skillName: string\n  ) =\u003e Effect.Effect\u003cvoid\u003e;\n}\n\n// Factory function\nfunction getAgentAdapter(agent: AgentType): AgentAdapter;\n\n// Auto-detect agent for project\nfunction detectAgent(projectPath: string): Effect.Effect\u003cAgentType | null\u003e;\n```\n\n**Agent types**:\n- `claude_code` - Claude Code with `.claude/`, `CLAUDE.md`\n- `opencode` - OpenCode with `.opencode/`, `AGENTS.md`\n- `generic` - Fallback with just `AGENTS.md`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:36:36.405554-08:00","updated_at":"2025-12-15T11:10:01.665365-08:00","closed_at":"2025-12-15T11:10:01.665365-08:00","labels":["adapters","skills"],"dependencies":[{"issue_id":"grimoire-i8v","depends_on_id":"grimoire-8vb","type":"parent-child","created_at":"2025-12-14T16:36:50.239885-08:00","created_by":"daemon"}],"comments":[{"id":74,"issue_id":"grimoire-i8v","author":"","text":"Agent assigned: Completing detect() implementations for all adapters","created_at":"2025-12-15T19:01:08Z"},{"id":80,"issue_id":"grimoire-i8v","author":"","text":"Assigned to Agent-2: Completing AgentAdapter implementation (currently stub)","created_at":"2025-12-15T19:02:01Z"},{"id":82,"issue_id":"grimoire-i8v","author":"","text":"Assigned to Agent-2: Complete AgentAdapter implementation (convert stub to full)","created_at":"2025-12-15T19:02:02Z"},{"id":83,"issue_id":"grimoire-i8v","author":"","text":"Assigned to Agent a6cab38 - implementing full adapter functionality for ClaudeCodeAdapter, OpenCodeAdapter, GenericAdapter","created_at":"2025-12-15T19:02:03Z"},{"id":85,"issue_id":"grimoire-i8v","author":"","text":"Agent completed: detect() methods implemented for all 3 adapters (ClaudeCode, OpenCode, Generic). All 17 tests pass. Remaining work: enableSkill/disableSkill implementations are still stubs, but the core interface and factory functions are complete.","created_at":"2025-12-15T19:02:42Z"}]}
{"id":"grimoire-iol","title":"Create TUI model selector component","description":"Create a reusable Ink component for model selection in TUI interfaces.\n\n## Implementation\n- Create `src/cli/components/model-selector.tsx`\n- Props: `onSelect`, `defaultModel`, `providers` (optional filter)\n- Features:\n  - Grouped by provider with headers\n  - Search/filter capability\n  - Keyboard navigation (j/k or arrows)\n  - Show model metadata (context window, pricing tier if available)\n  - Visual indicator for currently selected/default model\n\n## Component API\n```typescript\ninterface ModelSelectorProps {\n  onSelect: (model: string, provider: string) =\u003e void;\n  defaultModel?: string;\n  providers?: string[];  // filter to specific providers\n  showMetadata?: boolean;\n}\n```\n\n## Files to Create/Modify\n- Create `src/cli/components/model-selector.tsx`\n- Create `src/cli/components/index.ts` if not exists","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-15T10:41:49.546263-08:00","updated_at":"2025-12-15T10:41:49.546263-08:00","labels":["component","foundation","tui"],"dependencies":[{"issue_id":"grimoire-iol","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.320074-08:00","created_by":"daemon"},{"issue_id":"grimoire-iol","depends_on_id":"grimoire-bwz","type":"blocks","created_at":"2025-12-15T10:42:21.555473-08:00","created_by":"daemon"}]}
{"id":"grimoire-jdke","title":"Enhance LLMConfigScreen with model selection","description":"Update src/cli/screens/LLMConfigScreen.tsx:\n\n- Add \"Current Model\" section at top showing active provider/model\n- Add model dropdown for each provider\n- Add \"Set as Default\" action to persist selection\n- Include Google/Gemini in provider list","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:43.050759-08:00","updated_at":"2025-12-14T19:32:10.205559-08:00","labels":["feature","tui"],"dependencies":[{"issue_id":"grimoire-jdke","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.551409-08:00","created_by":"daemon"},{"issue_id":"grimoire-jdke","depends_on_id":"grimoire-tc5a","type":"blocks","created_at":"2025-12-14T19:05:28.472484-08:00","created_by":"daemon"}]}
{"id":"grimoire-jee","title":"Register favorite and pin commands in CLI","description":"Commands `favorite` and `pin` exist in `src/commands/` but are not registered in `src/index.ts`.\n\n**Fix:** Add imports and case handlers in the CLI router.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-14T02:04:14.295914-08:00","updated_at":"2025-12-14T02:13:39.34526-08:00","closed_at":"2025-12-14T02:13:39.34526-08:00","labels":["feature:grimoire-cli","type:bugfix"]}
{"id":"grimoire-jja","title":"Fix database schema and auto-migration","description":"Multiple schema/migration issues fixed:\n\n1. **search-service.ts** was creating `prompts` table with wrong schema (camelCase columns) before migration ran\n2. **migration-service.ts** wasn't auto-running migrations on layer construction\n3. **Layer ordering** needed MigrationLayer provided before dependent services\n\n**Fixes:**\n- Removed duplicate table creation from search-service.ts\n- Added auto-migration logic to MigrationLive layer construction\n- Updated layer composition to provide MigrationLayer to dependent services","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T23:13:51.387206-08:00","updated_at":"2025-12-13T23:13:55.59673-08:00","closed_at":"2025-12-13T23:13:55.59673-08:00","labels":["feature:grimoire-cli","phase:2","type:bugfix"]}
{"id":"grimoire-jp6","title":"Initialize Bun project and install dependencies","description":"Initialize the Grimoire project with Bun and install all required dependencies.\n\n**Steps:**\n1. Run `bun init` to create project\n2. Install production deps: `effect@^3.12.0`, `ink@^5.1.0`, `react@^18.3.1`\n3. Install dev deps: `@types/bun@^1.1.14`, `@types/react@^18.3.12`, `typescript@^5.7.2`\n4. Configure package.json with scripts: dev, build, test, lint, format, typecheck\n5. Set up bin entry for `grimoire` command","acceptance_criteria":"- package.json created with all dependencies\n- `bun install` completes successfully\n- Scripts defined: dev, build, test, lint, format, typecheck\n- bin.grimoire points to dist/index.js","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.120867-08:00","updated_at":"2025-12-13T19:51:52.043204-08:00","closed_at":"2025-12-13T19:51:52.043204-08:00","labels":["area:infra","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-jp6","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:49.533747-08:00","created_by":"daemon"}],"comments":[{"id":1,"issue_id":"grimoire-jp6","author":"","text":"Assigned to Agent-1 for implementation","created_at":"2025-12-14T03:48:43Z"},{"id":2,"issue_id":"grimoire-jp6","author":"","text":"Agent-1 completed implementation. Verified:\n- package.json with all dependencies (effect, ink, react, typescript, etc.)\n- bun install completed successfully\n- Scripts: dev, build, test, lint, format, typecheck all defined\n- bin.grimoire -\u003e ./dist/index.js configured\n- TypeScript config and prettier config added\nAll acceptance criteria met.","created_at":"2025-12-14T03:51:36Z"}]}
{"id":"grimoire-jqf","title":"Model Swapping Feature - Easy model selection across CLI and TUI","description":"Enable easy model swapping under each provider throughout the Grimoire CLI and TUI. Users should be able to quickly select and change models wherever prompts can be run (test, chain, compare, benchmark commands and TUI interfaces).\n\n## Goals\n- List available models per provider\n- Persist default model preferences\n- Interactive model selection when not specified\n- TUI components for model picking\n- Model override capabilities across all commands\n\n## Current State\n- 4 providers supported: Anthropic, OpenAI, Gemini, Ollama\n- Model selected via `--model` flag with hardcoded defaults\n- No TUI for prompt execution yet\n- No interactive model selection\n- No persistent default model configuration","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-15T10:41:01.405866-08:00","updated_at":"2025-12-15T10:41:01.405866-08:00","labels":["enhancement","epic","ux"]}
{"id":"grimoire-kph","title":"Implement `skills enable` command","description":"Enable skill(s) in current project.\n\n**File**: `src/commands/skills/enable.ts`\n\n**Workflow**:\n1. Check project initialized (error if not)\n2. Resolve each skill name from cache\n3. For each skill, call SkillEngineService.enable()\n4. Report results\n\n**Flags**:\n- `-y, --yes` - Auto-confirm all prompts\n- `--no-deps` - Skip CLI dependency installation\n- `--no-init` - Skip init commands\n\n**Output**:\n```\n✓ Enabled beads\n  • Installed bd CLI via brew\n  • Installed Claude Code plugin\n  • Initialized .beads/ directory\n\n⚠️  Restart Claude Code to activate plugin\n```\n\n**Edge Cases**:\n- Skill already enabled → \"Already enabled\" (exit 0, idempotent)\n- CLI install fails → Show error, rollback, suggest manual install\n- Plugin install fails → Show error, rollback\n- Init command fails → Show stderr, rollback\n- Multiple skills specified → Enable in order, stop on first failure","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:45.189253-08:00","updated_at":"2025-12-15T11:10:01.611948-08:00","closed_at":"2025-12-15T11:10:01.611948-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-kph","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:58.994651-08:00","created_by":"daemon"},{"issue_id":"grimoire-kph","depends_on_id":"grimoire-dq6","type":"blocks","created_at":"2025-12-14T16:35:59.182567-08:00","created_by":"daemon"}],"comments":[{"id":86,"issue_id":"grimoire-kph","author":"","text":"Assigned to Agent-3: skills enable command implementation","created_at":"2025-12-15T19:03:20Z"},{"id":92,"issue_id":"grimoire-kph","author":"","text":"Agent assigned: Implementing skills enable command","created_at":"2025-12-15T19:05:44Z"}]}
{"id":"grimoire-kre","title":"Fix FTS5 search implementation","description":"The search command fails with FTS schema issues:\n\n1. FTS table uses `rowid` but queries tried `prompts_fts.id`\n2. `snippet()` function references column index 2, but FTS only has 2 columns (0, 1)\n3. FTS created with `content=''` (external content) but code expects content\n4. Delete trigger fails: \"cannot DELETE from contentless fts5 table\"\n\n**Files:** `src/services/search-service.ts`, `src/services/migration-service.ts`\n\n**Fix needed:** Redesign FTS5 to either:\n- Use content table properly (store content in FTS)\n- Or fix queries to work with contentless FTS","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T02:04:14.186379-08:00","updated_at":"2025-12-14T02:12:28.187921-08:00","closed_at":"2025-12-14T02:12:28.187921-08:00","labels":["feature:grimoire-cli","type:bugfix"]}
{"id":"grimoire-lle","title":"Add interactive LLM Configuration Dashboard","description":"Create an interactive dashboard for configuring LLM providers in the TUI. Complement to the CLI config command with visual provider management.","design":"**Depends on:** grimoire-dfo (CLI config command)\n\n**Implementation Plan:**\n\n1. **Create LLMConfigScreen** (`src/cli/screens/LLMConfigScreen.tsx`):\n   - List configured providers with status\n   - Add/edit provider settings\n   - Test API connections\n   - Set defaults\n\n2. **Provider List View:**\n```\n┌─ LLM Providers ─────────────────────┐\n│                                     │\n│ \u003e openai      ✓ Connected  [default]│\n│   anthropic   ✓ Connected           │\n│   ollama      ○ Not configured      │\n│   google      ✗ Invalid key         │\n│                                     │\n├─────────────────────────────────────┤\n│ Default Model: gpt-4o               │\n├─────────────────────────────────────┤\n│ [Enter]edit  [t]est  [d]efault  [a]dd │\n└─────────────────────────────────────┘\n```\n\n3. **Provider Edit Form:**\n```\n┌─ Configure: OpenAI ─────────────────┐\n│                                     │\n│ API Key: sk-...xxxx (hidden)  [c]hange │\n│ Base URL: (default)                 │\n│ Default Model: gpt-4o               │\n│ Enabled: [x]                        │\n│                                     │\n│ [Test Connection] [Save] [Cancel]   │\n└─────────────────────────────────────┘\n```\n\n**Files to Create:**\n- `src/cli/screens/LLMConfigScreen.tsx`\n- `src/cli/components/config/provider-list.tsx`\n- `src/cli/components/config/provider-form.tsx`","acceptance_criteria":"- [ ] List all providers with connection status\n- [ ] Visual indicator for default provider\n- [ ] Edit provider settings in TUI form\n- [ ] Test API key without leaving TUI\n- [ ] Set default model globally\n- [ ] Secure API key entry (masked input)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:10.810091-08:00","updated_at":"2025-12-14T17:48:29.6743-08:00","closed_at":"2025-12-14T17:48:29.6743-08:00","dependencies":[{"issue_id":"grimoire-lle","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:22.981569-08:00","created_by":"daemon"},{"issue_id":"grimoire-lle","depends_on_id":"grimoire-dfo","type":"blocks","created_at":"2025-12-14T12:34:23.289034-08:00","created_by":"daemon"}]}
{"id":"grimoire-lxp","title":"Add SQLite migration v9 for arena tables","description":"Add migration version 9 to src/services/migration-service.ts with tables:\n- arena_runs (id, prompt_id, prompt_content, prompt_name, status, config, created_at, completed_at)\n- arena_results (id, run_id, provider, model, response, tokens_in, tokens_out, duration_ms, cost, error)\n- arena_votes (id, run_id, winner_result_id, loser_result_id, vote_type)\n- provider_elo (id, provider, model, elo_score, total_matches, wins, losses, ties)\n- Add appropriate indexes for performance","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-14T18:40:26.940639-08:00","updated_at":"2025-12-14T18:40:26.940639-08:00","labels":["arena","data-layer","database"],"dependencies":[{"issue_id":"grimoire-lxp","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.518337-08:00","created_by":"daemon"}]}
{"id":"grimoire-m6og","title":"Refactor OpenAI provider to use TanStack AI","description":"Refactor src/services/providers/openai-provider.ts:\n\n- Import chat from @tanstack/ai and openai from @tanstack/ai-openai\n- Replace native fetch calls with TanStack AI chat() function\n- Keep Effect.Effect and Stream.Stream return types\n- Convert TanStack async iterables to Effect streams\n- Maintain existing error handling patterns","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.452106-08:00","updated_at":"2025-12-14T19:40:16.69208-08:00","closed_at":"2025-12-14T19:40:16.69208-08:00","labels":["ai","provider","refactor"],"dependencies":[{"issue_id":"grimoire-m6og","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.143342-08:00","created_by":"daemon"},{"issue_id":"grimoire-m6og","depends_on_id":"grimoire-gokn","type":"blocks","created_at":"2025-12-14T19:05:27.96657-08:00","created_by":"daemon"}]}
{"id":"grimoire-mbe","title":"Add Templates dashboard with variable application","description":"Create a dedicated templates dashboard that shows all templates with their variables, and allows interactive variable application to generate new prompts.","design":"**Current State:**\n- Templates marked with `isTemplate: true`\n- CLI `templates` command exists\n- No TUI template view\n\n**Implementation Plan:**\n\n1. **Create TemplatesScreen** (`src/cli/screens/TemplatesScreen.tsx`):\n   - List all templates\n   - Show variable previews\n   - Apply templates interactively\n\n2. **Template List View:**\n```\n┌─ Templates ─────────────────────────┐\n│                                     │\n│ \u003e email-response                    │\n│   Variables: {{recipient}}, {{tone}}│\n│                                     │\n│   code-review-request               │\n│   Variables: {{code}}, {{language}} │\n│                                     │\n│   standup-format                    │\n│   Variables: {{yesterday}}, {{today}}│\n├─────────────────────────────────────┤\n│ [Enter]apply  [v]iew  [e]dit  [n]ew │\n└─────────────────────────────────────┘\n```\n\n3. **Variable Application Form:**\n```\n┌─ Apply Template: email-response ────┐\n│                                     │\n│ Fill in template variables:         │\n│                                     │\n│ recipient: [John Smith         ]    │\n│ tone:      [professional       ]    │\n│                                     │\n│ Preview:                            │\n│ ─────────────────────────────────── │\n│ Dear John Smith,                    │\n│                                     │\n│ Thank you for reaching out...       │\n│ ─────────────────────────────────── │\n│                                     │\n│ Output name: [from-email-response]  │\n│                                     │\n│ [Create Prompt]  [Cancel]           │\n└─────────────────────────────────────┘\n```\n\n**Files to Create:**\n- `src/cli/screens/TemplatesScreen.tsx`\n- `src/cli/components/templates/template-form.tsx`\n- `src/cli/components/templates/variable-preview.tsx`","acceptance_criteria":"- [ ] Dedicated templates view showing all templates\n- [ ] Variables displayed for each template\n- [ ] Interactive form for filling variables\n- [ ] Live preview of output as variables are entered\n- [ ] Can set output prompt name\n- [ ] Created prompt saved to storage\n- [ ] Template-specific icon/indicator in main list","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:34:11.16938-08:00","updated_at":"2025-12-14T17:48:29.700694-08:00","closed_at":"2025-12-14T17:48:29.700694-08:00","dependencies":[{"issue_id":"grimoire-mbe","depends_on_id":"grimoire-rmx","type":"parent-child","created_at":"2025-12-14T12:34:23.122891-08:00","created_by":"daemon"}]}
{"id":"grimoire-n84","title":"Define Skill data models and schemas","description":"Create TypeScript types and Effect schemas for skills.\n\n**File**: `src/models/skill.ts`\n\n**Types to define**:\n```typescript\n// Skill manifest (parsed from skill.yaml)\ninterface SkillManifest {\n  name: string;\n  version: string;\n  description: string;\n  type: 'prompt' | 'plugin' | 'mcp' | 'tool';\n  tags?: string[];\n  author?: string;\n  license?: string;\n  repository?: string;\n  cli?: Record\u003cstring, CliDependency\u003e;\n  agents?: {\n    claude_code?: ClaudeCodeConfig;\n    opencode?: OpenCodeConfig;\n  };\n  init?: {\n    commands?: string[];\n    files?: Record\u003cstring, string\u003e;\n  };\n  prompt?: string;  // Inline prompt content\n}\n\ninterface CliDependency {\n  check: string;\n  install?: {\n    brew?: string;\n    cargo?: string;\n    npm?: string;\n    go?: string;\n    script?: string;\n  };\n}\n\ninterface ClaudeCodeConfig {\n  plugin?: { marketplace: string; name: string };\n  mcp?: { command: string; args?: string[]; env?: Record\u003cstring, string\u003e };\n  skill_file?: boolean;\n  inject?: { file: string; content: string };\n}\n\n// State tracking\ninterface SkillsState {\n  version: number;\n  projects: Record\u003cstring, ProjectState\u003e;\n}\n\ninterface ProjectState {\n  agent: 'claude_code' | 'opencode' | 'generic';\n  enabled: string[];\n  disabled_at: Record\u003cstring, string\u003e;\n  initialized_at: string;\n  last_sync?: string;\n}\n\n// Config\ninterface SkillsConfig {\n  defaults: { agent: 'auto' | 'claude_code' | 'opencode' };\n  recommended?: string[];\n  sources?: string[];\n  detect?: Record\u003cstring, string\u003e;\n  features?: {\n    auto_detect?: boolean;\n    inject_agent_md?: boolean;\n    color_output?: boolean;\n  };\n}\n```\n\n**Use Effect Schema patterns from `src/models/prompt.ts`**","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:34:42.575069-08:00","updated_at":"2025-12-15T10:50:16.203276-08:00","closed_at":"2025-12-15T10:50:16.203276-08:00","labels":["infrastructure","models","skills"],"dependencies":[{"issue_id":"grimoire-n84","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:56.959055-08:00","created_by":"daemon"}]}
{"id":"grimoire-oa7","title":"Build ListScreen with table and keyboard navigation","description":"Create the main list screen showing all prompts in a navigable table.\n\n**Features:**\n- Table with columns: Name, Tags, Updated\n- Keyboard navigation (j/k or arrows)\n- Selected row highlighting\n- Quick actions: Enter=view, e=edit, c=copy, d=delete, a=add\n- Pagination for many prompts\n- Tag filter (press 't' to toggle filter)\n- Search shortcut (press '/')\n\n**Implementation:**\n```tsx\nconst ListScreen: React.FC = () =\u003e {\n  const [selectedIndex, setSelectedIndex] = useState(0)\n  const { data: prompts } = useEffectRun(storage.getAll)\n  \n  useInput((input, key) =\u003e {\n    if (input === 'j' || key.downArrow) {\n      setSelectedIndex(i =\u003e Math.min(i + 1, prompts.length - 1))\n    }\n    if (input === 'k' || key.upArrow) {\n      setSelectedIndex(i =\u003e Math.max(i - 1, 0))\n    }\n    if (key.return) {\n      navigate({ name: 'view', promptId: prompts[selectedIndex].id })\n    }\n    // ... other shortcuts\n  })\n  \n  return (\n    \u003cBox flexDirection=\"column\"\u003e\n      \u003cTable data={prompts} selectedIndex={selectedIndex} /\u003e\n      \u003cActionBar actions={['Enter:View', 'e:Edit', 'c:Copy', 'd:Delete', 'a:Add']} /\u003e\n    \u003c/Box\u003e\n  )\n}\n```","acceptance_criteria":"- Table displays all prompts\n- Keyboard navigation works\n- Selected row highlighted\n- All quick actions work\n- Pagination for large lists","notes":"Assigned to agent - implementing ListScreen with table and keyboard navigation","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.32696-08:00","updated_at":"2025-12-13T21:57:02.36763-08:00","closed_at":"2025-12-13T21:57:02.36763-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-oa7","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:35.29519-08:00","created_by":"daemon"},{"issue_id":"grimoire-oa7","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:29:48.270485-08:00","created_by":"daemon"},{"issue_id":"grimoire-oa7","depends_on_id":"grimoire-wcn","type":"blocks","created_at":"2025-12-13T19:29:48.368372-08:00","created_by":"daemon"}]}
{"id":"grimoire-oc7","title":"Implement FormatService for prompt linting","description":"Create src/services/format-service.ts for formatting and linting prompts.\n\n**Service Interface:**\n```typescript\ninterface FormatService {\n  readonly formatPrompt: (content: string, config: FormattingConfig) =\u003e Effect.Effect\u003cFormatResult\u003e\n  readonly checkPrompt: (content: string, config: FormattingConfig) =\u003e Effect.Effect\u003cLintResult\u003e\n  readonly validateYamlFrontmatter: (content: string) =\u003e Effect.Effect\u003cFrontmatterResult\u003e\n}\n\ninterface FormattingConfig {\n  trimTrailingWhitespace: boolean\n  insertFinalNewline: boolean\n  indentSize: number\n  maxLineLength?: number\n  normalizeXmlTags: boolean\n}\n\ninterface LintResult {\n  isValid: boolean\n  issues: LintIssue[]\n}\n\ninterface LintIssue {\n  line: number\n  column: number\n  severity: 'error' | 'warning' | 'info'\n  message: string\n  rule: string\n  fix?: string\n}\n```\n\n**Formatting Rules:**\n- Trailing whitespace removal\n- Consistent indentation (spaces)\n- XML tag spacing (`\u003csystem\u003e` content `\u003c/system\u003e`)\n- Code block fence normalization\n- YAML frontmatter validation\n- Final newline insertion","acceptance_criteria":"- Format applies rules\n- Check reports issues\n- Auto-fix available\n- Frontmatter validated\n- Rules configurable","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:19.39896-08:00","updated_at":"2025-12-13T21:29:22.429857-08:00","closed_at":"2025-12-13T21:29:22.429857-08:00","labels":["area:convex","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-oc7","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:52.625601-08:00","created_by":"daemon"}]}
{"id":"grimoire-oit","title":"Build SearchScreen with live search","description":"Create the search screen with live-updating results.\n\n**Features:**\n- Search input with debounced query\n- Results update as you type\n- Highlighted matches in results\n- Tag filter chips (toggle on/off)\n- Recent searches (last 5)\n- Navigate results with arrows\n- Enter to view selected result\n\n**Layout:**\n```\nSearch: [typescript code review____]\n\nTags: [x coding] [ typescript] [ writing]\n\nFound 5 results:\n\n\u003e 1. coding-assistant\n     ...expertise in \u003chighlight\u003eTypeScript\u003c/highlight\u003e \u003chighlight\u003ecode\u003c/highlight\u003e...\n\n  2. ts-reviewer\n     ...\u003chighlight\u003ereview\u003c/highlight\u003e \u003chighlight\u003eTypeScript\u003c/highlight\u003e files...\n     \n  3. ...\n\n[Enter:View] [Tab:Filter Tags] [Esc:Back]\n```\n\n**Implementation:**\n- Use FTS5 SearchService\n- Debounce input (200ms)\n- Parse snippets for highlights\n- Convert \u003cmark\u003e to ANSI colors","acceptance_criteria":"- Live search updates results\n- Debouncing prevents excess queries\n- Highlights visible in results\n- Tag filtering works\n- Recent searches shown","notes":"Assigned to agent - implementing SearchScreen with live search","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:33.76139-08:00","updated_at":"2025-12-13T21:57:02.4553-08:00","closed_at":"2025-12-13T21:57:02.4553-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-oit","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:47.849237-08:00","created_by":"daemon"},{"issue_id":"grimoire-oit","depends_on_id":"grimoire-7zv","type":"blocks","created_at":"2025-12-13T19:29:59.933954-08:00","created_by":"daemon"},{"issue_id":"grimoire-oit","depends_on_id":"grimoire-3ja","type":"blocks","created_at":"2025-12-13T19:30:00.016467-08:00","created_by":"daemon"}]}
{"id":"grimoire-oke","title":"Phase 1: Project Setup \u0026 Foundation","description":"Initialize the Grimoire CLI project with Bun, TypeScript, Effect, and Ink. Set up directory structure, configuration files, and basic service patterns.\n\n**Goals:**\n- Establish project foundation with modern TypeScript tooling\n- Configure Bun as runtime and bundler\n- Set up Effect for functional programming patterns\n- Prepare Ink/React for CLI rendering\n- Define consistent patterns for the rest of the project\n\n**Key Deliverables:**\n1. `package.json` with all dependencies (effect, ink, react)\n2. `tsconfig.json` for Bun + Effect + JSX\n3. ESLint + Prettier for code quality\n4. Directory structure (src/cli, src/services, src/commands, src/models)\n5. Error types using Effect's Data.TaggedError\n6. Service pattern templates with Context.Tag and Layer\n7. CLI entry point with argument parsing\n8. Bun test runner configuration\n\n**Tech Stack:**\n- Runtime: Bun\n- Language: TypeScript (strict mode)\n- Framework: Ink 5.x (React for CLI)\n- Core Library: Effect 3.x","design":"Follow Effect best practices:\n- Use Effect.gen for effectful computations\n- Define services with Context.Tag and Layer\n- Handle errors with typed error channels\n- Use Schema for runtime validation","acceptance_criteria":"- package.json with all dependencies\n- tsconfig.json configured for Bun + Effect + React/Ink\n- Directory structure created (src/cli, src/services, src/commands, src/models)\n- Basic error types defined\n- Effect service pattern templates\n- CLI entry point with argument parsing","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T03:57:44.493448-08:00","updated_at":"2025-12-13T20:39:32.567801-08:00","closed_at":"2025-12-13T20:39:32.567801-08:00","dependencies":[{"issue_id":"grimoire-oke","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.354231-08:00","created_by":"daemon"}],"comments":[{"id":16,"issue_id":"grimoire-oke","author":"","text":"All Phase 1 issues completed:\n- grimoire-jp6: Bun project initialized\n- grimoire-36j: Directory structure created\n- grimoire-70o: TypeScript configured\n- grimoire-5hf: ESLint/Prettier configured\n- grimoire-4xg: Bun test runner configured\n- grimoire-3ih: Error types defined\n- grimoire-cdl: Service pattern templates created\n- grimoire-txe: CLI entry point implemented\n\nPhase 1 complete - project foundation established.","created_at":"2025-12-14T04:39:32Z"}]}
{"id":"grimoire-oym","title":"Redesign prompt identifying field to handle name collisions","description":"Currently prompts are identified by either `id` (UUID) or `name`. Names might overlap or be similar, causing confusion. Users need a better way to disambiguate prompts.\n\nIssues:\n- Two prompts could have very similar names: \"my-prompt\" vs \"my-prompt-v2\"\n- When displaying matches, there's no way to distinguish between them\n- The UUID is too long to be practical for display","design":"**Current State:**\n- Prompts have `id` (UUID) and `name`\n- `show`, `copy`, `edit` try name first, fall back to ID\n- No short ID or alias system\n\n**Proposed Solution - Short ID System:**\n\n1. **Generate short IDs** (like git commit hashes):\n   - Store first 6-8 chars of UUID as `shortId`\n   - Displayed as `[abc123]` prefix\n   - Unique within collection (regenerate if collision)\n\n2. **Update Prompt Schema** (src/models/prompt.ts):\n```typescript\nexport const PromptSchema = Schema.Struct({\n  id: Schema.String,\n  shortId: Schema.String,  // New: 6-8 char unique identifier\n  name: Schema.String.pipe(Schema.minLength(1)),\n  // ...\n});\n```\n\n3. **Display format** shows name + shortId:\n```\n[abc123] my-prompt          Updated 2h ago\n[def456] my-prompt-v2       Updated 1d ago\n```\n\n4. **Lookup order:**\n   - Exact name match (unique)\n   - Short ID match\n   - Full UUID match\n   - If ambiguous, prompt user to clarify\n\n5. **Migration:** Add shortId to existing prompts based on first 6 chars of UUID\n\n**Alternative: Use timestamps or version for disambiguation:**\n```\nmy-prompt (v3, 2h ago)\nmy-prompt (v1, 5d ago)  \n```\n\n**Files to Modify:**\n- `src/models/prompt.ts` - Add shortId field\n- `src/services/storage-service.ts` - Generate shortId on create, lookup logic\n- `src/services/migration-service.ts` - Migration to add shortId to existing\n- All display components - Show shortId prefix","acceptance_criteria":"- [ ] Prompts have a short identifier (6-8 chars) for disambiguation\n- [ ] Short ID displayed alongside name in lists\n- [ ] Can use short ID to reference prompts in CLI commands\n- [ ] Migration handles existing prompts without shortId\n- [ ] Short IDs are unique within the collection","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:32:22.318917-08:00","updated_at":"2025-12-14T12:32:22.318917-08:00","dependencies":[{"issue_id":"grimoire-oym","depends_on_id":"grimoire-wv8","type":"parent-child","created_at":"2025-12-14T12:32:32.83776-08:00","created_by":"daemon"}]}
{"id":"grimoire-p3bz","title":"Refactor Ollama provider to use TanStack AI","description":"Refactor src/services/providers/ollama-provider.ts:\n\n- Use @tanstack/ai-ollama adapter\n- Keep base URL configuration (OLLAMA_HOST)\n- Same Effect wrapper pattern as other providers","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:42.684555-08:00","updated_at":"2025-12-14T19:43:16.11179-08:00","closed_at":"2025-12-14T19:43:16.11179-08:00","labels":["ai","provider","refactor"],"dependencies":[{"issue_id":"grimoire-p3bz","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.298612-08:00","created_by":"daemon"},{"issue_id":"grimoire-p3bz","depends_on_id":"grimoire-m6og","type":"blocks","created_at":"2025-12-14T19:05:28.293501-08:00","created_by":"daemon"}]}
{"id":"grimoire-q3a","title":"Implement `skills init` command","description":"Initialize skills management in current project.\n\n**File**: `src/commands/skills/init.ts`\n\n**Workflow**:\n1. **Detect Environment**\n   - Check for `.claude/` → Claude Code\n   - Check for `.opencode/` → OpenCode\n   - Both exist → Prompt user to choose\n   - Neither → Prompt user to choose\n   - Respect `--agent` flag if provided\n\n2. **Create Directory Structure**\n   - Claude Code: `mkdir -p .claude/skills`, ensure `CLAUDE.md` exists\n   - OpenCode: `mkdir -p .opencode/skills`, ensure `AGENTS.md` exists\n\n3. **Add Managed Section**\n   - Find/create `\u003c!-- skills:managed:start/end --\u003e` markers\n   - If markers exist, no-op\n\n4. **Detect Project Stack** (optional, `--detect` flag)\n   - Scan for known files (package.json, tsconfig.json, Cargo.toml, etc.)\n   - Output suggested skills to enable\n\n5. **Save State**\n   - Update `~/.skills/state.json` with project entry\n\n**Flags**:\n- `--agent \u003ctype\u003e` - Force agent type (auto, claude_code, opencode)\n- `--detect` / `--no-detect` - Enable/disable project detection\n- `--bare` - Only create directories, skip detection\n- `-y, --yes` - Accept defaults non-interactively\n\n**Edge Cases**:\n- Not in git repo → Warn but continue\n- No write permission → Error with message\n- CLAUDE.md has conflicting markers → Error\n- Agent MD file very large (\u003e100KB) → Warn about context size\n- Running in home directory → Warn","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:44.813684-08:00","updated_at":"2025-12-15T11:00:58.374793-08:00","closed_at":"2025-12-15T11:00:58.374793-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-q3a","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:58.842246-08:00","created_by":"daemon"}],"comments":[{"id":76,"issue_id":"grimoire-q3a","author":"","text":"Agent assigned: Verifying implementation completeness","created_at":"2025-12-15T19:01:08Z"},{"id":89,"issue_id":"grimoire-q3a","author":"","text":"Agent verification complete. ~70% implemented. Core functionality works with -y flag. Missing: --bare flag, --detect/--no-detect flags, interactive prompts (stubbed), edge cases (git check, home dir warning). Keeping in_progress for follow-up work.","created_at":"2025-12-15T19:04:56Z"}]}
{"id":"grimoire-qba","title":"Build interactive components for organization features","description":"Create Ink components for Phase 4 interactive modes.\n\n**Components:**\n\n1. **TagManager** - Interactive tag management\n   - List all tags with counts\n   - Select tag to see prompts\n   - Rename/delete tags\n   - Bulk tagging\n\n2. **SearchUI** - Live search interface\n   - Search input with debounce\n   - Results list with highlights\n   - Tag filter chips\n   - Preview pane for selected result\n\n3. **ExportWizard** - Export configuration\n   - Format selection (JSON/YAML)\n   - Tag filter (multi-select)\n   - Include history toggle\n   - Output path input\n   - Preview of what will be exported\n\n4. **ImportWizard** - Import with conflict handling\n   - Source input (file/URL)\n   - Validation status\n   - Conflict list with diffs\n   - Strategy selection per-conflict\n   - Summary before import\n\n5. **ArchiveManager** - Archive management\n   - List archived prompts\n   - Select to restore\n   - Bulk operations","acceptance_criteria":"- All components implemented\n- Live search responsive\n- Conflict diffs visible\n- Wizard flows intuitive","status":"closed","priority":2,"issue_type":"task","assignee":"agent-qba","created_at":"2025-12-09T04:07:16.253815-08:00","updated_at":"2025-12-13T21:40:48.501617-08:00","closed_at":"2025-12-13T21:40:48.501617-08:00","labels":["area:ui","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-qba","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:22.650786-08:00","created_by":"daemon"}],"comments":[{"id":59,"issue_id":"grimoire-qba","author":"","text":"Assigned to agent-qba","created_at":"2025-12-14T05:34:33Z"}]}
{"id":"grimoire-qwfm","title":"Refactor Anthropic provider to use TanStack AI","description":"Refactor src/services/providers/anthropic-provider.ts:\n\n- Same pattern as OpenAI refactor\n- Use @tanstack/ai-anthropic adapter\n- Keep Effect wrapper and error handling","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:42.566137-08:00","updated_at":"2025-12-14T19:41:54.801032-08:00","closed_at":"2025-12-14T19:41:54.801032-08:00","labels":["ai","provider","refactor"],"dependencies":[{"issue_id":"grimoire-qwfm","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.218947-08:00","created_by":"daemon"},{"issue_id":"grimoire-qwfm","depends_on_id":"grimoire-m6og","type":"blocks","created_at":"2025-12-14T19:05:28.209638-08:00","created_by":"daemon"}]}
{"id":"grimoire-qy8o","title":"Add model switch keyboard shortcut","description":"Update src/cli/app.tsx:\n\n- Add 'm' keyboard shortcut (when not in edit mode)\n- Toggle ModelSwitcherOverlay visibility\n- Show notification confirming model switch","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:43.308878-08:00","updated_at":"2025-12-14T19:32:10.143489-08:00","closed_at":"2025-12-14T19:32:10.143489-08:00","labels":["feature","tui"],"dependencies":[{"issue_id":"grimoire-qy8o","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.729078-08:00","created_by":"daemon"},{"issue_id":"grimoire-qy8o","depends_on_id":"grimoire-v0a3","type":"blocks","created_at":"2025-12-14T19:05:28.66637-08:00","created_by":"daemon"}]}
{"id":"grimoire-rmx","title":"Interactive Dashboard Enhancements","description":"Epic for adding new interactive dashboards and screens to the TUI viewer. These dashboards provide rich visual interfaces for test results, chains, benchmarks, comparisons, LLM configuration, pinned items, templates, and edit history.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-14T12:34:09.951123-08:00","updated_at":"2025-12-14T12:34:09.951123-08:00"}
{"id":"grimoire-sjd","title":"Add tab completion suggestions to CLI show command","description":"The CLI `show` command currently just takes a positional argument without any tab completion or suggestions. When users type `grimoire show ` and press Tab, they should see suggestions for matching prompt names.\n\nCurrently:\n```bash\ngrimoire show mypr\u003cTAB\u003e  # Nothing happens\n```\n\nDesired:\n```bash\ngrimoire show mypr\u003cTAB\u003e\n# Shows: my-prompt  my-prompt-v2  my-project-template\n```","design":"**Implementation Options:**\n\n**Option 1: Shell Completion Scripts (Traditional)**\nGenerate shell completion scripts for bash/zsh/fish:\n1. Create `src/commands/completion.ts` that generates scripts\n2. Script queries prompts and returns matches\n3. User adds to their shell config\n\n```typescript\n// For bash\n_grimoire_completions() {\n  local cur=\"${COMP_WORDS[COMP_CWORD]}\"\n  local prev=\"${COMP_WORDS[COMP_CWORD-1]}\"\n  \n  if [[ \"$prev\" == \"show\" || \"$prev\" == \"copy\" || \"$prev\" == \"edit\" ]]; then\n    # Get prompt names from grimoire\n    COMPREPLY=($(grimoire __complete-prompts \"$cur\"))\n  fi\n}\ncomplete -F _grimoire_completions grimoire\n```\n\n2. Add hidden `__complete-prompts` command:\n```typescript\nexport const completePromptsCommand = (args: ParsedArgs) =\u003e\n  Effect.gen(function* () {\n    const prefix = args.positional[0] || \"\";\n    const storage = yield* StorageService;\n    const prompts = yield* storage.getAll;\n    \n    const matches = prompts\n      .filter(p =\u003e p.name.toLowerCase().startsWith(prefix.toLowerCase()))\n      .map(p =\u003e p.name);\n    \n    console.log(matches.join(\"\\n\"));\n  });\n```\n\n**Option 2: Interactive Tab Completion (In-CLI)**\nUse a TUI-style autocomplete when user presses tab mid-command:\n- Requires parsing stdin for tab character\n- More complex but cross-platform\n\n**Recommended: Option 1** - Standard shell completion is well-understood and works with existing tools.\n\n**Files to Create/Modify:**\n- Create `src/commands/completion.ts` - Completion generation\n- Modify `src/index.ts` - Add `__complete-prompts` command\n- Create `completions/` directory with shell-specific scripts","acceptance_criteria":"- [ ] Running `grimoire completion bash` outputs bash completion script\n- [ ] Running `grimoire completion zsh` outputs zsh completion script\n- [ ] Hidden `grimoire __complete-prompts \u003cprefix\u003e` returns matching names\n- [ ] Tab completion works for show, copy, edit, test, cost commands\n- [ ] Documentation added for setting up completions","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-14T12:32:22.194434-08:00","updated_at":"2025-12-14T15:56:54.82554-08:00","closed_at":"2025-12-14T15:56:54.82554-08:00","dependencies":[{"issue_id":"grimoire-sjd","depends_on_id":"grimoire-wv8","type":"parent-child","created_at":"2025-12-14T12:32:32.788352-08:00","created_by":"daemon"}]}
{"id":"grimoire-sod","title":"Phase 4: Organization \u0026 Search","description":"Implement organization features: tag management, full-text search with FTS5, export/import, and archiving.\n\n**Commands:**\n1. `tag` - Add/remove/list/rename tags\n2. `search` - Full-text search with highlighting\n3. `export` - Export to JSON/YAML\n4. `import` - Import with conflict handling\n5. `archive` - Soft delete to archive\n\n**Services:**\n- TagService - Tag CRUD with frontmatter sync\n- SearchService - FTS5 queries with BM25 ranking\n- ExportService - Bundle prompts to JSON/YAML\n- ImportService - Validate and import bundles\n- ArchiveService - Archive/restore prompts\n\n**Search Features:**\n- Full-text search with porter stemmer\n- Snippet generation with highlights\n- Tag and date filtering\n- Prefix suggestions\n\n**Import/Export:**\n- Versioned bundle format\n- Conflict detection (skip/rename/overwrite)\n- URL import support","design":"FTS5 integration:\n- Triggers keep index in sync\n- BM25 for relevance ranking\n- Snippet() for context highlights","acceptance_criteria":"- tag command (add, remove, list, rename)\n- search command with FTS5 and highlighting\n- export command (JSON/YAML)\n- import command with conflict handling\n- archive command","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-09T03:57:44.778265-08:00","updated_at":"2025-12-13T21:57:28.890912-08:00","closed_at":"2025-12-13T21:57:28.890912-08:00","dependencies":[{"issue_id":"grimoire-sod","depends_on_id":"grimoire-vtz","type":"blocks","created_at":"2025-12-09T03:58:05.592279-08:00","created_by":"daemon"},{"issue_id":"grimoire-sod","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.594457-08:00","created_by":"daemon"}]}
{"id":"grimoire-sy1","title":"Fix FTS5 search syntax error on special characters","description":"Search crashes with FTS5 syntax error when user types special characters like `]`, `[`, `*`, `\"`, etc.\n\n**Error:**\n```\nSqlError: Query execution failed\n(FiberFailure) SqlError: fts5: syntax error near \"]\"\n```\n\nThe issue is in `search-service.ts:buildFtsQuery()` which passes user input directly to FTS5 MATCH clause without sanitizing special FTS5 metacharacters.","design":"**Root Cause (search-service.ts:159-176):**\n```typescript\nconst buildFtsQuery = (options: SearchOptions): string =\u003e {\n  let query = options.query;  // Unsanitized user input!\n  \n  if (options.fuzzy) {\n    const tokens = query.split(/\\s+/).filter((t) =\u003e t.length \u003e 0);\n    const fuzzyTokens = tokens.map((token) =\u003e `${token}*`);\n    query = fuzzyTokens.join(\" OR \");\n  }\n  // ...\n}\n```\n\n**FTS5 Special Characters that need escaping:**\n- `\"` - quote strings\n- `*` - prefix matching\n- `+` - AND operator\n- `-` - NOT operator\n- `(`, `)` - grouping\n- `[`, `]` - invalid but cause errors\n- `:` - column filter (e.g., `tags:foo`)\n- `^` - boost operator\n\n**Solution - Escape/Sanitize FTS5 Query:**\n\n1. Add sanitizer function:\n```typescript\nconst sanitizeFtsQuery = (query: string): string =\u003e {\n  // Remove characters that break FTS5 syntax\n  // Keep alphanumeric, spaces, and safe punctuation\n  return query\n    .replace(/[\\[\\]{}()\":*+\\-^]/g, ' ')  // Replace dangerous chars with space\n    .replace(/\\s+/g, ' ')  // Normalize whitespace\n    .trim();\n};\n```\n\n2. Apply before building FTS query:\n```typescript\nconst buildFtsQuery = (options: SearchOptions): string =\u003e {\n  let query = sanitizeFtsQuery(options.query);\n  // ...\n}\n```\n\n3. Alternatively, use SQLite's built-in quote escaping for literal searches:\n```typescript\nconst escapeFtsLiteral = (term: string): string =\u003e {\n  // Wrap in double quotes for literal matching, escape internal quotes\n  return `\"${term.replace(/\"/g, '\"\"')}\"`;\n};\n```\n\n**Also fix in storage-service.ts:524-537** which has similar issue:\n```typescript\nsearch: (query: string) =\u003e\n  Effect.gen(function* () {\n    // ...\n    WHERE prompts_fts MATCH ?  // query passed directly\n```\n\n**Files to Modify:**\n- `src/services/search-service.ts` - Add sanitizer, apply to buildFtsQuery\n- `src/services/storage-service.ts` - Apply same sanitization to search method","acceptance_criteria":"- [ ] Search does not crash when typing `]`, `[`, `*`, `\"`, or other special characters\n- [ ] Search gracefully handles empty queries after sanitization\n- [ ] Fuzzy search still works correctly with sanitized input\n- [ ] Tag filter queries are also sanitized\n- [ ] Add unit tests for sanitizer function","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-14T12:31:05.246574-08:00","updated_at":"2025-12-14T15:34:13.561952-08:00","closed_at":"2025-12-14T15:34:13.561952-08:00","dependencies":[{"issue_id":"grimoire-sy1","depends_on_id":"grimoire-7mp","type":"parent-child","created_at":"2025-12-14T12:31:12.512379-08:00","created_by":"daemon"}]}
{"id":"grimoire-t70","title":"Create RateLimiterService for API rate limiting","description":"Create src/services/rate-limiter-service.ts to handle API rate limiting.\n\n**Service Interface:**\n```typescript\ninterface RateLimiterService {\n  readonly acquire: (provider: string) =\u003e Effect.Effect\u003cvoid\u003e  // Blocks if rate limited\n  readonly setRetryAfter: (provider: string, ms: number) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly getStatus: (provider: string) =\u003e Effect.Effect\u003cRateLimitStatus\u003e\n}\n\ninterface RateLimitStatus {\n  isLimited: boolean\n  retryAfter?: Date\n  requestsRemaining?: number\n}\n```\n\n**Implementation:**\n- Track per-provider rate limits\n- Parse `Retry-After` headers from responses\n- Block `acquire` until retry time passes\n- Use Effect.Semaphore for concurrent request limiting\n- Default limits based on provider tier\n\n**Rate Limit Headers:**\n- OpenAI: `x-ratelimit-remaining-requests`, `x-ratelimit-reset-requests`\n- Anthropic: `retry-after`, `x-ratelimit-limit-requests`","acceptance_criteria":"- Blocks when rate limited\n- Parses retry-after headers\n- Per-provider tracking\n- Status queryable\n- Automatic retry timing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:12:39.418166-08:00","updated_at":"2025-12-13T21:30:08.840578-08:00","closed_at":"2025-12-13T21:30:08.840578-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-t70","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:48.651453-08:00","created_by":"daemon"}]}
{"id":"grimoire-ta8w","title":"Fix N+1 pattern in reorder operations","description":"## Problem\nReorder operations in FavoriteService and PinService use sequential loops inside transactions.\n\n## Locations\n- `src/services/favorite-pin-service.ts:331-370` (FavoriteService.reorder)\n- `src/services/favorite-pin-service.ts:559-598` (PinService.reorder)\n\n## Current Pattern\n```typescript\nreorder: (promptIds: string[]) =\u003e\n  Effect.gen(function* () {\n    yield* sql.transaction(\n      Effect.gen(function* () {\n        for (let i = 0; i \u003c promptIds.length; i++) {\n          yield* sql.run(...);\n          const rows = yield* sql.query(...);\n          // More sequential operations\n        }\n      })\n    );\n  }),\n```\n\n## Solution\nBatch SQL updates and parallelize file writes:\n\n```typescript\nreorder: (promptIds: string[]) =\u003e\n  Effect.gen(function* () {\n    yield* sql.transaction(\n      Effect.gen(function* () {\n        // Batch SQL updates\n        yield* Effect.forEach(\n          promptIds.map((id, i) =\u003e ({ id, order: i })),\n          ({ id, order }) =\u003e sql.run(\"UPDATE prompts SET favorite_order = ? WHERE id = ?\", [order, id]),\n          { concurrency: 1 }  // Sequential for transaction safety\n        );\n      })\n    );\n    // Parallel file updates outside transaction\n    yield* Effect.forEach(\n      promptIds.map((id, i) =\u003e ({ id, order: i })),\n      ({ id, order }) =\u003e updatePromptFile(id, order),\n      { concurrency: 10 }\n    );\n  }),\n```\n\n## Acceptance Criteria\n- [ ] SQL operations batched within transaction\n- [ ] File operations parallelized outside transaction\n- [ ] Tests pass\n- [ ] Reorder performance improved","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-15T00:55:38.067853-08:00","updated_at":"2025-12-15T00:55:38.067853-08:00","labels":["effect","n-plus-one","performance"]}
{"id":"grimoire-tc5a","title":"Add LLM config state to app context","description":"Update src/cli/context/app-context.tsx:\n\nAdd to AppState:\n- llmConfig: { currentProvider: string, currentModel: string }\n\nAdd to AppActions:\n- setLLMConfig(provider, model)\n\nLoad default from config on init, persist changes to ~/.grimoire/config.yaml","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.925689-08:00","updated_at":"2025-12-14T19:30:23.158763-08:00","closed_at":"2025-12-14T19:30:23.158763-08:00","labels":["state","tui"],"dependencies":[{"issue_id":"grimoire-tc5a","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.464107-08:00","created_by":"daemon"}]}
{"id":"grimoire-thi","title":"Create favorite and pin commands","description":"Implement the `grimoire favorite` and `grimoire pin` commands.\n\n**Favorite CLI Interface:**\n```\ngrimoire favorite \u003cprompt-name\u003e   # Toggle favorite\ngrimoire favorite --list          # List favorites\ngrimoire favorite --add \u003cname\u003e\ngrimoire favorite --remove \u003cname\u003e\n```\n\n**Pin CLI Interface:**\n```\ngrimoire pin \u003cprompt-name\u003e        # Pin to top\ngrimoire pin --unpin \u003cname\u003e\ngrimoire pin --list\ngrimoire pin --reorder            # Interactive reorder\n```\n\n**Behavior:**\n- `favorite` without flags toggles state\n- `--list` shows all favorites/pinned\n- Pinned prompts appear first in `list` command\n- Favorites have a star indicator in list\n\n**List Integration:**\n```\nNAME                 TAGS                UPDATED\n📌 coding-assistant  coding, ts          2 hours ago\n📌 reviewer          review              1 day ago\n⭐ creative-writer   writing             3 days ago\n   utility-prompt    misc                1 week ago\n```\n\n**Reorder Mode:**\nInteractive drag-and-drop style reordering with j/k and Enter to confirm.","acceptance_criteria":"- Toggle favorite works\n- Toggle pin works\n- List shows correct items\n- Pinned appear first in list\n- Reorder interactive works","notes":"Assigned to agent - implementing favorite and pin commands","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:20.864092-08:00","updated_at":"2025-12-13T21:36:17.180369-08:00","closed_at":"2025-12-13T21:36:17.180369-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-thi","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:52.702197-08:00","created_by":"daemon"},{"issue_id":"grimoire-thi","depends_on_id":"grimoire-9w3","type":"blocks","created_at":"2025-12-13T19:31:53.267346-08:00","created_by":"daemon"}]}
{"id":"grimoire-tmk","title":"Enhance test command with model swapping","description":"Enhance the test command to support easy model swapping.\n\n## Current State\n- Has `--model` flag defaulting to `gpt-4o`\n- No interactive selection\n- No provider-based selection\n\n## Enhancements\n- Interactive model selection when `--model` not provided\n- Add `--provider` flag to filter model selection\n- Add `--list-models` to show available models and exit\n- Show selected model in output header\n- Add shorthand aliases for common models (e.g., `--model claude` → `claude-sonnet-4`)\n\n## Files to Modify\n- `src/commands/test.ts`","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T10:41:49.717863-08:00","updated_at":"2025-12-15T10:41:49.717863-08:00","labels":["cli","command","test"],"dependencies":[{"issue_id":"grimoire-tmk","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.446254-08:00","created_by":"daemon"},{"issue_id":"grimoire-tmk","depends_on_id":"grimoire-20c","type":"blocks","created_at":"2025-12-15T10:42:21.611758-08:00","created_by":"daemon"}]}
{"id":"grimoire-tvy","title":"Implement TagService for tag management","description":"Create src/services/tag-service.ts for managing prompt tags.\n\n**Service Interface:**\n```typescript\ninterface TagService {\n  readonly addTag: (promptId: string, tagName: string) =\u003e Effect.Effect\u003cvoid, PromptNotFoundError\u003e\n  readonly removeTag: (promptId: string, tagName: string) =\u003e Effect.Effect\u003cvoid, PromptNotFoundError\u003e\n  readonly listTags: () =\u003e Effect.Effect\u003cTagWithCount[]\u003e\n  readonly renameTag: (oldName: string, newName: string) =\u003e Effect.Effect\u003cnumber\u003e  // Returns affected count\n  readonly getPromptsWithTag: (tagName: string) =\u003e Effect.Effect\u003cPrompt[]\u003e\n  readonly mergeTags: (source: string, target: string) =\u003e Effect.Effect\u003cnumber\u003e\n}\n\ninterface TagWithCount {\n  name: string\n  count: number\n}\n```\n\n**Database Operations:**\n- Tags stored in `tags` table with unique names (case-insensitive)\n- `prompt_tags` junction table links prompts to tags\n- `listTags` returns sorted by count descending\n- `renameTag` updates all prompt files' frontmatter too\n\n**Frontmatter Sync:**\nWhen adding/removing tags, update both database AND the prompt's .md file frontmatter.","acceptance_criteria":"- Add/remove tags works\n- listTags returns counts\n- renameTag updates all references\n- Frontmatter stays in sync with DB","status":"closed","priority":1,"issue_type":"task","assignee":"agent-13","created_at":"2025-12-09T04:07:14.868881-08:00","updated_at":"2025-12-13T21:17:49.132129-08:00","closed_at":"2025-12-13T21:17:49.132129-08:00","labels":["area:convex","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-tvy","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:08.837878-08:00","created_by":"daemon"}],"comments":[{"id":39,"issue_id":"grimoire-tvy","author":"","text":"Assigned to Agent 1 - Working on src/services/tag-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":52,"issue_id":"grimoire-tvy","author":"","text":"Implementation complete. TagService created at src/services/tag-service.ts with: addTag, removeTag, listTags, renameTag, getPromptsWithTag, mergeTags methods. Includes frontmatter sync.","created_at":"2025-12-14T05:17:49Z"}]}
{"id":"grimoire-txe","title":"Implement CLI entry point with argument parsing","description":"Create src/index.ts as the CLI entry point with argument parsing and command routing.\n\n**Implementation:**\n```typescript\n#!/usr/bin/env bun\nimport { Effect, Console } from \"effect\"\nimport { parseArgs, runCommand, runInteractive } from \"./cli\"\nimport { MainLive } from \"./services\"\n\nconst program = Effect.gen(function* () {\n  const args = process.argv.slice(2)\n  const { command, flags, positional } = parseArgs(args)\n\n  if (flags.interactive || args.length === 0) {\n    yield* runInteractive()\n  } else {\n    yield* runCommand(command, positional, flags)\n  }\n})\n\nconst main = program.pipe(\n  Effect.catchAll(handleError),\n  Effect.provide(MainLive)\n)\n\nEffect.runPromise(main)\n```\n\n**Features:**\n- Parse command, flags, and positional args\n- Route to interactive mode if no args or -i flag\n- Error handling with user-friendly messages\n- Exit codes for success/failure","acceptance_criteria":"- Entry point runs with `bun run src/index.ts`\n- Argument parsing works for commands and flags\n- Interactive mode launches with no args\n- Errors display helpful messages","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:03:04.672122-08:00","updated_at":"2025-12-13T20:39:21.822285-08:00","closed_at":"2025-12-13T20:39:21.822285-08:00","labels":["area:frontend","feature:grimoire-cli","phase:1","type:implementation"],"dependencies":[{"issue_id":"grimoire-txe","depends_on_id":"grimoire-oke","type":"parent-child","created_at":"2025-12-13T19:21:50.033544-08:00","created_by":"daemon"},{"issue_id":"grimoire-txe","depends_on_id":"grimoire-cdl","type":"blocks","created_at":"2025-12-13T19:22:06.058431-08:00","created_by":"daemon"}],"comments":[{"id":14,"issue_id":"grimoire-txe","author":"","text":"Assigned to Agent-7","created_at":"2025-12-14T04:29:59Z"},{"id":15,"issue_id":"grimoire-txe","author":"","text":"Agent-7 completed:\n- src/cli/parser.ts with argument parsing\n- Updated src/cli/app.tsx with runInteractive function  \n- Updated src/index.ts as CLI entry point\n- Added tests/parser.test.ts with 10 test cases\nAll 20 tests pass. CLI works with --help, --version, -i flags.","created_at":"2025-12-14T04:39:21Z"}]}
{"id":"grimoire-udq","title":"Implement `skills disable` command","description":"Disable skill(s) in current project.\n\n**File**: `src/commands/skills/disable.ts`\n\n**Workflow**:\n1. Verify skill is enabled (no-op if not)\n2. Remove skill file from `.claude/skills/`\n3. Remove injection from CLAUDE.md\n4. Update state (add to disabled_at)\n5. Do NOT uninstall CLI tools or plugins\n\n**Flags**:\n- `--purge` - Also remove project artifacts (e.g., `.beads/` directory)\n- `-y, --yes` - Skip confirmation for purge\n\n**Output**:\n```\n✓ Disabled beads\n  • Removed from CLAUDE.md\n  • Removed .claude/skills/beads.md\n\nNote: Plugin and CLI remain installed for future use.\n```\n\n**Edge Cases**:\n- Skill not enabled → \"Skill 'X' is not enabled\" (exit 0)\n- File already manually deleted → Continue\n- Injection markers not found → Continue (maybe manually edited)","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:45.340655-08:00","updated_at":"2025-12-15T11:10:01.637956-08:00","closed_at":"2025-12-15T11:10:01.637956-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-udq","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:59.046462-08:00","created_by":"daemon"},{"issue_id":"grimoire-udq","depends_on_id":"grimoire-dq6","type":"blocks","created_at":"2025-12-14T16:35:59.25434-08:00","created_by":"daemon"}],"comments":[{"id":87,"issue_id":"grimoire-udq","author":"","text":"Assigned to Agent-4: skills disable command implementation","created_at":"2025-12-15T19:03:20Z"},{"id":93,"issue_id":"grimoire-udq","author":"","text":"Agent assigned: Implementing skills disable command","created_at":"2025-12-15T19:05:44Z"}]}
{"id":"grimoire-uhq","title":"Implement ELO service for provider rankings","description":"Create src/services/elo-service.ts:\n- updateElo(winner, loser, isTie?) - update scores after vote\n- getElo(provider, model) - get ELO for specific provider+model\n- getLeaderboard(limit?) - get all providers sorted by ELO\n- initializeElo(provider, model) - create initial ELO record\n- calculateExpectedScore(eloA, eloB) - for display purposes\n\nConstants: K_FACTOR=32, INITIAL_ELO=1500\nStandard ELO formula implementation","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-14T18:40:27.186607-08:00","updated_at":"2025-12-14T18:40:27.186607-08:00","labels":["arena","elo","service"],"dependencies":[{"issue_id":"grimoire-uhq","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.646871-08:00","created_by":"daemon"},{"issue_id":"grimoire-uhq","depends_on_id":"grimoire-3z7","type":"blocks","created_at":"2025-12-14T18:41:02.246882-08:00","created_by":"daemon"},{"issue_id":"grimoire-uhq","depends_on_id":"grimoire-lxp","type":"blocks","created_at":"2025-12-14T18:41:02.312698-08:00","created_by":"daemon"}]}
{"id":"grimoire-ui1","title":"Implement Google/Gemini LLM provider","description":"Create src/services/providers/google-provider.ts:\n- Implement LLMProvider interface for Google Gemini API\n- Support models: gemini-2.0-flash-exp, gemini-1.5-pro, gemini-1.5-flash, gemini-1.5-flash-8b\n- Implement complete() and stream() methods\n- Handle API key retrieval via ApiKeyService\n- Follow pattern from anthropic-provider.ts","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-14T18:40:27.062041-08:00","updated_at":"2025-12-14T18:40:27.062041-08:00","labels":["arena","data-layer","llm","provider"],"dependencies":[{"issue_id":"grimoire-ui1","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:44.57312-08:00","created_by":"daemon"}]}
{"id":"grimoire-uk9","title":"Implement `skills info` command","description":"Show detailed information about a skill.\n\n**File**: `src/commands/skills/info.ts`\n\n**Output format**:\n```\nbeads v0.24.0\nAgent memory \u0026 issue tracking\n\nAuthor: steveyegge\nLicense: MIT\nRepository: https://github.com/steveyegge/beads\n\nType: plugin\nTags: memory, issues, tracking\n\nCLI Dependencies:\n  • bd (check: bd --version)\n    Install: brew install beads, cargo install beads\n\nAgent Support:\n  • Claude Code: plugin + MCP + injection\n  • OpenCode: injection only\n\nStatus: Enabled\n```\n\n**Flags**:\n- `--readme` - Show README content\n- `--manifest` - Show raw skill.yaml\n\n**Implementation**:\n1. Load skill from cache\n2. Display formatted info\n3. Show README if flag provided","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:37:25.661801-08:00","updated_at":"2025-12-15T11:14:20.052285-08:00","closed_at":"2025-12-15T11:14:20.052285-08:00","labels":["commands","polish","skills"],"dependencies":[{"issue_id":"grimoire-uk9","depends_on_id":"grimoire-cwc","type":"parent-child","created_at":"2025-12-14T16:37:34.458234-08:00","created_by":"daemon"}],"comments":[{"id":94,"issue_id":"grimoire-uk9","author":"","text":"Assigned to Agent-3: Implementing skills info command","created_at":"2025-12-15T19:06:57Z"},{"id":98,"issue_id":"grimoire-uk9","author":"","text":"Assigned to Agent a13b602 - implementing skills info command with --readme and --manifest flags","created_at":"2025-12-15T19:07:32Z"},{"id":103,"issue_id":"grimoire-uk9","author":"","text":"Assigning to Agent 1 - starting implementation","created_at":"2025-12-15T19:07:51Z"},{"id":107,"issue_id":"grimoire-uk9","author":"","text":"Agent assigned: Implementing skills info command","created_at":"2025-12-15T19:11:13Z"}]}
{"id":"grimoire-uvwz","title":"Add Google API key support to config","description":"Update api-key-service.ts and config.ts for Google/Gemini:\n\n1. src/services/api-key-service.ts:\n   - Add google: \"GOOGLE_API_KEY\" to ENV_KEYS\n\n2. src/commands/config.ts:\n   - Add \"google\" to PROVIDERS array\n   - Add to PROVIDER_INFO: { name: \"Google Gemini\", envVar: \"GOOGLE_API_KEY\" }","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T19:04:42.232013-08:00","updated_at":"2025-12-14T19:25:47.97586-08:00","closed_at":"2025-12-14T19:25:47.97586-08:00","labels":["ai","config","gemini"],"dependencies":[{"issue_id":"grimoire-uvwz","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:09.995257-08:00","created_by":"daemon"},{"issue_id":"grimoire-uvwz","depends_on_id":"grimoire-gokn","type":"blocks","created_at":"2025-12-14T19:05:27.905269-08:00","created_by":"daemon"}]}
{"id":"grimoire-v0a3","title":"Create ModelSwitcherOverlay component","description":"Create src/cli/components/ModelSwitcherOverlay.tsx:\n\n- Compact overlay listing configured providers with models\n- Arrow key navigation (j/k or up/down)\n- Enter to select, Escape to cancel\n- Only show providers with configured API keys\n- Update app context with selection","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T19:04:43.176864-08:00","updated_at":"2025-12-14T19:31:21.274969-08:00","closed_at":"2025-12-14T19:31:21.274969-08:00","labels":["feature","tui"],"dependencies":[{"issue_id":"grimoire-v0a3","depends_on_id":"grimoire-cdlw","type":"parent-child","created_at":"2025-12-14T19:05:10.638582-08:00","created_by":"daemon"},{"issue_id":"grimoire-v0a3","depends_on_id":"grimoire-tc5a","type":"blocks","created_at":"2025-12-14T19:05:28.574965-08:00","created_by":"daemon"}]}
{"id":"grimoire-v26","title":"Implement `skills add` command","description":"Add a skill from a source to local cache.\n\n**File**: `src/commands/skills/add.ts`\n\n**Workflow**:\n1. **Parse Source Identifier**\n   - `github:owner/repo` → GitHub repository\n   - `github:owner/repo@tag` → Specific tag/branch\n   - `github:owner/repo#subdir` → Subdirectory of repo\n   - `./local/path` → Local directory\n   - Full URL → Normalize to above\n\n2. **Check Cache**\n   - If skill exists and no `--force` → \"Already cached. Use --force to update\"\n   - With `--force` → Continue to fetch\n\n3. **Fetch Skill**\n   - GitHub: Try API first, fallback to shallow git clone\n   - Local: Symlink or copy to cache\n\n4. **Validate Skill**\n   - Required: `skill.yaml` OR `SKILL.md`\n   - Parse and validate manifest\n   - Warn on unknown fields (forward compat)\n\n5. **Store in Cache**\n   - `~/.skills/cache/{skill-name}/`\n   - Create `.meta.json` with source URL, fetched_at\n\n**Flags**:\n- `-f, --force` - Overwrite if already cached\n- `--no-validate` - Skip validation (use with caution)\n\n**Edge Cases**:\n- GitHub rate limited → Git clone fallback, suggest GITHUB_TOKEN\n- Network offline → Error with message\n- Repo not found/private → Clear error\n- No skill.yaml or SKILL.md → Treat README.md as prompt with warning\n- skill.yaml parse error → Show line number, don't cache\n- Name collision → Require --force or rename","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:35:44.931784-08:00","updated_at":"2025-12-15T11:00:58.404921-08:00","closed_at":"2025-12-15T11:00:58.404921-08:00","labels":["commands","skills"],"dependencies":[{"issue_id":"grimoire-v26","depends_on_id":"grimoire-8wm","type":"parent-child","created_at":"2025-12-14T16:35:58.897843-08:00","created_by":"daemon"}],"comments":[{"id":77,"issue_id":"grimoire-v26","author":"","text":"Agent assigned: Verifying implementation completeness","created_at":"2025-12-15T19:01:08Z"},{"id":90,"issue_id":"grimoire-v26","author":"","text":"Agent verification complete. ~80% implemented. Enhanced with URL normalization, GitHub cache checking, force flag for GitHub. Missing: git clone fallback, --no-validate implementation, SKILL.md/README.md fallbacks (require cache service changes). Keeping in_progress.","created_at":"2025-12-15T19:04:56Z"}]}
{"id":"grimoire-v5f","title":"Add arena screen to TUI navigation","description":"Update TUI navigation:\n- Add arena screen type to src/cli/context/app-context.tsx:\n  | { name: \"arena\"; promptId?: string }\n- Add arena case to src/cli/components/Router.tsx\n- Export ArenaScreen from src/cli/screens/index.ts\n- Add navigation entry point (keyboard shortcut or menu)","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T18:40:28.087245-08:00","updated_at":"2025-12-14T18:40:28.087245-08:00","labels":["arena","integration","tui"],"dependencies":[{"issue_id":"grimoire-v5f","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:45.265852-08:00","created_by":"daemon"},{"issue_id":"grimoire-v5f","depends_on_id":"grimoire-68z","type":"blocks","created_at":"2025-12-14T18:41:03.384437-08:00","created_by":"daemon"}]}
{"id":"grimoire-vii","title":"Phase 2: Database Architecture","description":"Implement hybrid storage system with Markdown files for prompt content and SQLite for metadata, search indexing, and relationships.\n\n**Architecture:**\n- **File Storage:** Markdown files with YAML frontmatter in `~/.grimoire/prompts/`\n- **Database:** SQLite with Bun's native `bun:sqlite` for metadata and search\n- **Sync:** Bidirectional sync between filesystem and database\n\n**Key Deliverables:**\n1. SqlService - SQLite access with WAL mode, transactions\n2. PromptStorageService - Read/write .md files with gray-matter\n3. Frontmatter Schema - Effect Schema for validation\n4. Migration System - Versioned schema migrations\n5. FTS5 Virtual Table - Full-text search with triggers\n6. SyncService - File-to-DB synchronization\n7. File Watcher - Auto-sync on external changes\n\n**Database Schema:**\n- `prompts` - Core prompt metadata\n- `tags` - Tag definitions\n- `prompt_tags` - Junction table\n- `prompt_versions` - Version history\n- `prompts_fts` - FTS5 virtual table","design":"Hybrid storage pattern:\n- Files are source of truth for content\n- Database provides fast queries and search\n- Content hash detects changes\n- Sync reconciles differences","acceptance_criteria":"- SqlService with Bun's native SQLite\n- PromptStorageService with gray-matter for YAML frontmatter\n- Migration system for schema versioning\n- FTS5 virtual table for full-text search\n- SyncService for filesystem-database synchronization","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T03:57:44.606781-08:00","updated_at":"2025-12-13T20:56:52.966497-08:00","closed_at":"2025-12-13T20:56:52.966497-08:00","dependencies":[{"issue_id":"grimoire-vii","depends_on_id":"grimoire-oke","type":"blocks","created_at":"2025-12-09T03:58:05.463441-08:00","created_by":"daemon"},{"issue_id":"grimoire-vii","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.434214-08:00","created_by":"daemon"}],"comments":[{"id":31,"issue_id":"grimoire-vii","author":"","text":"All Phase 2 child issues completed:\n- grimoire-eap: SqlService with Bun's native SQLite ✓\n- grimoire-djq: PromptStorageService with gray-matter ✓\n- grimoire-gex: Frontmatter schema with Effect Schema ✓\n- grimoire-b2l: Database migration system ✓\n- grimoire-6qy: FTS5 virtual table and triggers ✓\n- grimoire-8yk: SyncService for filesystem-database sync ✓\n- grimoire-gys: File watching with Bun for live sync ✓\n\nPhase 2 complete. Closing epic to unblock Phase 3.","created_at":"2025-12-14T04:56:52Z"}]}
{"id":"grimoire-vtz","title":"Phase 3: Core Commands","description":"Implement basic CRUD operations: add, list, edit, copy, rm, show, and templates commands.\n\n**Commands:**\n1. `add` - Create new prompts with editor integration\n2. `list` - Display prompts with filtering/pagination\n3. `edit` - Modify prompts with $EDITOR support\n4. `copy` - Copy to clipboard with variable interpolation\n5. `rm` - Soft/hard delete with confirmation\n6. `show` - Display prompt with metadata\n7. `templates` - Template management subcommands\n\n**Services:**\n- StorageService - Combined file+DB CRUD operations\n- ClipboardService - Cross-platform clipboard (pbcopy, xclip, clip)\n- EditorService - $EDITOR/$VISUAL integration\n\n**Interactive Mode:**\nEach command supports `-i` flag for Ink-based interactive UI\n\n**Variable Interpolation:**\nSupport `{{variable}}` placeholders in prompts with CLI or interactive filling","design":"Command pattern:\n- Each command is an Effect program\n- Services injected via Layer\n- Interactive mode renders Ink components\n- Non-interactive outputs to stdout","acceptance_criteria":"- add command with editor integration\n- list command with filtering and pagination\n- edit command with external editor support\n- copy command with clipboard and variable interpolation\n- rm command with soft/hard delete\n- show command with metadata display\n- templates subcommands","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-09T03:57:44.691968-08:00","updated_at":"2025-12-13T21:11:19.977965-08:00","closed_at":"2025-12-13T21:11:19.977965-08:00","dependencies":[{"issue_id":"grimoire-vtz","depends_on_id":"grimoire-vii","type":"blocks","created_at":"2025-12-09T03:58:05.543697-08:00","created_by":"daemon"},{"issue_id":"grimoire-vtz","depends_on_id":"grimoire-g71","type":"parent-child","created_at":"2025-12-13T19:21:13.513637-08:00","created_by":"daemon"}],"comments":[{"id":38,"issue_id":"grimoire-vtz","author":"","text":"All Phase 3 deliverables completed:\n\n**Services:**\n- StorageService with full CRUD operations ✓\n- ClipboardService with platform detection ✓\n- EditorService with $EDITOR integration ✓\n\n**Commands:**\n- add command with editor integration ✓\n- list command with filtering/pagination ✓\n- edit command with $EDITOR support ✓\n- copy command with variable interpolation ✓\n- rm command with soft/hard delete ✓\n- show command with metadata display ✓\n- templates subcommands (list, show, create, apply) ✓\n\n**Interactive Components:**\n- PromptList, PromptViewer, PromptForm, VariableFiller ✓\n\nPhase 3 complete. Closing epic to unblock Phases 4-8.","created_at":"2025-12-14T05:11:19Z"}]}
{"id":"grimoire-w20","title":"Implement DiffService with jsdiff package","description":"Create src/services/diff-service.ts for computing and formatting diffs.\n\n**Dependencies:** Install `diff` (jsdiff) package.\n\n**Service Interface:**\n```typescript\ninterface DiffService {\n  readonly computeDiff: (old: string, new_: string, options?: DiffOptions) =\u003e Effect.Effect\u003cDiffResult\u003e\n  readonly formatUnified: (diff: DiffResult, options?: FormatOptions) =\u003e Effect.Effect\u003cstring\u003e\n  readonly formatSideBySide: (diff: DiffResult, options?: FormatOptions) =\u003e Effect.Effect\u003cSideBySideDiff\u003e\n  readonly formatInline: (diff: DiffResult) =\u003e Effect.Effect\u003cstring\u003e\n}\n\ninterface DiffResult {\n  changes: Change[]\n  hunks: Hunk[]\n  additions: number\n  deletions: number\n  unchanged: number\n}\n```\n\n**Implementation:**\n```typescript\nimport * as Diff from 'diff'\n\nconst computeDiffImpl = (old: string, new_: string) =\u003e\n  Effect.sync(() =\u003e {\n    const changes = Diff.diffLines(old, new_)\n    const patch = Diff.structuredPatch(\"old\", \"new\", old, new_)\n    return { \n      changes, \n      hunks: patch.hunks,\n      additions: countAdditions(changes),\n      deletions: countDeletions(changes)\n    }\n  })\n```\n\n**Formats:**\n- Unified: Standard diff format\n- Side-by-side: Two-column comparison\n- Inline: Additions/deletions highlighted inline","acceptance_criteria":"- diff package installed\n- Line-by-line diff computed\n- Unified format output\n- Side-by-side format output\n- Addition/deletion counts accurate","status":"closed","priority":1,"issue_type":"task","assignee":"agent-19","created_at":"2025-12-09T04:08:25.858412-08:00","updated_at":"2025-12-13T21:17:49.210392-08:00","closed_at":"2025-12-13T21:17:49.210392-08:00","labels":["area:convex","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-w20","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.208845-08:00","created_by":"daemon"}],"comments":[{"id":45,"issue_id":"grimoire-w20","author":"","text":"Assigned to Agent 7 - Working on src/services/diff-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":55,"issue_id":"grimoire-w20","author":"","text":"Implementation complete. DiffService created at src/services/diff-service.ts using jsdiff. Includes: computeDiff, formatUnified, formatSideBySide, formatInline with ANSI colors.","created_at":"2025-12-14T05:17:49Z"}]}
{"id":"grimoire-wcn","title":"Create layout components (StatusBar, Breadcrumb, ActionBar)","description":"Create reusable layout components for the TUI shell.\n\n**Components:**\n\n1. **StatusBar** - Bottom bar with status and hints\n   ```tsx\n   const StatusBar: React.FC\u003c{ message?: string }\u003e = ({ message }) =\u003e (\n     \u003cBox borderStyle=\"single\" paddingX={1}\u003e\n       \u003cText\u003e{message || 'Ready'}\u003c/Text\u003e\n       \u003cText dimColor\u003e | Press q to quit, / to search\u003c/Text\u003e\n     \u003c/Box\u003e\n   )\n   ```\n\n2. **Breadcrumb** - Navigation path\n   ```tsx\n   // List \u003e coding-assistant \u003e Edit\n   const Breadcrumb: React.FC\u003c{ items: string[] }\u003e = ({ items }) =\u003e (\n     \u003cBox\u003e\n       {items.map((item, i) =\u003e (\n         \u003c\u003e\n           {i \u003e 0 \u0026\u0026 \u003cText dimColor\u003e › \u003c/Text\u003e}\n           \u003cText bold={i === items.length - 1}\u003e{item}\u003c/Text\u003e\n         \u003c/\u003e\n       ))}\n     \u003c/Box\u003e\n   )\n   ```\n\n3. **ActionBar** - Available keyboard shortcuts\n   ```tsx\n   // [Enter:Select] [e:Edit] [c:Copy] [Esc:Back]\n   const ActionBar: React.FC\u003c{ actions: Action[] }\u003e = ({ actions }) =\u003e (\n     \u003cBox gap={2}\u003e\n       {actions.map(a =\u003e (\n         \u003cText key={a.key}\u003e\n           \u003cText color=\"blue\"\u003e[{a.key}]\u003c/Text\u003e\n           \u003cText\u003e:{a.label}\u003c/Text\u003e\n         \u003c/Text\u003e\n       ))}\n     \u003c/Box\u003e\n   )\n   ```","acceptance_criteria":"- StatusBar shows message\n- Breadcrumb shows navigation\n- ActionBar shows shortcuts\n- Components are reusable\n- Styling consistent","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:10:34.073218-08:00","updated_at":"2025-12-13T21:18:06.567679-08:00","closed_at":"2025-12-13T21:18:06.567679-08:00","labels":["area:ui","feature:grimoire-cli","phase:6","type:implementation"],"dependencies":[{"issue_id":"grimoire-wcn","depends_on_id":"grimoire-1fy","type":"parent-child","created_at":"2025-12-13T19:29:47.931072-08:00","created_by":"daemon"}],"comments":[{"id":47,"issue_id":"grimoire-wcn","author":"","text":"Assigned to Agent 9 - Working on src/cli/components/layout/","created_at":"2025-12-14T05:16:24Z"},{"id":57,"issue_id":"grimoire-wcn","author":"","text":"Implementation complete. Layout components created at src/cli/components/layout/: StatusBar, Breadcrumb, ActionBar, AppLayout with barrel export index.ts.","created_at":"2025-12-14T05:18:06Z"}]}
{"id":"grimoire-wcv","title":"[REF] Skills Feature Specification","description":"**REFERENCE DOCUMENT** - Central specification for Skills feature implementation\n\n## Commands\n| Command | Description | Priority |\n|---------|-------------|----------|\n| `skills init` | Initialize skills in project (detect agent, create dirs, add managed section) | P0 |\n| `skills add \u003csource\u003e` | Fetch skill from GitHub to cache | P0 |\n| `skills enable \u003cname\u003e` | Enable skill in project (install deps, copy files, inject) | P0 |\n| `skills disable \u003cname\u003e` | Disable skill (remove files, clean injection) | P0 |\n| `skills list` | List enabled and available skills | P0 |\n| `skills info \u003cname\u003e` | Show skill details | P1 |\n| `skills search \u003cquery\u003e` | Search GitHub for skills | P1 |\n| `skills sync` | Update enabled skills to latest | P2 |\n| `skills doctor` | Diagnose and fix issues | P2 |\n\n## Data Model\n```yaml\n# skill.yaml (Skill Manifest)\nname: string          # Unique identifier\nversion: string       # Semver\ndescription: string   # One-line description\ntype: prompt | plugin | mcp | tool\ncli:                  # CLI dependencies\n  \u003cbinary\u003e:\n    check: string     # Verify command\n    install: { brew?, cargo?, npm?, go? }\nagents:\n  claude_code:\n    plugin: { marketplace, name }\n    mcp: { command, args, env }\n    skill_file: bool\n    inject: { file, content }\n```\n\n## File System\n```\n~/.skills/\n├── config.yaml       # User preferences\n├── state.json        # Project state tracking\n└── cache/            # Downloaded skills\n    └── {name}/\n        ├── skill.yaml\n        ├── SKILL.md\n        └── README.md\n\nproject/\n├── .claude/\n│   ├── settings.json # MCP servers\n│   └── skills/       # Enabled skill files\n└── CLAUDE.md         # Agent instructions (managed section)\n```\n\n## Managed Section Format\n```markdown\n\u003c!-- skills:managed:start --\u003e\n\u003c!-- skill:{name}:start --\u003e\n...content...\n\u003c!-- skill:{name}:end --\u003e\n\u003c!-- skills:managed:end --\u003e\n```\n\n## Services (Effect pattern)\n- `SkillCacheService` - Download/cache/validate skills\n- `SkillStateService` - Track enabled skills per project\n- `SkillEngineService` - Enable/disable orchestration\n- `AgentAdapter` (trait) - Agent-specific operations\n- `ClaudeCodeAdapter` - Claude Code integration\n- `OpenCodeAdapter` - OpenCode integration\n- `SkillConfigService` - User config management\n\n## Key Patterns from Codebase\n- Use `Context.Tag` + `Layer.effect` for services\n- Use `Data.TaggedError` for domain errors\n- Use `@effect/schema` for validation\n- Commands are `(args: ParsedArgs) =\u003e Effect.Effect\u003cvoid, Error\u003e`\n- Switch on subcommand in main command handler","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-14T16:33:42.336301-08:00","updated_at":"2025-12-15T11:14:46.858296-08:00","closed_at":"2025-12-15T11:14:46.858296-08:00","labels":["reference","skills","specification"],"dependencies":[{"issue_id":"grimoire-wcv","depends_on_id":"grimoire-av5","type":"parent-child","created_at":"2025-12-14T16:33:55.608742-08:00","created_by":"daemon"}]}
{"id":"grimoire-wk8","title":"Implement `skills sync` command","description":"Update enabled skills to latest versions.\n\n**File**: `src/commands/skills/sync.ts`\n\n**Workflow**:\n1. For each enabled skill in project\n2. Check source for updates (git fetch / API)\n3. If newer version available:\n   - Download new version to cache\n   - Re-run enable workflow (updates files)\n   - Report: \"Updated beads: v1.0.0 → v1.1.0\"\n4. If no update: skip\n\n**Output**:\n```\nSyncing enabled skills...\n\n✓ beads: v1.0.0 → v1.1.0\n  ○ typescript-strict: up to date\n  ○ nextjs-14: up to date\n\nUpdated 1 skill, 2 up to date\n```\n\n**Flags**:\n- `--dry-run` - Show what would be updated\n- `--reinit` - Also re-run init commands (dangerous)\n\n**Notes**:\n- Does NOT re-run init commands by default (could be destructive)\n- Version comparison uses semver if available\n- Falls back to commit hash comparison","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:37:25.862795-08:00","updated_at":"2025-12-15T11:14:20.105395-08:00","closed_at":"2025-12-15T11:14:20.105395-08:00","labels":["commands","polish","skills"],"dependencies":[{"issue_id":"grimoire-wk8","depends_on_id":"grimoire-cwc","type":"parent-child","created_at":"2025-12-14T16:37:34.544469-08:00","created_by":"daemon"}],"comments":[{"id":96,"issue_id":"grimoire-wk8","author":"","text":"Assigned to Agent-5: Implementing skills sync command","created_at":"2025-12-15T19:06:57Z"},{"id":100,"issue_id":"grimoire-wk8","author":"","text":"Assigned to Agent a2be7a4 - implementing skills sync command with version comparison","created_at":"2025-12-15T19:07:32Z"},{"id":105,"issue_id":"grimoire-wk8","author":"","text":"Assigning to Agent 3 - starting implementation","created_at":"2025-12-15T19:07:51Z"},{"id":109,"issue_id":"grimoire-wk8","author":"","text":"Agent assigned: Implementing skills sync command","created_at":"2025-12-15T19:11:13Z"}]}
{"id":"grimoire-wuy","title":"Create stats command","description":"Implement the `grimoire stats` command for viewing statistics.\n\n**CLI Interface:**\n```\ngrimoire stats [prompt-name]\n  --tokens          Include token counts per model\n  --json            JSON output\n  -i                Interactive dashboard\n```\n\n**Prompt Stats Output:**\n```\nStats for: coding-assistant\n\nContent:\n  Characters: 1,247\n  Words: 198\n  Lines: 24\n\nTokens:\n  gpt-4o: 312\n  claude-sonnet-4: 298\n\nUsage:\n  Copies: 47\n  Tests: 12\n  Last used: 2 hours ago\n```\n\n**Collection Stats Output:**\n```\nGrimoire Statistics\n\nCollection:\n  Prompts: 42\n  Templates: 5\n  Total tokens: ~12,450\n\nMost Used:\n  1. coding-assistant (47 copies)\n  2. creative-writer (32 copies)\n  3. reviewer (28 copies)\n\nTags:\n  coding: 15 prompts\n  writing: 8 prompts\n  ...\n\nRecently Edited:\n  - coding-assistant (2 hours ago)\n  - reviewer (yesterday)\n```","acceptance_criteria":"- Prompt stats shown\n- Collection stats shown\n- Token counts included\n- Usage metrics accurate\n- Interactive dashboard works","notes":"Assigned to agent - implementing stats command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:20.487358-08:00","updated_at":"2025-12-13T21:36:17.102286-08:00","closed_at":"2025-12-13T21:36:17.102286-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-wuy","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:52.786328-08:00","created_by":"daemon"},{"issue_id":"grimoire-wuy","depends_on_id":"grimoire-xhz","type":"blocks","created_at":"2025-12-13T19:32:06.463304-08:00","created_by":"daemon"}]}
{"id":"grimoire-wv8","title":"CLI Tool Improvements","description":"Epic for improving CLI tools including tab completion, prompt identification, template handling, and LLM configuration.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-12-14T12:31:12.554779-08:00","updated_at":"2025-12-14T12:31:12.554779-08:00"}
{"id":"grimoire-wyu","title":"Add arena command to CLI router","description":"Update CLI routing:\n- Export arenaCommand from src/commands/index.ts\n- Add arena case to src/index.ts command router\n- Handle 'arena' as valid command name","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-14T18:40:27.82421-08:00","updated_at":"2025-12-14T18:40:27.82421-08:00","labels":["arena","cli","integration"],"dependencies":[{"issue_id":"grimoire-wyu","depends_on_id":"grimoire-482","type":"parent-child","created_at":"2025-12-14T18:40:45.078996-08:00","created_by":"daemon"},{"issue_id":"grimoire-wyu","depends_on_id":"grimoire-hxz","type":"blocks","created_at":"2025-12-14T18:41:03.172313-08:00","created_by":"daemon"}]}
{"id":"grimoire-x4k","title":"Create rollback command with backup","description":"Implement the `grimoire rollback` command for restoring previous versions.\n\n**CLI Interface:**\n```\ngrimoire rollback \u003cprompt-name\u003e \u003cversion\u003e\n  --preview         Show changes without applying\n  --backup          Create backup before rollback (default: true)\n  --reason          Reason for rollback\n  --force           Skip confirmation\n  -i                Interactive version selection\n```\n\n**Behavior:**\n1. Find prompt and target version\n2. Show diff between current and target\n3. Confirm rollback (unless --force)\n4. Create backup version with reason \"Pre-rollback backup\"\n5. Restore content from target version\n6. Create new version with reason \"Rollback to v{N}\"\n\n**Preview Mode:**\n```\nRolling back coding-assistant to v2\n\nChanges:\n-  \"Using newer API\"\n+  \"Using legacy API\"\n\nLine changes: -15 +8\n\nUse --force to apply, or confirm below.\n```\n\n**Interactive Mode:**\nShow version list, select target, preview diff, confirm.","acceptance_criteria":"- Rollback restores content\n- Preview shows diff\n- Backup created by default\n- New version created after rollback\n- Reason tracked","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:08:26.085244-08:00","updated_at":"2025-12-13T21:29:35.309396-08:00","closed_at":"2025-12-13T21:29:35.309396-08:00","labels":["area:frontend","feature:grimoire-cli","phase:5","type:implementation"],"dependencies":[{"issue_id":"grimoire-x4k","depends_on_id":"grimoire-1nf","type":"parent-child","created_at":"2025-12-13T19:28:50.2899-08:00","created_by":"daemon"},{"issue_id":"grimoire-x4k","depends_on_id":"grimoire-f2l","type":"blocks","created_at":"2025-12-13T19:29:01.246143-08:00","created_by":"daemon"}]}
{"id":"grimoire-xe5","title":"Create alias command","description":"Implement the `grimoire alias` command for managing shortcuts.\n\n**CLI Interface:**\n```\ngrimoire alias \u003cname\u003e \u003ccommand\u003e   # Create alias\ngrimoire alias --list\ngrimoire alias --remove \u003cname\u003e\ngrimoire alias -i                 # Interactive manager\n```\n\n**Examples:**\n```bash\n# Create alias\ngrimoire alias cp \"copy --to-clipboard\"\ngrimoire alias fav \"favorite --list\"\ngrimoire alias q search\n\n# Use alias\ngrimoire cp coding-assistant  # Expands to: grimoire copy --to-clipboard coding-assistant\n\n# List aliases\ngrimoire alias --list\n```\n\n**Output:**\n```\nAliases:\n\n  cp   → copy --to-clipboard\n  fav  → favorite --list\n  q    → search\n  t    → test -m gpt-4o\n\nUse: grimoire \u003calias\u003e [args...]\n```\n\n**Interactive Mode:**\n- List all aliases\n- Add new alias\n- Edit existing\n- Remove alias\n- Test alias expansion","acceptance_criteria":"- Create alias works\n- Remove alias works\n- List shows all\n- Aliases resolve correctly\n- Built-in aliases available","notes":"Assigned to agent - implementing alias command","status":"closed","priority":3,"issue_type":"task","created_at":"2025-12-09T04:17:21.252341-08:00","updated_at":"2025-12-13T21:36:17.206167-08:00","closed_at":"2025-12-13T21:36:17.206167-08:00","labels":["area:frontend","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-xe5","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:53.051783-08:00","created_by":"daemon"},{"issue_id":"grimoire-xe5","depends_on_id":"grimoire-1ht","type":"blocks","created_at":"2025-12-13T19:32:06.815023-08:00","created_by":"daemon"}]}
{"id":"grimoire-xhz","title":"Implement StatsService for usage analytics","description":"Create src/services/stats-service.ts for tracking prompt statistics.\n\n**Service Interface:**\n```typescript\ninterface StatsService {\n  readonly getPromptStats: (promptId: string) =\u003e Effect.Effect\u003cPromptStats\u003e\n  readonly getCollectionStats: () =\u003e Effect.Effect\u003cCollectionStats\u003e\n  readonly countTokens: (text: string, model: string) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly recordUsage: (promptId: string, action: UsageAction) =\u003e Effect.Effect\u003cvoid\u003e\n}\n\ninterface PromptStats {\n  characterCount: number\n  wordCount: number\n  lineCount: number\n  tokenCounts: Record\u003cstring, number\u003e  // Per model\n  copyCount: number\n  testCount: number\n  lastUsed: Date | null\n}\n\ninterface CollectionStats {\n  totalPrompts: number\n  totalTemplates: number\n  tagDistribution: Record\u003cstring, number\u003e\n  mostUsed: PromptUsage[]\n  recentlyEdited: Prompt[]\n  totalTokens: number\n}\n```\n\n**Usage Tracking:**\n- Record copy, test, view actions\n- Store in analytics table\n- Aggregate on demand\n\n**Analytics Storage:**\n```sql\nCREATE TABLE usage_logs (\n  id INTEGER PRIMARY KEY,\n  prompt_id TEXT NOT NULL,\n  action TEXT NOT NULL,  -- 'copy', 'test', 'view', 'edit'\n  timestamp TEXT DEFAULT (datetime('now'))\n);\n```","acceptance_criteria":"- Prompt stats calculated\n- Collection stats aggregated\n- Usage tracking works\n- Token counts per model\n- Most used prompts tracked","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-09T04:17:19.230666-08:00","updated_at":"2025-12-13T21:29:22.455507-08:00","closed_at":"2025-12-13T21:29:22.455507-08:00","labels":["area:convex","feature:grimoire-cli","phase:8","type:implementation"],"dependencies":[{"issue_id":"grimoire-xhz","depends_on_id":"grimoire-dfa","type":"parent-child","created_at":"2025-12-13T19:31:52.870213-08:00","created_by":"daemon"}]}
{"id":"grimoire-xqo","title":"Create ApiKeyService for credential management","description":"Create src/services/api-key-service.ts for managing API credentials.\n\n**Service Interface:**\n```typescript\ninterface ApiKeyService {\n  readonly get: (provider: string) =\u003e Effect.Effect\u003cstring, ApiKeyNotFoundError\u003e\n  readonly set: (provider: string, key: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly remove: (provider: string) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly list: () =\u003e Effect.Effect\u003cstring[]\u003e  // Returns provider names\n  readonly validate: (provider: string) =\u003e Effect.Effect\u003cboolean\u003e\n}\n```\n\n**Priority Order:**\n1. Environment variables: `OPENAI_API_KEY`, `ANTHROPIC_API_KEY`\n2. Config file: `~/.grimoire/config.yaml`\n\n**Environment Variable Mapping:**\n```typescript\nconst ENV_KEYS: Record\u003cstring, string\u003e = {\n  openai: 'OPENAI_API_KEY',\n  anthropic: 'ANTHROPIC_API_KEY'\n}\n```\n\n**Security:**\n- Never log or display full keys\n- Mask in output (show last 4 chars)\n- Store in config with restricted permissions","acceptance_criteria":"- Gets keys from env first\n- Falls back to config file\n- Set/remove updates config\n- Keys never logged in full\n- Validation checks provider","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:39.250242-08:00","updated_at":"2025-12-13T21:29:22.351042-08:00","closed_at":"2025-12-13T21:29:22.351042-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-xqo","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.642665-08:00","created_by":"daemon"}],"comments":[{"id":50,"issue_id":"grimoire-xqo","author":"","text":"Assigned to Agent 12 - Working on src/services/api-key-service.ts","created_at":"2025-12-14T05:16:24Z"}]}
{"id":"grimoire-y0h","title":"Display name and short ID when using tab completion in CLI show","description":"When tab completion shows multiple matches, display both the name and identifying field (short ID) so users can distinguish between similar prompts.\n\nExample:\n```bash\ngrimoire show my\u003cTAB\u003e\n# my-prompt      [abc123]  Updated 2h ago\n# my-prompt-v2   [def456]  Updated 1d ago\n# my-template    [ghi789]  Template\n```","design":"**Depends on:** grimoire-wv8 (tab completion), grimoire-??? (short ID system)\n\n**Implementation:**\n\n1. Modify `__complete-prompts` to output richer format when requested:\n```typescript\nexport const completePromptsCommand = (args: ParsedArgs) =\u003e\n  Effect.gen(function* () {\n    const prefix = args.positional[0] || \"\";\n    const verbose = args.flags[\"verbose\"];\n    const storage = yield* StorageService;\n    const prompts = yield* storage.getAll;\n    \n    const matches = prompts\n      .filter(p =\u003e p.name.toLowerCase().startsWith(prefix.toLowerCase()));\n    \n    if (verbose) {\n      for (const p of matches) {\n        const meta = p.isTemplate ? \"Template\" : formatDate(p.updated);\n        console.log(`${p.name}\\t[${p.shortId}]\\t${meta}`);\n      }\n    } else {\n      console.log(matches.map(p =\u003e p.name).join(\"\\n\"));\n    }\n  });\n```\n\n2. Update shell completion scripts to use verbose output when available (zsh supports descriptions):\n\n```zsh\n_grimoire_show() {\n  local -a prompts\n  prompts=(${(f)\"$(grimoire __complete-prompts --verbose \"$PREFIX\" 2\u003e/dev/null)\"})\n  _describe 'prompts' prompts\n}\n```\n\n**Files to Modify:**\n- `src/commands/completion.ts` - Add verbose flag support\n- `completions/grimoire.zsh` - Use descriptions","acceptance_criteria":"- [ ] Tab completion in zsh shows name, short ID, and metadata\n- [ ] Bash completion shows basic names (no description support)\n- [ ] Format is readable and aligned\n- [ ] Templates are marked as such in completion list","status":"open","priority":3,"issue_type":"feature","created_at":"2025-12-14T12:32:22.447298-08:00","updated_at":"2025-12-14T12:32:22.447298-08:00","dependencies":[{"issue_id":"grimoire-y0h","depends_on_id":"grimoire-wv8","type":"parent-child","created_at":"2025-12-14T12:32:32.888967-08:00","created_by":"daemon"},{"issue_id":"grimoire-y0h","depends_on_id":"grimoire-oym","type":"blocks","created_at":"2025-12-14T12:32:33.056947-08:00","created_by":"daemon"},{"issue_id":"grimoire-y0h","depends_on_id":"grimoire-sjd","type":"blocks","created_at":"2025-12-14T12:32:33.123609-08:00","created_by":"daemon"}]}
{"id":"grimoire-yeu","title":"Create LLMService abstraction with provider interface","description":"Create src/services/llm-service.ts with a provider abstraction for LLM integrations.\n\n**Service Interface:**\n```typescript\ninterface LLMService {\n  readonly complete: (request: LLMRequest) =\u003e Effect.Effect\u003cLLMResponse, LLMError\u003e\n  readonly stream: (request: LLMRequest) =\u003e Stream.Stream\u003cStreamChunk, LLMError\u003e\n  readonly listModels: () =\u003e Effect.Effect\u003cstring[]\u003e\n  readonly countTokens: (text: string, model: string) =\u003e Effect.Effect\u003cnumber\u003e\n  readonly getProvider: (name: string) =\u003e Effect.Effect\u003cLLMProvider\u003e\n}\n\ninterface LLMRequest {\n  model: string\n  messages: Message[]\n  temperature?: number\n  maxTokens?: number\n  stopSequences?: string[]\n}\n\ninterface LLMResponse {\n  content: string\n  model: string\n  usage: { inputTokens: number; outputTokens: number }\n  finishReason: 'stop' | 'length' | 'error'\n}\n```\n\n**Provider Interface:**\n```typescript\ninterface LLMProvider {\n  readonly name: string\n  readonly complete: (request: LLMRequest) =\u003e Effect.Effect\u003cLLMResponse\u003e\n  readonly stream: (request: LLMRequest) =\u003e Stream.Stream\u003cStreamChunk\u003e\n  readonly listModels: () =\u003e Effect.Effect\u003cstring[]\u003e\n  readonly validateApiKey: () =\u003e Effect.Effect\u003cboolean\u003e\n}\n```","acceptance_criteria":"- LLMService interface defined\n- Provider abstraction works\n- Request/Response types defined\n- Stream type for streaming responses\n- Provider registry for lookup","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:38.598977-08:00","updated_at":"2025-12-13T21:29:22.379834-08:00","closed_at":"2025-12-13T21:29:22.379834-08:00","labels":["area:api","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-yeu","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.726223-08:00","created_by":"daemon"}],"comments":[{"id":49,"issue_id":"grimoire-yeu","author":"","text":"Assigned to Agent 11 - Working on src/services/llm-service.ts","created_at":"2025-12-14T05:16:24Z"}]}
{"id":"grimoire-yka","title":"Add provider health check command","description":"Quick check to see which providers are configured and responding.\n\n## Implementation\n- Enhance `grimoire config llm list` to show health status\n- Add `grimoire config llm status` for detailed health check\n- Call `provider.validateApiKey()` for each configured provider\n- Display: provider name, configured (yes/no), healthy (yes/no), default model\n- Color-coded output for quick visual scan\n\n## Files to Modify\n- `src/commands/config.ts` - Enhance list/add status command","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-15T10:41:49.208412-08:00","updated_at":"2025-12-15T10:41:49.208412-08:00","labels":["cli","provider","ux"],"dependencies":[{"issue_id":"grimoire-yka","depends_on_id":"grimoire-jqf","type":"parent-child","created_at":"2025-12-15T10:42:07.081696-08:00","created_by":"daemon"}]}
{"id":"grimoire-yte","title":"Implement SearchService with FTS5 full-text search","description":"Create src/services/search-service.ts for advanced search using SQLite FTS5.\n\n**Service Interface:**\n```typescript\ninterface SearchService {\n  readonly search: (options: SearchOptions) =\u003e Effect.Effect\u003cSearchResult[]\u003e\n  readonly suggest: (prefix: string) =\u003e Effect.Effect\u003cstring[]\u003e\n  readonly updateIndex: (promptId: string, name: string, content: string, tags: string[]) =\u003e Effect.Effect\u003cvoid\u003e\n  readonly rebuildIndex: () =\u003e Effect.Effect\u003cvoid\u003e\n}\n\ninterface SearchOptions {\n  query: string\n  tags?: string[]\n  fromDate?: Date\n  toDate?: Date\n  limit?: number\n  fuzzy?: boolean\n}\n\ninterface SearchResult {\n  prompt: Prompt\n  snippet: string\n  rank: number\n  highlights: Range[]\n}\n```\n\n**FTS5 Queries:**\n```sql\nSELECT p.*, \n       snippet(prompts_fts, 1, '\u003cmark\u003e', '\u003c/mark\u003e', '...', 64) as snippet,\n       bm25(prompts_fts) as rank\nFROM prompts_fts\nJOIN prompts p ON prompts_fts.rowid = p.rowid\nWHERE prompts_fts MATCH ?\nORDER BY rank\nLIMIT ?\n```\n\nSupport prefix search, phrase search, and boolean operators.","acceptance_criteria":"- Full-text search works\n- Snippets with highlights returned\n- Results ranked by relevance\n- Date filtering works\n- Prefix suggestions work","status":"closed","priority":1,"issue_type":"task","assignee":"agent-14","created_at":"2025-12-09T04:07:14.990289-08:00","updated_at":"2025-12-13T21:17:49.159571-08:00","closed_at":"2025-12-13T21:17:49.159571-08:00","labels":["area:convex","feature:grimoire-cli","phase:4","type:implementation"],"dependencies":[{"issue_id":"grimoire-yte","depends_on_id":"grimoire-sod","type":"parent-child","created_at":"2025-12-13T19:28:08.919279-08:00","created_by":"daemon"}],"comments":[{"id":40,"issue_id":"grimoire-yte","author":"","text":"Assigned to Agent 2 - Working on src/services/search-service.ts","created_at":"2025-12-14T05:15:06Z"},{"id":53,"issue_id":"grimoire-yte","author":"","text":"Implementation complete. SearchService created at src/services/search-service.ts with: FTS5 integration, BM25 ranking, snippet generation with highlights, tag/date filtering, prefix suggestions.","created_at":"2025-12-14T05:17:49Z"}]}
{"id":"grimoire-yuo","title":"Create test command with streaming output","description":"Implement the `grimoire test` command for testing prompts with LLMs.\n\n**CLI Interface:**\n```\ngrimoire test \u003cprompt-name\u003e\n  -m, --model       Model to use (default: gpt-4o)\n  -p, --provider    Provider: openai, anthropic, ollama\n  --temperature     Temperature 0-2 (default: 0.7)\n  --max-tokens      Max output tokens (default: 1024)\n  --vars            Variables as JSON: '{\"name\": \"value\"}'\n  --no-stream       Disable streaming output\n  --save            Save result to prompt history\n  -i                Interactive mode\n```\n\n**Behavior:**\n1. Load prompt content\n2. Interpolate variables (if any)\n3. Send to LLM provider\n4. Stream output to terminal\n5. Show usage stats at end\n\n**Output:**\n```\nTesting: coding-assistant\nModel: gpt-4o | Temperature: 0.7\n\n─────────────────────────────────────\n\u003cstreaming response appears here...\u003e\n─────────────────────────────────────\n\nTokens: 150 in / 423 out\nCost: $0.0051\nTime: 2.3s\n```\n\n**Interactive Mode:**\n- Show prompt preview\n- Edit variables before sending\n- Continue conversation","acceptance_criteria":"- Tests prompt with LLM\n- Streaming output works\n- Variables interpolated\n- Usage stats shown\n- --save records result","notes":"Assigned to agent - implementing test command","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-09T04:12:39.934866-08:00","updated_at":"2025-12-13T21:47:23.200599-08:00","closed_at":"2025-12-13T21:47:23.200599-08:00","labels":["area:frontend","feature:grimoire-cli","phase:7","type:implementation"],"dependencies":[{"issue_id":"grimoire-yuo","depends_on_id":"grimoire-1us","type":"parent-child","created_at":"2025-12-13T19:30:34.821519-08:00","created_by":"daemon"},{"issue_id":"grimoire-yuo","depends_on_id":"grimoire-6tx","type":"blocks","created_at":"2025-12-13T19:31:00.988339-08:00","created_by":"daemon"}],"comments":[{"id":63,"issue_id":"grimoire-yuo","author":"","text":"Agent a31c972 assigned - implementing test command","created_at":"2025-12-14T05:43:27Z"}]}
{"id":"grimoire-z5z","title":"Implement SkillConfigService","description":"Service for managing user-level skills configuration.\n\n**File**: `src/services/skills/skill-config-service.ts`\n\n**Interface**:\n```typescript\ninterface SkillConfigServiceImpl {\n  readonly get: () =\u003e Effect.Effect\u003cSkillsConfig\u003e;\n  readonly set: (config: Partial\u003cSkillsConfig\u003e) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly getDefault: (key: keyof SkillsConfig['defaults']) =\u003e Effect.Effect\u003cstring\u003e;\n  readonly setDefault: (key: string, value: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly addSource: (source: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly removeSource: (source: string) =\u003e Effect.Effect\u003cvoid\u003e;\n  readonly getSources: () =\u003e Effect.Effect\u003cstring[]\u003e;\n}\n```\n\n**Storage**: `~/.skills/config.yaml`\n```yaml\ndefaults:\n  agent: auto\n\nrecommended:\n  - core/coding-standards\n  - core/git-conventions\n\nsources:\n  - github:mycompany/internal-skills\n\ndetect:\n  \"supabase/config.toml\": supabase\n  \".cursorrules\": cursor-compat\n\nfeatures:\n  auto_detect: true\n  inject_agent_md: true\n  color_output: true\n```\n\n**Follow patterns from `src/services/api-key-service.ts`**","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T16:34:43.078757-08:00","updated_at":"2025-12-15T10:50:16.421619-08:00","closed_at":"2025-12-15T10:50:16.421619-08:00","labels":["infrastructure","services","skills"],"dependencies":[{"issue_id":"grimoire-z5z","depends_on_id":"grimoire-1wu","type":"parent-child","created_at":"2025-12-14T16:34:57.186669-08:00","created_by":"daemon"}]}
{"id":"grimoire-zck","title":"Register sync and format commands in CLI","description":"Commands `sync` and `format` exist in `src/commands/` but need to be verified as registered in `src/index.ts`.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-14T02:04:14.397559-08:00","updated_at":"2025-12-14T02:13:39.401612-08:00","closed_at":"2025-12-14T02:13:39.401612-08:00","labels":["feature:grimoire-cli","type:bugfix"]}
{"id":"grimoire-zuq","title":"Fix provider TypeScript errors (20+ errors)","description":"Fix TypeScript errors in provider files:\n- src/services/providers/openai-provider.ts (11 errors)\n- src/services/providers/anthropic-provider.ts (6 errors)\n- src/services/providers/ollama-provider.ts (3 errors)","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-13T22:00:23.662443-08:00","updated_at":"2025-12-13T22:11:02.333614-08:00","closed_at":"2025-12-13T22:11:02.333614-08:00","labels":["bugfix","typescript"],"dependencies":[{"issue_id":"grimoire-zuq","depends_on_id":"grimoire-2p5","type":"parent-child","created_at":"2025-12-13T22:00:34.42351-08:00","created_by":"daemon"}]}
